/* https://www.kofiannanfoundation.org/app/plugins/embed-any-document/js/pdfobject.min.js */
try{
/**
 *  PDFObject v2.1.1
 *  https://github.com/pipwerks/PDFObject
 *  @license
 *  Copyright (c) 2008-2018 Philip Hutchison
 *  MIT-style license: https://pipwerks.mit-license.org/
 *  UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.PDFObject=t()}(this,function(){"use strict";if("undefined"==typeof window||"undefined"==typeof navigator)return!1;var e=window.navigator.userAgent,t=void 0!==navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/pdf"],v=void 0!==window.Promise,o=-1!==e.indexOf("irefox")&&-1===e.indexOf("Mobile")&&-1===e.indexOf("Tablet")&&18<parseInt(e.split("rv:")[1].split(".")[0],10),b=/iphone|ipad|ipod/i.test(e.toLowerCase()),n=function(e){var t;try{t=new ActiveXObject(e)}catch(e){t=null}return t},i=function(){return!!(window.ActiveXObject||"ActiveXObject"in window)},h=!b&&navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Safari"),r=function(){return!(!n("AcroPDF.PDF")&&!n("PDF.PdfCtrl"))},y=!b&&(o||t||i()&&r()),w=function(e){var t,o="";if(e){for(t in e)e.hasOwnProperty(t)&&(o+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&");o=o&&(o="#"+o).slice(0,o.length-1)}return o},d=function(e){"undefined"!=typeof console&&console.log&&console.log("[PDFObject] "+e)},P=function(e){return d(e),!1},D=function(e){var t=document.body;return"string"==typeof e?t=document.querySelector(e):"undefined"!=typeof jQuery&&e instanceof jQuery&&e.length?t=e.get(0):void 0!==e.nodeType&&1===e.nodeType&&(t=e),t},s=function(e){var t="pdfobject-container",o=e.className.split(/\s+/);-1===o.indexOf(t)&&(o.push(t),e.className=o.join(" "))},T=function(e,t,o,n,i){var r=n+"?file="+encodeURIComponent(t)+o,d="<div style='"+(b?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ")+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+i+" src='"+r+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";return s(e),e.style.position="relative",e.style.overflow="auto",e.innerHTML=d,e.getElementsByTagName("iframe")[0]},j=function(e,t,o,n,i,r,d){var a="",a=t&&t!==document.body?"width: "+i+"; height: "+r+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;";return s(e),e.innerHTML="<embed "+d+" class='pdfobject' src='"+o+n+"' type='application/pdf' style='overflow: auto; "+a+"'/>",e.getElementsByTagName("embed")[0]},F=function(e,t,o,n,i,r,d){var a="",a=t&&t!==document.body?"width: "+i+"; height: "+r+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;";return e.className+=" pdfobject-container",e.innerHTML="<iframe "+d+" class='pdfobject' src='"+o+n+"' type='application/pdf' style='border: none; "+a+"'/>",e.getElementsByTagName("iframe")[0]};return{embed:function(e,t,o){if("string"!=typeof e)return P("URL is not valid");t=void 0!==t&&t;var n,i=(o=void 0!==o?o:{}).id&&"string"==typeof o.id?"id='"+o.id+"'":"",r=!!o.page&&o.page,d=o.pdfOpenParams?o.pdfOpenParams:{},a=void 0===o.fallbackLink||o.fallbackLink,s=o.width?o.width:"100%",f=o.height?o.height:"100%",p="boolean"!=typeof o.assumptionMode||o.assumptionMode,l="boolean"==typeof o.forcePDFJS&&o.forcePDFJS,c="boolean"==typeof o.supportRedirect&&o.supportRedirect,u=!!o.PDFJS_URL&&o.PDFJS_URL,m=D(t),g="";return m?(r&&(d.page=r),n=w(d),l&&u?T(m,e,n,u,i):y||p&&v&&!b?(c&&h?F:j)(m,t,e,n,s,f,i):u?T(m,e,n,u,i):(a&&(g="string"==typeof a?a:"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>",m.innerHTML=g.replace(/\[url\]/g,e)),P("This browser does not support embedded PDFs"))):P("Target element cannot be determined")},pdfobjectversion:"2.1.1",supportsPDFs:y}});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/plugins/embed-any-document/js/embed-public.min.js */
try{
jQuery(function(r){r(".ead-iframe-wrapper").each(function(){var e=r(this),t=e.find(".ead-iframe"),i=e.parent(".ead-document").data("viewer"),a=void 0!==i&&0<i.length&&i,d=r('<iframe class="ead-iframe"></iframe>');d.attr({src:t.attr("src"),style:t.attr("style"),title:t.attr("title")}),a||d.css("visibility","visible"),d.on("load",function(){r(this).parents(".ead-document").find(".ead-document-loading").css("display","none")}),e.html(d)}),r(".ead-document[data-pdf-src]").each(function(){var e,t=r(this),i=t.find(".ead-iframe"),a=t.data("pdfSrc"),d=void 0!==(d=t.data("viewer"))&&0<a.length&&0<d.length&&d,n="pdfjs"in eadPublic&&0<eadPublic.pdfjs.length&&"built-in"===d;d&&("browser"===d||n)&&(PDFObject.supportsPDFs||n?(e={},e=n?{forcePDFJS:!0,PDFJS_URL:eadPublic.pdfjs}:{width:i.css("width"),height:i.css("height")},PDFObject.embed(a,t,e)):i.css("visibility","visible"))}),r(document).on("click",".ead-reload-btn",function(e){e.preventDefault();var t=r(this).parents(".ead-document"),i=t.find(".ead-iframe").attr("src");t.find(".ead-iframe").attr("src",i)})});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/plugins/contact-form-7/includes/js/scripts.js */
try{
(function($){'use strict';if(typeof wpcf7==='undefined'||wpcf7===null){return}
wpcf7=$.extend({cached:0,inputs:[]},wpcf7);$(function(){wpcf7.supportHtml5=(function(){var features={};var input=document.createElement('input');features.placeholder='placeholder' in input;var inputTypes=['email','url','tel','number','range','date'];$.each(inputTypes,function(index,value){input.setAttribute('type',value);features[value]=input.type!=='text'});return features})();$('div.wpcf7 > form').each(function(){var $form=$(this);wpcf7.initForm($form);if(wpcf7.cached){wpcf7.refill($form)}})});wpcf7.getId=function(form){return parseInt($('input[name="_wpcf7"]',form).val(),10)};wpcf7.initForm=function(form){var $form=$(form);wpcf7.setStatus($form,'init');$form.submit(function(event){if(!wpcf7.supportHtml5.placeholder){$('[placeholder].placeheld',$form).each(function(i,n){$(n).val('').removeClass('placeheld')})}
if(typeof window.FormData==='function'){wpcf7.submit($form);event.preventDefault()}});$('.wpcf7-submit',$form).after('<span class="ajax-loader"></span>');wpcf7.toggleSubmit($form);$form.on('click','.wpcf7-acceptance',function(){wpcf7.toggleSubmit($form)});$('.wpcf7-exclusive-checkbox',$form).on('click','input:checkbox',function(){var name=$(this).attr('name');$form.find('input:checkbox[name="'+name+'"]').not(this).prop('checked',!1)});$('.wpcf7-list-item.has-free-text',$form).each(function(){var $freetext=$(':input.wpcf7-free-text',this);var $wrap=$(this).closest('.wpcf7-form-control');if($(':checkbox, :radio',this).is(':checked')){$freetext.prop('disabled',!1)}else{$freetext.prop('disabled',!0)}
$wrap.on('change',':checkbox, :radio',function(){var $cb=$('.has-free-text',$wrap).find(':checkbox, :radio');if($cb.is(':checked')){$freetext.prop('disabled',!1).focus()}else{$freetext.prop('disabled',!0)}})});if(!wpcf7.supportHtml5.placeholder){$('[placeholder]',$form).each(function(){$(this).val($(this).attr('placeholder'));$(this).addClass('placeheld');$(this).focus(function(){if($(this).hasClass('placeheld')){$(this).val('').removeClass('placeheld')}});$(this).blur(function(){if(''===$(this).val()){$(this).val($(this).attr('placeholder'));$(this).addClass('placeheld')}})})}
if(wpcf7.jqueryUi&&!wpcf7.supportHtml5.date){$form.find('input.wpcf7-date[type="date"]').each(function(){$(this).datepicker({dateFormat:'yy-mm-dd',minDate:new Date($(this).attr('min')),maxDate:new Date($(this).attr('max'))})})}
if(wpcf7.jqueryUi&&!wpcf7.supportHtml5.number){$form.find('input.wpcf7-number[type="number"]').each(function(){$(this).spinner({min:$(this).attr('min'),max:$(this).attr('max'),step:$(this).attr('step')})})}
wpcf7.resetCounter($form);$form.on('change','.wpcf7-validates-as-url',function(){var val=$.trim($(this).val());if(val&&!val.match(/^[a-z][a-z0-9.+-]*:/i)&&-1!==val.indexOf('.')){val=val.replace(/^\/+/,'');val='https://'+val}
$(this).val(val)})};wpcf7.submit=function(form){if(typeof window.FormData!=='function'){return}
var $form=$(form);$('.ajax-loader',$form).addClass('is-active');wpcf7.clearResponse($form);var formData=new FormData($form.get(0));var detail={id:$form.closest('div.wpcf7').attr('id'),status:'init',inputs:[],formData:formData};$.each($form.serializeArray(),function(i,field){if('_wpcf7'==field.name){detail.contactFormId=field.value}else if('_wpcf7_version'==field.name){detail.pluginVersion=field.value}else if('_wpcf7_locale'==field.name){detail.contactFormLocale=field.value}else if('_wpcf7_unit_tag'==field.name){detail.unitTag=field.value}else if('_wpcf7_container_post'==field.name){detail.containerPostId=field.value}else if(field.name.match(/^_/)){}else{detail.inputs.push(field)}});wpcf7.triggerEvent($form.closest('div.wpcf7'),'beforesubmit',detail);var ajaxSuccess=function(data,status,xhr,$form){detail.id=$(data.into).attr('id');detail.status=data.status;detail.apiResponse=data;switch(data.status){case 'init':wpcf7.setStatus($form,'init');break;case 'validation_failed':$.each(data.invalid_fields,function(i,n){$(n.into,$form).each(function(){wpcf7.notValidTip(this,n.message);$('.wpcf7-form-control',this).addClass('wpcf7-not-valid');$('.wpcf7-form-control',this).attr('aria-describedby',n.error_id);$('[aria-invalid]',this).attr('aria-invalid','true')})});wpcf7.setStatus($form,'invalid');wpcf7.triggerEvent(data.into,'invalid',detail);break;case 'acceptance_missing':wpcf7.setStatus($form,'unaccepted');wpcf7.triggerEvent(data.into,'unaccepted',detail);break;case 'spam':wpcf7.setStatus($form,'spam');wpcf7.triggerEvent(data.into,'spam',detail);break;case 'aborted':wpcf7.setStatus($form,'aborted');wpcf7.triggerEvent(data.into,'aborted',detail);break;case 'mail_sent':wpcf7.setStatus($form,'sent');wpcf7.triggerEvent(data.into,'mailsent',detail);break;case 'mail_failed':wpcf7.setStatus($form,'failed');wpcf7.triggerEvent(data.into,'mailfailed',detail);break;default:wpcf7.setStatus($form,'custom-'+data.status.replace(/[^0-9a-z]+/i,'-'))}
wpcf7.refill($form,data);wpcf7.triggerEvent(data.into,'submit',detail);if('mail_sent'==data.status){$form.each(function(){this.reset()});wpcf7.toggleSubmit($form);wpcf7.resetCounter($form)}
if(!wpcf7.supportHtml5.placeholder){$form.find('[placeholder].placeheld').each(function(i,n){$(n).val($(n).attr('placeholder'))})}
$('.wpcf7-response-output',$form).html('').append(data.message).slideDown('fast');$('.screen-reader-response',$form.closest('.wpcf7')).each(function(){var $response=$(this);$('[role="status"]',$response).html(data.message);if(data.invalid_fields){$.each(data.invalid_fields,function(i,n){if(n.idref){var $li=$('<li></li>').append($('<a></a>').attr('href','#'+n.idref).append(n.message))}else{var $li=$('<li></li>').append(n.message)}
$li.attr('id',n.error_id);$('ul',$response).append($li)})}});if(data.posted_data_hash){$form.find('input[name="_wpcf7_posted_data_hash"]').first().val(data.posted_data_hash)}};$.ajax({type:'POST',url:wpcf7.apiSettings.getRoute('/contact-forms/'+wpcf7.getId($form)+'/feedback'),data:formData,dataType:'json',processData:!1,contentType:!1}).done(function(data,status,xhr){ajaxSuccess(data,status,xhr,$form);$('.ajax-loader',$form).removeClass('is-active')}).fail(function(xhr,status,error){var $e=$('<div class="ajax-error"></div>').text(error.message);$form.after($e)})};wpcf7.triggerEvent=function(target,name,detail){var event=new CustomEvent('wpcf7'+name,{bubbles:!0,detail:detail});$(target).get(0).dispatchEvent(event)};wpcf7.setStatus=function(form,status){var $form=$(form);var prevStatus=$form.attr('data-status');$form.data('status',status);$form.addClass(status);$form.attr('data-status',status);if(prevStatus&&prevStatus!==status){$form.removeClass(prevStatus)}}
wpcf7.toggleSubmit=function(form,state){var $form=$(form);var $submit=$('input:submit',$form);if(typeof state!=='undefined'){$submit.prop('disabled',!state);return}
if($form.hasClass('wpcf7-acceptance-as-validation')){return}
$submit.prop('disabled',!1);$('.wpcf7-acceptance',$form).each(function(){var $span=$(this);var $input=$('input:checkbox',$span);if(!$span.hasClass('optional')){if($span.hasClass('invert')&&$input.is(':checked')||!$span.hasClass('invert')&&!$input.is(':checked')){$submit.prop('disabled',!0);return!1}}})};wpcf7.resetCounter=function(form){var $form=$(form);$('.wpcf7-character-count',$form).each(function(){var $count=$(this);var name=$count.attr('data-target-name');var down=$count.hasClass('down');var starting=parseInt($count.attr('data-starting-value'),10);var maximum=parseInt($count.attr('data-maximum-value'),10);var minimum=parseInt($count.attr('data-minimum-value'),10);var updateCount=function(target){var $target=$(target);var length=$target.val().length;var count=down?starting-length:length;$count.attr('data-current-value',count);$count.text(count);if(maximum&&maximum<length){$count.addClass('too-long')}else{$count.removeClass('too-long')}
if(minimum&&length<minimum){$count.addClass('too-short')}else{$count.removeClass('too-short')}};$(':input[name="'+name+'"]',$form).each(function(){updateCount(this);$(this).keyup(function(){updateCount(this)})})})};wpcf7.notValidTip=function(target,message){var $target=$(target);$('.wpcf7-not-valid-tip',$target).remove();$('<span></span>').attr({'class':'wpcf7-not-valid-tip','aria-hidden':'true',}).text(message).appendTo($target);if($target.is('.use-floating-validation-tip *')){var fadeOut=function(target){$(target).not(':hidden').animate({opacity:0},'fast',function(){$(this).css({'z-index':-100})})};$target.on('mouseover','.wpcf7-not-valid-tip',function(){fadeOut(this)});$target.on('focus',':input',function(){fadeOut($('.wpcf7-not-valid-tip',$target))})}};wpcf7.refill=function(form,data){var $form=$(form);var refillCaptcha=function($form,items){$.each(items,function(i,n){$form.find(':input[name="'+i+'"]').val('');$form.find('img.wpcf7-captcha-'+i).attr('src',n);var match=/([0-9]+)\.(png|gif|jpeg)$/.exec(n);$form.find('input:hidden[name="_wpcf7_captcha_challenge_'+i+'"]').attr('value',match[1])})};var refillQuiz=function($form,items){$.each(items,function(i,n){$form.find(':input[name="'+i+'"]').val('');$form.find(':input[name="'+i+'"]').siblings('span.wpcf7-quiz-label').text(n[0]);$form.find('input:hidden[name="_wpcf7_quiz_answer_'+i+'"]').attr('value',n[1])})};if(typeof data==='undefined'){$.ajax({type:'GET',url:wpcf7.apiSettings.getRoute('/contact-forms/'+wpcf7.getId($form)+'/refill'),beforeSend:function(xhr){var nonce=$form.find(':input[name="_wpnonce"]').val();if(nonce){xhr.setRequestHeader('X-WP-Nonce',nonce)}},dataType:'json'}).done(function(data,status,xhr){if(data.captcha){refillCaptcha($form,data.captcha)}
if(data.quiz){refillQuiz($form,data.quiz)}})}else{if(data.captcha){refillCaptcha($form,data.captcha)}
if(data.quiz){refillQuiz($form,data.quiz)}}};wpcf7.clearResponse=function(form){var $form=$(form);$form.siblings('.screen-reader-response').each(function(){$('[role="status"]',this).html('');$('ul',this).html('')});$('.wpcf7-not-valid-tip',$form).remove();$('[aria-invalid]',$form).attr('aria-invalid','false');$('.wpcf7-form-control',$form).removeClass('wpcf7-not-valid');$('.wpcf7-response-output',$form).hide().empty()};wpcf7.apiSettings.getRoute=function(path){var url=wpcf7.apiSettings.root;url=url.replace(wpcf7.apiSettings.namespace,wpcf7.apiSettings.namespace+path);return url}})(jQuery);(function(){if(typeof window.CustomEvent==="function")return!1;function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}
CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/kaf/js/cookies.js */
try{
!function(e){if(!e.hasInitialised){var t={escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},hasClass:function(e,t){var i=" ";return 1===e.nodeType&&(i+e.className+i).replace(/[\n\t]/g,i).indexOf(i+t+i)>=0},addClass:function(e,t){e.className+=" "+t},removeClass:function(e,t){var i=new RegExp("\\b"+this.escapeRegExp(t)+"\\b");e.className=e.className.replace(i,"")},interpolateString:function(e,t){var i=/{{([a-z][a-z0-9\-_]*)}}/gi;return e.replace(i,function(e){return t(arguments[1])||""})},getCookie:function(e){var t="; "+document.cookie,i=t.split("; "+e+"=");return i.length<2?void 0:i.pop().split(";").shift()},setCookie:function(e,t,i,n,o,s){var r=new Date;r.setDate(r.getDate()+(i||365));var a=[e+"="+t,"expires="+r.toUTCString(),"path="+(o||"/")];n&&a.push("domain="+n),s&&a.push("secure"),document.cookie=a.join(";")},deepExtend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(i in e&&this.isPlainObject(e[i])&&this.isPlainObject(t[i])?this.deepExtend(e[i],t[i]):e[i]=t[i]);return e},throttle:function(e,t){var i=!1;return function(){i||(e.apply(this,arguments),i=!0,setTimeout(function(){i=!1},t))}},hash:function(e){var t,i,n,o=0;if(0===e.length)return o;for(t=0,n=e.length;t<n;++t)i=e.charCodeAt(t),o=(o<<5)-o+i,o|=0;return o},normaliseHex:function(e){return"#"==e[0]&&(e=e.substr(1)),3==e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e},getContrast:function(e){e=this.normaliseHex(e);var t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),o=(299*t+587*i+114*n)/1e3;return o>=128?"#000":"#fff"},getLuminance:function(e){var t=parseInt(this.normaliseHex(e),16),i=38,n=(t>>16)+i,o=(t>>8&255)+i,s=(255&t)+i,r=(16777216+65536*(n<255?n<1?0:n:255)+256*(o<255?o<1?0:o:255)+(s<255?s<1?0:s:255)).toString(16).slice(1);return"#"+r},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isPlainObject:function(e){return"object"==typeof e&&null!==e&&e.constructor==Object},traverseDOMPath:function(e,i){return e&&e.parentNode?t.hasClass(e,i)?e:this.traverseDOMPath(e.parentNode,i):null}};e.status={deny:"deny",allow:"allow",dismiss:"dismiss"},e.transitionEnd=function(){var e=document.createElement("div"),t={t:"transitionend",OT:"oTransitionEnd",msT:"MSTransitionEnd",MozT:"transitionend",WebkitT:"webkitTransitionEnd"};for(var i in t)if(t.hasOwnProperty(i)&&"undefined"!=typeof e.style[i+"ransition"])return t[i];return""}(),e.hasTransition=!!e.transitionEnd;var i=Object.keys(e.status).map(t.escapeRegExp);e.customStyles={},e.Popup=function(){function n(){this.initialise.apply(this,arguments)}
function o(e){this.openingTimeout=null,t.removeClass(e,"cc-invisible")}
function s(t){t.style.display="none",t.removeEventListener(e.transitionEnd,this.afterTransition),this.afterTransition=null}
function r(){var t=this.options.onInitialise.bind(this);if(!window.navigator.cookieEnabled)return t(e.status.deny),!0;if(window.CookiesOK||window.navigator.CookiesOK)return t(e.status.allow),!0;var i=Object.keys(e.status),n=this.getStatus(),o=i.indexOf(n)>=0;return o&&t(n),o}
function a(){var e=this.options.position.split("-"),t=[];return e.forEach(function(e){t.push("cc-"+e)}),t}
function c(){var e=this.options,i="top"==e.position||"bottom"==e.position?"banner":"floating";t.isMobile()&&(i="floating");var n=["cc-"+i,"cc-type-"+e.type,"cc-theme-"+e.theme];e["static"]&&n.push("cc-static"),n.push.apply(n,a.call(this));p.call(this,this.options.palette);return this.customStyleSelector&&n.push(this.customStyleSelector),n}
function l(){var e={},i=this.options;i.showLink||(i.elements.link="",i.elements.messagelink=i.elements.message),Object.keys(i.elements).forEach(function(n){e[n]=t.interpolateString(i.elements[n],function(e){var t=i.content[e];return e&&"string"==typeof t&&t.length?t:""})});var n=i.compliance[i.type];n||(n=i.compliance.info),e.compliance=t.interpolateString(n,function(t){return e[t]});var o=i.layouts[i.layout];return o||(o=i.layouts.basic),t.interpolateString(o,function(t){return e[t]})}
function u(i){var n=this.options,o=document.createElement("div"),s=n.container&&1===n.container.nodeType?n.container:document.body;o.innerHTML=i;var r=o.children[0];return r.style.display="none",t.hasClass(r,"cc-window")&&e.hasTransition&&t.addClass(r,"cc-invisible"),this.onButtonClick=h.bind(this),r.addEventListener("click",this.onButtonClick),n.autoAttach&&(s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r)),r}
function h(n){var o=t.traverseDOMPath(n.target,"cc-btn")||n.target;if(t.hasClass(o,"cc-btn")){var s=o.className.match(new RegExp("\\bcc-("+i.join("|")+")\\b")),r=s&&s[1]||!1;r&&(this.setStatus(r),this.close(!0))}
t.hasClass(o,"cc-close")&&(this.setStatus(e.status.dismiss),this.close(!0)),t.hasClass(o,"cc-revoke")&&this.revokeChoice()}
function p(e){var i=t.hash(JSON.stringify(e)),n="cc-color-override-"+i,o=t.isPlainObject(e);return this.customStyleSelector=o?n:null,o&&d(i,e,"."+n),o}
function d(i,n,o){if(e.customStyles[i])return void ++e.customStyles[i].references;var s={},r=n.popup,a=n.button,c=n.highlight;r&&(r.text=r.text?r.text:t.getContrast(r.background),r.link=r.link?r.link:r.text,s[o+".cc-window"]=["color: "+r.text,"background-color: "+r.background],s[o+".cc-revoke"]=["color: "+r.text,"background-color: "+r.background],s[o+" .cc-link,"+o+" .cc-link:active,"+o+" .cc-link:visited"]=["color: "+r.link],a&&(a.text=a.text?a.text:t.getContrast(a.background),a.border=a.border?a.border:"transparent",s[o+" .cc-btn"]=["color: "+a.text,"border-color: "+a.border,"background-color: "+a.background],a.padding&&s[o+" .cc-btn"].push("padding: "+a.padding),"transparent"!=a.background&&(s[o+" .cc-btn:hover, "+o+" .cc-btn:focus"]=["background-color: "+(a.hover||v(a.background))]),c?(c.text=c.text?c.text:t.getContrast(c.background),c.border=c.border?c.border:"transparent",s[o+" .cc-highlight .cc-btn:first-child"]=["color: "+c.text,"border-color: "+c.border,"background-color: "+c.background]):s[o+" .cc-highlight .cc-btn:first-child"]=["color: "+r.text]));var l=document.createElement("style");document.head.appendChild(l),e.customStyles[i]={references:1,element:l.sheet};var u=-1;for(var h in s)s.hasOwnProperty(h)&&l.sheet.insertRule(h+"{"+s[h].join(";")+"}",++u)}
function v(e){return e=t.normaliseHex(e),"000000"==e?"#222":t.getLuminance(e)}
function f(i){if(t.isPlainObject(i)){var n=t.hash(JSON.stringify(i)),o=e.customStyles[n];if(o&&!--o.references){var s=o.element.ownerNode;s&&s.parentNode&&s.parentNode.removeChild(s),e.customStyles[n]=null}}}
function m(e,t){for(var i=0,n=e.length;i<n;++i){var o=e[i];if(o instanceof RegExp&&o.test(t)||"string"==typeof o&&o.length&&o===t)return!0}
return!1}
function b(){var i=this.setStatus.bind(this),n=this.close.bind(this),o=this.options.dismissOnTimeout;"number"==typeof o&&o>=0&&(this.dismissTimeout=window.setTimeout(function(){i(e.status.dismiss),n(!0)},Math.floor(o)));var s=this.options.dismissOnScroll;if("number"==typeof s&&s>=0){var r=function(t){window.pageYOffset>Math.floor(s)&&(i(e.status.dismiss),n(!0),window.removeEventListener("scroll",r),this.onWindowScroll=null)};this.options.enabled&&(this.onWindowScroll=r,window.addEventListener("scroll",r))}
var a=this.options.dismissOnWindowClick,c=this.options.ignoreClicksFrom;if(a){var l=function(o){for(var s=!1,r=o.path.length,a=c.length,u=0;u<r;u++)if(!s)for(var h=0;h<a;h++)s||(s=t.hasClass(o.path[u],c[h]));s||(i(e.status.dismiss),n(!0),window.removeEventListener("click",l),this.onWindowClick=null)}.bind(this);this.options.enabled&&(this.onWindowClick=l,window.addEventListener("click",l))}}
function g(){if("info"!=this.options.type&&(this.options.revokable=!0),t.isMobile()&&(this.options.animateRevokable=!1),this.options.revokable){var e=a.call(this);this.options.animateRevokable&&e.push("cc-animate"),this.customStyleSelector&&e.push(this.customStyleSelector);var i=this.options.revokeBtn.replace("{{classes}}",e.join(" ")).replace("{{policy}}",this.options.content.policy);this.revokeBtn=u.call(this,i);var n=this.revokeBtn;if(this.options.animateRevokable){var o=t.throttle(function(e){var i=!1,o=20,s=window.innerHeight-20;t.hasClass(n,"cc-top")&&e.clientY<o&&(i=!0),t.hasClass(n,"cc-bottom")&&e.clientY>s&&(i=!0),i?t.hasClass(n,"cc-active")||t.addClass(n,"cc-active"):t.hasClass(n,"cc-active")&&t.removeClass(n,"cc-active")},200);this.onMouseMove=o,window.addEventListener("mousemove",o)}}}
/*var y={
	enabled:!0,
	container:null,
	cookie:{name:"cookieconsent_status",
	path:"/",
	domain:"",
	expiryDays:365,
	secure:!1
},
onPopupOpen:function(){},
onPopupClose:function(){},
onInitialise:function(e){},
onStatusChange:function(e,t){},
onRevokeChoice:function(){},
onNoCookieLaw:function(e,t){},
content:{header:"Cookies used on the website!",
message:"This website uses cookies to ensure you get the best experience on our website.",
dismiss:"Got it!",
allow:"Allow cookies",
deny:"Decline",
link:"Learn more",
href:"https://cookiesandyou.com",
close:"&#x274c;",
target:"_blank",
policy:"Cookie Policy"},
elements:{
	header:'<span class="cc-header">{{header}}</span>&nbsp;',
	message:'<span id="cookieconsent:desc" class="cc-message">{{message}}</span>',
	messagelink:'<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" rel="noopener noreferrer nofollow" target="{{target}}">{{link}}</a></span>',
	dismiss:'<a aria-label="dismiss cookie message" role=button tabindex="0" class="cc-btn cc-dismiss">{{dismiss}}</a>',
	allow:'<a aria-label="allow cookies" role=button tabindex="0"  class="cc-btn cc-allow">{{allow}}</a>',
	deny:'<a aria-label="deny cookies" role=button tabindex="0" class="cc-btn cc-deny">{{deny}}</a>',
	link:'<a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" rel="noopener noreferrer nofollow" target="{{target}}">{{link}}</a>',
	close:'<span aria-label="dismiss cookie message" role=button tabindex="0" class="cc-close">{{close}}</span>'},
	window:'<div role="dialog" aria-live="polite" aria-label="cookieconsent" aria-describedby="cookieconsent:desc" class="cc-window {{classes}}"><!--googleoff: all-->{{children}}<!--googleon: all--></div>',
	revokeBtn:'<div class="cc-revoke {{classes}}">{{policy}}</div>',
	compliance:{info:'<div class="cc-compliance">{{dismiss}}</div>',
	"opt-in":'<div class="cc-compliance cc-highlight">{{deny}}{{allow}}</div>',"opt-out":'<div class="cc-compliance cc-highlight">{{deny}}{{allow}}</div>'},
	type:"info",
	layouts:{basic:"{{messagelink}}{{compliance}}","basic-close":"{{messagelink}}{{compliance}}{{close}}","basic-header":"{{header}}{{message}}{{link}}{{compliance}}"},
	layout:"basic",
	position:"bottom",
	theme:"block","static":!1,
	palette:null,
	revokable:!1,
	animateRevokable:!0,
	showLink:!0,
	dismissOnScroll:!1,
	dismissOnTimeout:!1,
	dismissOnWindowClick:!1,
	ignoreClicksFrom:["cc-revoke","cc-btn"],
	autoOpen:!0,
	autoAttach:!0,
	whitelistPage:[],
	blacklistPage:[],
	overrideHTML:null};*/return n.prototype.initialise=function(e){this.options&&this.destroy(),t.deepExtend(this.options={},y),t.isPlainObject(e)&&t.deepExtend(this.options,e),r.call(this)&&(this.options.enabled=!1),m(this.options.blacklistPage,location.pathname)&&(this.options.enabled=!1),m(this.options.whitelistPage,location.pathname)&&(this.options.enabled=!0);var i=this.options.window.replace("{{classes}}",c.call(this).join(" ")).replace("{{children}}",l.call(this)),n=this.options.overrideHTML;if("string"==typeof n&&n.length&&(i=n),this.options["static"]){var o=u.call(this,'<div class="cc-grower">'+i+"</div>");o.style.display="",this.element=o.firstChild,this.element.style.display="none",t.addClass(this.element,"cc-invisible")}else this.element=u.call(this,i);b.call(this),g.call(this),this.options.autoOpen&&this.autoOpen()},n.prototype.destroy=function(){this.onButtonClick&&this.element&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null),this.dismissTimeout&&(clearTimeout(this.dismissTimeout),this.dismissTimeout=null),this.onWindowScroll&&(window.removeEventListener("scroll",this.onWindowScroll),this.onWindowScroll=null),this.onWindowClick&&(window.removeEventListener("click",this.onWindowClick),this.onWindowClick=null),this.onMouseMove&&(window.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=null),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.revokeBtn&&this.revokeBtn.parentNode&&this.revokeBtn.parentNode.removeChild(this.revokeBtn),this.revokeBtn=null,f(this.options.palette),this.options=null},n.prototype.open=function(t){if(this.element)return this.isOpen()||(e.hasTransition?this.fadeIn():this.element.style.display="",this.options.revokable&&this.toggleRevokeButton(),this.options.onPopupOpen.call(this)),this},n.prototype.close=function(t){if(this.element)return this.isOpen()&&(e.hasTransition?this.fadeOut():this.element.style.display="none",t&&this.options.revokable&&this.toggleRevokeButton(!0),this.options.onPopupClose.call(this)),this},n.prototype.fadeIn=function(){var i=this.element;if(e.hasTransition&&i&&(this.afterTransition&&s.call(this,i),t.hasClass(i,"cc-invisible"))){if(i.style.display="",this.options["static"]){var n=this.element.clientHeight;this.element.parentNode.style.maxHeight=n+"px"}
var r=20;this.openingTimeout=setTimeout(o.bind(this,i),r)}},n.prototype.fadeOut=function(){var i=this.element;e.hasTransition&&i&&(this.openingTimeout&&(clearTimeout(this.openingTimeout),o.bind(this,i)),t.hasClass(i,"cc-invisible")||(this.options["static"]&&(this.element.parentNode.style.maxHeight=""),this.afterTransition=s.bind(this,i),i.addEventListener(e.transitionEnd,this.afterTransition),t.addClass(i,"cc-invisible")))},n.prototype.isOpen=function(){return this.element&&""==this.element.style.display&&(!e.hasTransition||!t.hasClass(this.element,"cc-invisible"))},n.prototype.toggleRevokeButton=function(e){this.revokeBtn&&(this.revokeBtn.style.display=e?"":"none")},n.prototype.revokeChoice=function(e){this.options.enabled=!0,this.clearStatus(),this.options.onRevokeChoice.call(this),e||this.autoOpen()},n.prototype.hasAnswered=function(t){return Object.keys(e.status).indexOf(this.getStatus())>=0},n.prototype.hasConsented=function(t){var i=this.getStatus();return i==e.status.allow||i==e.status.dismiss},n.prototype.autoOpen=function(e){!this.hasAnswered()&&this.options.enabled?this.open():this.hasAnswered()&&this.options.revokable&&this.toggleRevokeButton(!0)},n.prototype.setStatus=function(i){var n=this.options.cookie,o=t.getCookie(n.name),s=Object.keys(e.status).indexOf(o)>=0;Object.keys(e.status).indexOf(i)>=0?(t.setCookie(n.name,i,n.expiryDays,n.domain,n.path,n.secure),this.options.onStatusChange.call(this,i,s)):this.clearStatus()},n.prototype.getStatus=function(){return t.getCookie(this.options.cookie.name)},n.prototype.clearStatus=function(){var e=this.options.cookie;t.setCookie(e.name,"",-1,e.domain,e.path)},n}(),e.Location=function(){function e(e){t.deepExtend(this.options={},s),t.isPlainObject(e)&&t.deepExtend(this.options,e),this.currentServiceIndex=-1}
function i(e,t,i){var n,o=document.createElement("script");o.type="text/"+(e.type||"javascript"),o.src=e.src||e,o.async=!1,o.onreadystatechange=o.onload=function(){var e=o.readyState;clearTimeout(n),t.done||e&&!/loaded|complete/.test(e)||(t.done=!0,t(),o.onreadystatechange=o.onload=null)},document.body.appendChild(o),n=setTimeout(function(){t.done=!0,t(),o.onreadystatechange=o.onload=null},i)}
function n(e,t,i,n,o){var s=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");if(s.open(n?"POST":"GET",e,1),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Array.isArray(o))for(var r=0,a=o.length;r<a;++r){var c=o[r].split(":",2);s.setRequestHeader(c[0].replace(/^\s+|\s+$/g,""),c[1].replace(/^\s+|\s+$/g,""))}
"function"==typeof t&&(s.onreadystatechange=function(){s.readyState>3&&t(s)}),s.send(n)}
function o(e){return new Error("Error ["+(e.code||"UNKNOWN")+"]: "+e.error)}
var s={timeout:5e3,services:["ipinfo"],serviceDefinitions:{ipinfo:function(){return{url:"//ipinfo.io",headers:["Accept: application/json"],callback:function(e,t){try{var i=JSON.parse(t);return i.error?o(i):{code:i.country}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},ipinfodb:function(e){return{url:"//api.ipinfodb.com/v3/ip-country/?key={api_key}&format=json&callback={callback}",isScript:!0,callback:function(e,t){try{var i=JSON.parse(t);return"ERROR"==i.statusCode?o({error:i.statusMessage}):{code:i.countryCode}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},maxmind:function(){return{url:"//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js",isScript:!0,callback:function(e){return window.geoip2?void geoip2.country(function(t){try{e({code:t.country.iso_code})}catch(i){e(o(i))}},function(t){e(o(t))}):void e(new Error("Unexpected response format. The downloaded script should have exported `geoip2` to the global scope"))}}}}};return e.prototype.getNextService=function(){var e;do e=this.getServiceByIdx(++this.currentServiceIndex);while(this.currentServiceIndex<this.options.services.length&&!e);return e},e.prototype.getServiceByIdx=function(e){var i=this.options.services[e];if("function"==typeof i){var n=i();return n.name&&t.deepExtend(n,this.options.serviceDefinitions[n.name](n)),n}
return"string"==typeof i?this.options.serviceDefinitions[i]():t.isPlainObject(i)?this.options.serviceDefinitions[i.name](i):null},e.prototype.locate=function(e,t){var i=this.getNextService();return i?(this.callbackComplete=e,this.callbackError=t,void this.runService(i,this.runNextServiceOnError.bind(this))):void t(new Error("No services to run"))},e.prototype.setupUrl=function(e){var t=this.getCurrentServiceOpts();return e.url.replace(/\{(.*?)\}/g,function(i,n){if("callback"===n){var o="callback"+Date.now();return window[o]=function(t){e.__JSONP_DATA=JSON.stringify(t)},o}
if(n in t.interpolateUrl)return t.interpolateUrl[n]})},e.prototype.runService=function(e,t){var o=this;if(e&&e.url&&e.callback){var s=e.isScript?i:n,r=this.setupUrl(e);s(r,function(i){var n=i?i.responseText:"";e.__JSONP_DATA&&(n=e.__JSONP_DATA,delete e.__JSONP_DATA),o.runServiceCallback.call(o,t,e,n)},this.options.timeout,e.data,e.headers)}},e.prototype.runServiceCallback=function(e,t,i){var n=this,o=function(t){s||n.onServiceResult.call(n,e,t)},s=t.callback(o,i);s&&this.onServiceResult.call(this,e,s)},e.prototype.onServiceResult=function(e,t){t instanceof Error||t&&t.error?e.call(this,t,null):e.call(this,null,t)},e.prototype.runNextServiceOnError=function(e,t){if(e){this.logError(e);var i=this.getNextService();i?this.runService(i,this.runNextServiceOnError.bind(this)):this.completeService.call(this,this.callbackError,new Error("All services failed"))}else this.completeService.call(this,this.callbackComplete,t)},e.prototype.getCurrentServiceOpts=function(){var e=this.options.services[this.currentServiceIndex];return"string"==typeof e?{name:e}:"function"==typeof e?e():t.isPlainObject(e)?e:{}},e.prototype.completeService=function(e,t){this.currentServiceIndex=-1,e&&e(t)},e.prototype.logError=function(e){var t=this.currentServiceIndex,i=this.getServiceByIdx(t);console.warn("The service["+t+"] ("+i.url+") responded with the following error",e)},e}(),e.Law=function(){function e(e){this.initialise.apply(this,arguments)}
var i={regionalLaw:!0,hasLaw:["AT","BE","BG","HR","CZ","CY","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","SK","ES","SE","GB","UK","GR","EU"],revokable:["HR","CY","DK","EE","FR","DE","LV","LT","NL","PT","ES"],explicitAction:["HR","IT","ES"]};return e.prototype.initialise=function(e){t.deepExtend(this.options={},i),t.isPlainObject(e)&&t.deepExtend(this.options,e)},e.prototype.get=function(e){var t=this.options;return{hasLaw:t.hasLaw.indexOf(e)>=0,revokable:t.revokable.indexOf(e)>=0,explicitAction:t.explicitAction.indexOf(e)>=0}},e.prototype.applyLaw=function(e,t){var i=this.get(t);return i.hasLaw||(e.enabled=!1,"function"==typeof e.onNoCookieLaw&&e.onNoCookieLaw(t,i)),this.options.regionalLaw&&(i.revokable&&(e.revokable=!0),i.explicitAction&&(e.dismissOnScroll=!1,e.dismissOnTimeout=!1)),e},e}(),e.initialise=function(i,n,o){var s=new e.Law(i.law);n||(n=function(){}),o||(o=function(){});var r=Object.keys(e.status),a=t.getCookie("cookieconsent_status"),c=r.indexOf(a)>=0;return c?void n(new e.Popup(i)):void e.getCountryCode(i,function(t){delete i.law,delete i.location,t.code&&(i=s.applyLaw(i,t.code)),n(new e.Popup(i))},function(t){delete i.law,delete i.location,o(t,new e.Popup(i))})},e.getCountryCode=function(t,i,n){if(t.law&&t.law.countryCode)return void i({code:t.law.countryCode});if(t.location){var o=new e.Location(t.location);return void o.locate(function(e){i(e||{})},n)}
i({})},e.utils=t,e.hasInitialised=!0,window.cookieconsent=e}}(window.cookieconsent||{});if(!document.body.className.match("single-ar2017")){window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#82786e"},"button":{"background":"#5daee1","text":"#ffffff"}},"content":{"dismiss":"OK","href":"/privacy-policy/",}})})};

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/kaf/js/lazyload.min.js */
try{
/*! Lazy Load 2.0.0-beta.2 - MIT license - Copyright 2007-2017 Mika Tuupola https://github.com/tuupola/jquery_lazyload */
!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define([],e(t)):t.LazyLoad=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";function e(t,e){this.settings=r(s,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}var s={src:"data-src",srcset:"data-srcset",selector:".lazyload"},r=function(){var t={},e=!1,s=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],s++);for(;s<o;s++)!function(s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e&&"[object Object]"===Object.prototype.toString.call(s[o])?t[o]=r(!0,t[o],s[o]):t[o]=s[o])}(arguments[s]);return t};if(e.prototype={init:function(){if(!t.IntersectionObserver)return void this.loadImages();var e=this,s={root:null,rootMargin:"0px",threshold:[0]};this.observer=new IntersectionObserver(function(t){t.forEach(function(t){if(t.intersectionRatio>0){e.observer.unobserve(t.target);var s=t.target.getAttribute(e.settings.src),r=t.target.getAttribute(e.settings.srcset);"img"===t.target.tagName.toLowerCase()?(s&&(t.target.src=s),r&&(t.target.srcset=r)):t.target.style.backgroundImage="url("+s+")"}})},s),this.images.forEach(function(t){e.observer.observe(t)})},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(!this.settings)return;var t=this;this.images.forEach(function(e){var s=e.getAttribute(t.settings.src),r=e.getAttribute(t.settings.srcset);"img"===e.tagName.toLowerCase()?(s&&(e.src=s),r&&(e.srcset=r)):e.style.backgroundImage="url("+s+")"})},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},t.lazyload=function(t,s){return new e(t,s)},t.jQuery){var s=t.jQuery;s.fn.lazyload=function(t){return t=t||{},t.attribute=t.attribute||"data-src",new e(s.makeArray(this),t),this}}return e});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/kaf/ext/lightbox2/js/lightbox.js */
try{
/*!
 * Lightbox v2.10.0
 * by Lokesh Dhakar
 *
 * More info:
 * https://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2018 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 *
 * @preserve
 */
(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof exports==='object'){module.exports=factory(require('jquery'))}else{root.lightbox=factory(root.jQuery)}}(this,function($){function Lightbox(options){this.album=[];this.currentImageIndex=void 0;this.init();this.options=$.extend({},this.constructor.defaults);this.option(options)}
Lightbox.defaults={albumLabel:'Image %1 of %2',alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1};Lightbox.prototype.option=function(options){$.extend(this.options,options)};Lightbox.prototype.imageCountLabel=function(currentImageNum,totalImages){return this.options.albumLabel.replace(/%1/g,currentImageNum).replace(/%2/g,totalImages)};Lightbox.prototype.init=function(){var self=this;$(document).ready(function(){self.enable();self.build()})};Lightbox.prototype.enable=function(){var self=this;$('body').on('click','a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox], [data-rel="fancybox"]',function(event){event.preventDefault();self.start($(event.currentTarget));return!1})};Lightbox.prototype.build=function(){if($('#lightbox').length>0){return}
var self=this;$('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo($('body'));this.$lightbox=$('#lightbox');this.$overlay=$('#lightboxOverlay');this.$outerContainer=this.$lightbox.find('.lb-outerContainer');this.$container=this.$lightbox.find('.lb-container');this.$image=this.$lightbox.find('.lb-image');this.$nav=this.$lightbox.find('.lb-nav');this.containerPadding={top:parseInt(this.$container.css('padding-top'),10),right:parseInt(this.$container.css('padding-right'),10),bottom:parseInt(this.$container.css('padding-bottom'),10),left:parseInt(this.$container.css('padding-left'),10)};this.imageBorderWidth={top:parseInt(this.$image.css('border-top-width'),10),right:parseInt(this.$image.css('border-right-width'),10),bottom:parseInt(this.$image.css('border-bottom-width'),10),left:parseInt(this.$image.css('border-left-width'),10)};this.$overlay.hide().on('click',function(){self.end();return!1});this.$lightbox.hide().on('click',function(event){if($(event.target).attr('id')==='lightbox'){self.end()}
return!1});this.$outerContainer.on('click',function(event){if($(event.target).attr('id')==='lightbox'){self.end()}
return!1});this.$lightbox.find('.lb-prev').on('click',function(){if(self.currentImageIndex===0){self.changeImage(self.album.length-1)}else{self.changeImage(self.currentImageIndex-1)}
return!1});this.$lightbox.find('.lb-next').on('click',function(){if(self.currentImageIndex===self.album.length-1){self.changeImage(0)}else{self.changeImage(self.currentImageIndex+1)}
return!1});this.$nav.on('mousedown',function(event){if(event.which===3){self.$nav.css('pointer-events','none');self.$lightbox.one('contextmenu',function(){setTimeout(function(){this.$nav.css('pointer-events','auto')}.bind(self),0)})}});this.$lightbox.find('.lb-loader, .lb-close').on('click',function(){self.end();return!1})};Lightbox.prototype.start=function($link){var self=this;var $window=$(window);$window.on('resize',$.proxy(this.sizeOverlay,this));$('select, object, embed').css({visibility:'hidden'});this.sizeOverlay();this.album=[];var imageNumber=0;function addToAlbum($link){self.album.push({alt:$link.attr('data-alt'),link:$link.attr('href'),title:$link.attr('data-title')||$link.attr('title')})}
var dataLightboxValue=$link.attr('data-lightbox')||$link.attr('data-fancybox-group');var $links;if(dataLightboxValue){$links=$($link.prop('tagName')+'[data-lightbox="'+dataLightboxValue+'"]');if($links.length<1)$links=$($link.prop('tagName')+'[data-fancybox-group="'+dataLightboxValue+'"]');for(var i=0;i<$links.length;i=++i){addToAlbum($($links[i]));if($links[i]===$link[0]){imageNumber=i}}}else{if($link.attr('rel')==='lightbox'){addToAlbum($link)}else{$links=$($link.prop('tagName')+'[rel="'+$link.attr('rel')+'"]');for(var j=0;j<$links.length;j=++j){addToAlbum($($links[j]));if($links[j]===$link[0]){imageNumber=j}}}}
var top=$window.scrollTop()+this.options.positionFromTop;var left=$window.scrollLeft();this.$lightbox.css({top:top+'px',left:left+'px'}).fadeIn(this.options.fadeDuration);if(this.options.disableScrolling){$('html').addClass('lb-disable-scrolling')}
this.changeImage(imageNumber)};Lightbox.prototype.changeImage=function(imageNumber){var self=this;this.disableKeyboardNav();var $image=this.$lightbox.find('.lb-image');this.$overlay.fadeIn(this.options.fadeDuration);$('.lb-loader').fadeIn('slow');this.$lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').css('opacity',0);this.$outerContainer.addClass('animating');var preloader=new Image();preloader.onload=function(){var $preloader;var imageHeight;var imageWidth;var maxImageHeight;var maxImageWidth;var windowHeight;var windowWidth;$image.attr({'alt':self.album[imageNumber].alt,'src':self.album[imageNumber].link});$preloader=$(preloader);$image.width(preloader.width);$image.height(preloader.height);if(self.options.fitImagesInViewport){windowWidth=$(window).width();windowHeight=$(window).height();maxImageWidth=windowWidth-self.containerPadding.left-self.containerPadding.right-self.imageBorderWidth.left-self.imageBorderWidth.right-20;maxImageHeight=windowHeight-self.containerPadding.top-self.containerPadding.bottom-self.imageBorderWidth.top-self.imageBorderWidth.bottom-120;if(self.options.maxWidth&&self.options.maxWidth<maxImageWidth){maxImageWidth=self.options.maxWidth}
if(self.options.maxHeight&&self.options.maxHeight<maxImageWidth){maxImageHeight=self.options.maxHeight}
if((preloader.width>maxImageWidth)||(preloader.height>maxImageHeight)){if((preloader.width/maxImageWidth)>(preloader.height/maxImageHeight)){imageWidth=maxImageWidth;imageHeight=parseInt(preloader.height/(preloader.width/imageWidth),10);$image.width(imageWidth);$image.height(imageHeight)}else{imageHeight=maxImageHeight;imageWidth=parseInt(preloader.width/(preloader.height/imageHeight),10);$image.width(imageWidth);$image.height(imageHeight)}}}
self.sizeContainer($image.width(),$image.height())};console.log(this.album);preloader.src=this.album[imageNumber].link;this.currentImageIndex=imageNumber};Lightbox.prototype.sizeOverlay=function(){this.$overlay.width($(document).width()).height($(document).height())};Lightbox.prototype.sizeContainer=function(imageWidth,imageHeight){var self=this;var oldWidth=this.$outerContainer.outerWidth();var oldHeight=this.$outerContainer.outerHeight();var newWidth=imageWidth+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right;var newHeight=imageHeight+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function postResize(){self.$lightbox.find('.lb-dataContainer').width(newWidth);self.$lightbox.find('.lb-prevLink').height(newHeight);self.$lightbox.find('.lb-nextLink').height(newHeight);self.showImage()}
if(oldWidth!==newWidth||oldHeight!==newHeight){this.$outerContainer.animate({width:newWidth,height:newHeight},this.options.resizeDuration,'swing',function(){postResize()})}else{postResize()}};Lightbox.prototype.showImage=function(){this.$lightbox.find('.lb-loader').stop(!0).hide();this.$lightbox.find('.lb-image').animate({'opacity':1},this.options.imageFadeDuration);this.updateNav();this.updateDetails();this.preloadNeighboringImages();this.enableKeyboardNav()};Lightbox.prototype.updateNav=function(){var alwaysShowNav=!0;try{document.createEvent('TouchEvent');alwaysShowNav=(this.options.alwaysShowNavOnTouchDevices)?!0:!1}catch(e){}
alwaysShowNav=!0;this.$lightbox.find('.lb-nav').show();this.$lightbox.find('.lb-nav').animate({'opacity':1});if(this.album.length>1){if(this.options.wrapAround){if(alwaysShowNav){this.$lightbox.find('.lb-prev, .lb-next').css('opacity','1')}
this.$lightbox.find('.lb-prev, .lb-next').animate({'opacity':1})}else{if(this.currentImageIndex>0){this.$lightbox.find('.lb-prev').animate({'opacity':1});if(alwaysShowNav){this.$lightbox.find('.lb-prev').css('opacity','1')}}
if(this.currentImageIndex<this.album.length-1){this.$lightbox.find('.lb-next').animate({'opacity':1});if(alwaysShowNav){this.$lightbox.find('.lb-next').css('opacity','1')}}}}};Lightbox.prototype.updateDetails=function(){var self=this;if(typeof this.album[this.currentImageIndex].title!=='undefined'&&this.album[this.currentImageIndex].title!==''){var $caption=this.$lightbox.find('.lb-caption');if(this.options.sanitizeTitle){$caption.text(this.album[this.currentImageIndex].title)}else{$caption.html(this.album[this.currentImageIndex].title)}
$caption.animate({'opacity':1}).find('a').on('click',function(event){if($(this).attr('target')!==undefined){window.open($(this).attr('href'),$(this).attr('target'))}else{location.href=$(this).attr('href')}})}
if(this.album.length>1&&this.options.showImageNumberLabel){var labelText=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find('.lb-number').text(labelText).fadeIn('fast')}else{this.$lightbox.find('.lb-number').hide()}
this.$outerContainer.removeClass('animating');this.$lightbox.find('.lb-dataContainer').animate({'opacity':1},function(){return self.sizeOverlay()})};Lightbox.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var preloadNext=new Image();preloadNext.src=this.album[this.currentImageIndex+1].link}
if(this.currentImageIndex>0){var preloadPrev=new Image();preloadPrev.src=this.album[this.currentImageIndex-1].link}};Lightbox.prototype.enableKeyboardNav=function(){$(document).on('keyup.keyboard',$.proxy(this.keyboardAction,this))};Lightbox.prototype.disableKeyboardNav=function(){$(document).off('.keyboard')};Lightbox.prototype.keyboardAction=function(event){var KEYCODE_ESC=27;var KEYCODE_LEFTARROW=37;var KEYCODE_RIGHTARROW=39;var keycode=event.keyCode;var key=String.fromCharCode(keycode).toLowerCase();if(keycode===KEYCODE_ESC||key.match(/x|o|c/)){this.end()}else if(key==='p'||keycode===KEYCODE_LEFTARROW){if(this.currentImageIndex!==0){this.changeImage(this.currentImageIndex-1)}else if(this.options.wrapAround&&this.album.length>1){this.changeImage(this.album.length-1)}}else if(key==='n'||keycode===KEYCODE_RIGHTARROW){if(this.currentImageIndex!==this.album.length-1){this.changeImage(this.currentImageIndex+1)}else if(this.options.wrapAround&&this.album.length>1){this.changeImage(0)}}};Lightbox.prototype.end=function(){this.disableKeyboardNav();$(window).off('resize',this.sizeOverlay);this.$lightbox.fadeOut(this.options.fadeDuration);this.$overlay.fadeOut(this.options.fadeDuration);$('select, object, embed').css({visibility:'visible'});if(this.options.disableScrolling){$('html').removeClass('lb-disable-scrolling')}};return new Lightbox()}));

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/kaf/ext/images-loaded/imagesloaded.pkgd.min.js */
try{
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/wp/wp-includes/js/jquery/ui/core.min.js */
try{
/*!
 * jQuery UI Core 1.11.4
 * https://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 *
 * https://api.jqueryui.com/category/ui-core/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(a){var e,t,n,i;function r(e,t){var n,i,r,o=e.nodeName.toLowerCase();return"area"===o?(i=(n=e.parentNode).name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(r=a("img[usemap='#"+i+"']")[0])&&s(r))):(/^(input|select|textarea|button|object)$/.test(o)?!e.disabled:"a"===o&&e.href||t)&&s(e)}function s(e){return a.expr.filters.visible(e)&&!a(e).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,i=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=a(this);return(!n||"static"!==e.css("position"))&&i.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&r.length?r:a(this[0].ownerDocument||document)},uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(t){return function(e){return!!a.data(e,t)}}):function(e,t,n){return!!a.data(e,n[3])},focusable:function(e){return r(e,!isNaN(a.attr(e,"tabindex")))},tabbable:function(e){var t=a.attr(e,"tabindex"),n=isNaN(t);return(n||0<=t)&&r(e,!n)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(e,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),o={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function s(e,t,n,i){return a.each(r,function(){t-=parseFloat(a.css(e,"padding"+this))||0,n&&(t-=parseFloat(a.css(e,"border"+this+"Width"))||0),i&&(t-=parseFloat(a.css(e,"margin"+this))||0)}),t}a.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){a(this).css(i,s(this,e)+"px")})},a.fn["outer"+n]=function(e,t){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){a(this).css(i,s(this,e,!0,t)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=(t=a.fn.removeData,function(e){return arguments.length?t.call(this,a.camelCase(e)):t.call(this)})),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:(i=a.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){a(e).focus(),n&&n.call(e)},t)}):i.apply(this,arguments)}),disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(n+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n,i=a(this[0]);i.length&&i[0]!==document;){if(("absolute"===(t=i.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0}}),a.ui.plugin={add:function(e,t,n){var i,r=a.ui[e].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([t,n[i]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/wp/wp-includes/js/jquery/ui/widget.min.js */
try{
/*!
 * jQuery UI Widget 1.11.4
 * https://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 *
 * https://api.jqueryui.com/jQuery.widget/
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(h){var s,i=0,a=Array.prototype.slice;return h.cleanData=(s=h.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=h._data(i,"events"))&&e.remove&&h(i).triggerHandler("remove")}catch(t){}s(t)}),h.widget=function(t,i,e){var n,s,o,r,a={},u=t.split(".")[0];return t=t.split(".")[1],n=u+"-"+t,e||(e=i,i=h.Widget),h.expr[":"][n.toLowerCase()]=function(t){return!!h.data(t,n)},h[u]=h[u]||{},s=h[u][t],o=h[u][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},h.extend(o,s,{version:e.version,_proto:h.extend({},e),_childConstructors:[]}),(r=new i).options=h.widget.extend({},r.options),h.each(e,function(e,n){function s(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}h.isFunction(n)?a[e]=function(){var t,e=this._super,i=this._superApply;return this._super=s,this._superApply=o,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}:a[e]=n}),o.prototype=h.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||t},a,{constructor:o,namespace:u,widgetName:t,widgetFullName:n}),s?(h.each(s._childConstructors,function(t,e){var i=e.prototype;h.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete s._childConstructors):i._childConstructors.push(o),h.widget.bridge(t,o),o},h.widget.extend=function(t){for(var e,i,n=a.call(arguments,1),s=0,o=n.length;s<o;s++)for(e in n[s])i=n[s][e],n[s].hasOwnProperty(e)&&void 0!==i&&(h.isPlainObject(i)?t[e]=h.isPlainObject(t[e])?h.widget.extend({},t[e],i):h.widget.extend({},i):t[e]=i);return t},h.widget.bridge=function(o,e){var r=e.prototype.widgetFullName||o;h.fn[o]=function(i){var t="string"==typeof i,n=a.call(arguments,1),s=this;return t?this.each(function(){var t,e=h.data(this,r);return"instance"===i?(s=e,!1):e?h.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(s=t&&t.jquery?s.pushStack(t.get()):t,!1):void 0:h.error("no such method '"+i+"' for "+o+" widget instance"):h.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):(n.length&&(i=h.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=h.data(this,r);t?(t.option(i||{}),t._init&&t._init()):h.data(this,r,new e(i,this))})),s}},h.Widget=function(){},h.Widget._childConstructors=[],h.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=h(e||this.defaultElement||this)[0],this.element=h(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=h(),this.hoverable=h(),this.focusable=h(),e!==this&&(h.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=h(e.style?e.ownerDocument:e.document||e),this.window=h(this.document[0].defaultView||this.document[0].parentWindow)),this.options=h.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:h.noop,_getCreateEventData:h.noop,_create:h.noop,_init:h.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(h.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:h.noop,widget:function(){return this.element},option:function(t,e){var i,n,s,o=t;if(0===arguments.length)return h.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(n=o[t]=h.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)n[i[s]]=n[i[s]]||{},n=n[i[s]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(r,a,t){var u,d=this;"boolean"!=typeof r&&(t=a,a=r,r=!1),t?(a=u=h(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,u=this.widget()),h.each(t,function(t,e){function i(){if(r||!0!==d.options.disabled&&!h(this).hasClass("ui-state-disabled"))return("string"==typeof e?d[e]:e).apply(d,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||h.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),s=n[1]+d.eventNamespace,o=n[2];o?u.delegate(o,s,i):a.bind(s,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=h(this.bindings.not(t).get()),this.focusable=h(this.focusable.not(t).get()),this.hoverable=h(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){h(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){h(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){h(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){h(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,i){var n,s,o=this.options[t];if(i=i||{},(e=h.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],s=e.originalEvent)for(n in s)n in e||(e[n]=s[n]);return this.element.trigger(e,i),!(h.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},h.each({show:"fadeIn",hide:"fadeOut"},function(o,r){h.Widget.prototype["_"+o]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,s=t?!0===t||"number"==typeof t?r:t.effect||r:o;"number"==typeof(t=t||{})&&(t={duration:t}),n=!h.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&h.effects&&h.effects.effect[s]?e[o](t):s!==o&&e[s]?e[s](t.duration,t.easing,i):e.queue(function(t){h(this)[o](),i&&i.call(e[0]),t()})}}),h.widget});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/wp/wp-includes/js/jquery/ui/position.min.js */
try{
/*!
 * jQuery UI Position 1.11.4
 * https://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 *
 * https://api.jqueryui.com/position/
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(I){return function(){I.ui=I.ui||{};var n,H,x=Math.max,T=Math.abs,L=Math.round,o=/left|center|right/,l=/top|center|bottom/,f=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,h=/%$/,i=I.fn.position;function P(t,i,e){return[parseFloat(t[0])*(h.test(t[0])?i/100:1),parseFloat(t[1])*(h.test(t[1])?e/100:1)]}function D(t,i){return parseInt(I.css(t,i),10)||0}I.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,e=I("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=e.children()[0];return I("body").append(e),t=o.offsetWidth,e.css("overflow","scroll"),t===(i=o.offsetWidth)&&(i=e[0].clientWidth),e.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),e=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&t.height<t.element[0].scrollHeight?I.position.scrollbarWidth():0,height:o?I.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=I(t||window),e=I.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:e,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:e||o?i.width():i.outerWidth(),height:e||o?i.height():i.outerHeight()}}},I.fn.position=function(c){if(!c||!c.of)return i.apply(this,arguments);c=I.extend({},c);var d,a,g,u,m,t,w=I(c.of),W=I.position.getWithinInfo(c.within),v=I.position.getScrollInfo(W),y=(c.collision||"flip").split(" "),b={};return t=function(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:I.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(w),w[0].preventDefault&&(c.at="left top"),a=t.width,g=t.height,u=t.offset,m=I.extend({},u),I.each(["my","at"],function(){var t,i,e=(c[this]||"").split(" ");1===e.length&&(e=o.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",t=f.exec(e[0]),i=f.exec(e[1]),b[this]=[t?t[0]:0,i?i[0]:0],c[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===c.at[0]?m.left+=a:"center"===c.at[0]&&(m.left+=a/2),"bottom"===c.at[1]?m.top+=g:"center"===c.at[1]&&(m.top+=g/2),d=P(b.at,a,g),m.left+=d[0],m.top+=d[1],this.each(function(){var e,t,f=I(this),s=f.outerWidth(),h=f.outerHeight(),i=D(this,"marginLeft"),o=D(this,"marginTop"),n=s+i+D(this,"marginRight")+v.width,l=h+o+D(this,"marginBottom")+v.height,r=I.extend({},m),p=P(b.my,f.outerWidth(),f.outerHeight());"right"===c.my[0]?r.left-=s:"center"===c.my[0]&&(r.left-=s/2),"bottom"===c.my[1]?r.top-=h:"center"===c.my[1]&&(r.top-=h/2),r.left+=p[0],r.top+=p[1],H||(r.left=L(r.left),r.top=L(r.top)),e={marginLeft:i,marginTop:o},I.each(["left","top"],function(t,i){I.ui.position[y[t]]&&I.ui.position[y[t]][i](r,{targetWidth:a,targetHeight:g,elemWidth:s,elemHeight:h,collisionPosition:e,collisionWidth:n,collisionHeight:l,offset:[d[0]+p[0],d[1]+p[1]],my:c.my,at:c.at,within:W,elem:f})}),c.using&&(t=function(t){var i=u.left-r.left,e=i+a-s,o=u.top-r.top,n=o+g-h,l={target:{element:w,left:u.left,top:u.top,width:a,height:g},element:{element:f,left:r.left,top:r.top,width:s,height:h},horizontal:e<0?"left":0<i?"right":"center",vertical:n<0?"top":0<o?"bottom":"middle"};a<s&&T(i+e)<a&&(l.horizontal="center"),g<h&&T(o+n)<g&&(l.vertical="middle"),x(T(i),T(e))>x(T(o),T(n))?l.important="horizontal":l.important="vertical",c.using.call(this,t,l)}),f.offset(I.extend(r,{using:t}))})},I.ui.position={fit:{left:function(t,i){var e,o=i.within,n=o.isWindow?o.scrollLeft:o.offset.left,l=o.width,f=t.left-i.collisionPosition.marginLeft,s=n-f,h=f+i.collisionWidth-l-n;i.collisionWidth>l?0<s&&h<=0?(e=t.left+s+i.collisionWidth-l-n,t.left+=s-e):t.left=0<h&&s<=0?n:h<s?n+l-i.collisionWidth:n:0<s?t.left+=s:0<h?t.left-=h:t.left=x(t.left-f,t.left)},top:function(t,i){var e,o=i.within,n=o.isWindow?o.scrollTop:o.offset.top,l=i.within.height,f=t.top-i.collisionPosition.marginTop,s=n-f,h=f+i.collisionHeight-l-n;i.collisionHeight>l?0<s&&h<=0?(e=t.top+s+i.collisionHeight-l-n,t.top+=s-e):t.top=0<h&&s<=0?n:h<s?n+l-i.collisionHeight:n:0<s?t.top+=s:0<h?t.top-=h:t.top=x(t.top-f,t.top)}},flip:{left:function(t,i){var e,o,n=i.within,l=n.offset.left+n.scrollLeft,f=n.width,s=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-i.collisionPosition.marginLeft,r=h-s,p=h+i.collisionWidth-f-s,c="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,a=-2*i.offset[0];r<0?((e=t.left+c+d+a+i.collisionWidth-f-l)<0||e<T(r))&&(t.left+=c+d+a):0<p&&(0<(o=t.left-i.collisionPosition.marginLeft+c+d+a-s)||T(o)<p)&&(t.left+=c+d+a)},top:function(t,i){var e,o,n=i.within,l=n.offset.top+n.scrollTop,f=n.height,s=n.isWindow?n.scrollTop:n.offset.top,h=t.top-i.collisionPosition.marginTop,r=h-s,p=h+i.collisionHeight-f-s,c="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,d="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,a=-2*i.offset[1];r<0?((o=t.top+c+d+a+i.collisionHeight-f-l)<0||o<T(r))&&(t.top+=c+d+a):0<p&&(0<(e=t.top-i.collisionPosition.marginTop+c+d+a-s)||T(e)<p)&&(t.top+=c+d+a)}},flipfit:{left:function(){I.ui.position.flip.left.apply(this,arguments),I.ui.position.fit.left.apply(this,arguments)},top:function(){I.ui.position.flip.top.apply(this,arguments),I.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,e,o,n,l=document.getElementsByTagName("body")[0],f=document.createElement("div");for(n in t=document.createElement(l?"div":"body"),e={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&I.extend(e,{position:"absolute",left:"-1000px",top:"-1000px"}),e)t.style[n]=e[n];t.appendChild(f),(i=l||document.documentElement).insertBefore(t,i.firstChild),f.style.cssText="position: absolute; left: 10.7432222px;",o=I(f).offset().left,H=10<o&&o<11,t.innerHTML="",i.removeChild(t)}()}(),I.ui.position});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/wp/wp-includes/js/jquery/ui/tooltip.min.js */
try{
/*!
 * jQuery UI Tooltip 1.11.4
 * https://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 *
 * https://api.jqueryui.com/tooltip/
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(d){return d.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=d(this).attr("title")||"";return d("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var e=(t.attr("aria-describedby")||"").split(/\s+/);e.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",d.trim(e.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),e=(t.attr("aria-describedby")||"").split(/\s+/),o=d.inArray(i,e);-1!==o&&e.splice(o,1),t.removeData("ui-tooltip-id"),(e=d.trim(e.join(" ")))?t.attr("aria-describedby",e):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=d("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var e=this;if("disabled"===t)return this[i?"_disable":"_enable"](),void(this.options[t]=i);this._super(t,i),"content"===t&&d.each(this.tooltips,function(t,i){e._updateContent(i.element)})},_disable:function(){var o=this;d.each(this.tooltips,function(t,i){var e=d.Event("blur");e.target=e.currentTarget=i.element[0],o.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=d(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=d(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var e=this,i=d(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=d(this);i.data("ui-tooltip-open")&&((t=d.Event("blur")).target=t.currentTarget=this,e.close(t,!0)),i.attr("title")&&(i.uniqueId(),e.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(i,e){var t,o=this.options.content,n=this,s=e?e.type:null;if("string"==typeof o)return this._open(e,i,o);(t=o.call(i[0],function(t){n._delay(function(){i.data("ui-tooltip-open")&&(e&&(e.type=s),this._open(e,i,t))})}))&&this._open(e,i,t)},_open:function(t,i,e){var o,n,s,l,a=d.extend({},this.options.position);function r(t){a.of=t,n.is(":hidden")||n.position(a)}e&&((o=this._find(i))?o.tooltip.find(".ui-tooltip-content").html(e):(i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),n=o.tooltip,this._addDescribedBy(i,n.attr("id")),n.find(".ui-tooltip-content").html(e),this.liveRegion.children().hide(),e.clone?(l=e.clone()).removeAttr("id").find("[id]").removeAttr("id"):l=e,d("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:r}),r(t)):n.position(d.extend({of:i},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){n.is(":visible")&&(r(a.of),clearInterval(s))},d.fx.interval)),this._trigger("open",t,{tooltip:n})))},_registerCloseHandlers:function(t,e){var i={keyup:function(t){if(t.keyCode===d.ui.keyCode.ESCAPE){var i=d.Event(t);i.currentTarget=e[0],this.close(i,!0)}}};e[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(e).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,e,i)},close:function(t){var i,e=this,o=d(t?t.currentTarget:this.element),n=this._find(o);n?(i=n.tooltip,n.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),n.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){e._removeTooltip(d(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&d.each(this.parents,function(t,i){d(i.element).attr("title",i.title),delete e.parents[t]}),n.closing=!0,this._trigger("close",t,{tooltip:i}),n.hiding||(n.closing=!1))):o.removeData("ui-tooltip-open")},_tooltip:function(t){var i=d("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),e=i.uniqueId().attr("id");return d("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[e]={element:t,tooltip:i}},_find:function(t){var i=t.data("ui-tooltip-id");return i?this.tooltips[i]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var n=this;d.each(this.tooltips,function(t,i){var e=d.Event("blur"),o=i.element;e.target=e.currentTarget=o[0],n.close(e,!0),d("#"+t).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/plugins/superfish/js/superfish.js */
try{
(function($){"use strict";var methods=(function(){var c={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',menuArrowClass:'sf-arrows'},ios=(function(){var ios=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(ios){$(window).load(function(){$('body').children().on('click',$.noop)})}
return ios})(),wp7=(function(){var style=document.documentElement.style;return('behavior' in style&&'fill' in style&&/iemobile/i.test(navigator.userAgent))})(),toggleMenuClasses=function($menu,o){var classes=c.menuClass;if(o.cssArrows){classes+=' '+c.menuArrowClass}
$menu.toggleClass(classes)},setPathToCurrent=function($menu,o){return $menu.find('li.'+o.pathClass).slice(0,o.pathLevels).addClass(o.hoverClass+' '+c.bcClass).filter(function(){return($(this).children(o.popUpSelector).hide().show().length)}).removeClass(o.pathClass)},toggleAnchorClass=function($li){$li.children('a').toggleClass(c.anchorClass)},toggleTouchAction=function($menu){var touchAction=$menu.css('ms-touch-action');touchAction=(touchAction==='pan-y')?'auto':'pan-y';$menu.css('ms-touch-action',touchAction)},applyHandlers=function($menu,o){var targets='li:has('+o.popUpSelector+')';if($.fn.hoverIntent&&!o.disableHI){$menu.hoverIntent(over,out,targets)}else{$menu.on('mouseenter.superfish',targets,over).on('mouseleave.superfish',targets,out)}
var touchevent='MSPointerDown.superfish';if(!ios){touchevent+=' touchend.superfish'}
if(wp7){touchevent+=' mousedown.superfish'}
$menu.on('focusin.superfish','li',over).on('focusout.superfish','li',out).on(touchevent,'a',o,touchHandler)},touchHandler=function(e){var $this=$(this),$ul=$this.siblings(e.data.popUpSelector);if($ul.length>0&&$ul.is(':hidden')){$this.one('click.superfish',!1);if(e.type==='MSPointerDown'){$this.trigger('focus')}else{$.proxy(over,$this.parent('li'))()}}},over=function(){var $this=$(this),o=getOptions($this);clearTimeout(o.sfTimer);$this.siblings().superfish('hide').end().superfish('show')},out=function(){var $this=$(this),o=getOptions($this);if(ios){$.proxy(close,$this,o)()}else{clearTimeout(o.sfTimer);o.sfTimer=setTimeout($.proxy(close,$this,o),o.delay)}},close=function(o){o.retainPath=($.inArray(this[0],o.$path)>-1);this.superfish('hide');if(!this.parents('.'+o.hoverClass).length){o.onIdle.call(getMenu(this));if(o.$path.length){$.proxy(over,o.$path)()}}},getMenu=function($el){return $el.closest('.'+c.menuClass)},getOptions=function($el){return getMenu($el).data('sf-options')};return{hide:function(instant){if(this.length){var $this=this,o=getOptions($this);if(!o){return this}
var not=(o.retainPath===!0)?o.$path:'',$ul=$this.find('li.'+o.hoverClass).add(this).not(not).removeClass(o.hoverClass).children(o.popUpSelector),speed=o.speedOut;if(instant){$ul.show();speed=0}
o.retainPath=!1;o.onBeforeHide.call($ul);var gdlr_input=!1;$(this).find('input:focus').each(function(){gdlr_input=!0});if(gdlr_input)return $(this);$ul.stop(!0,!0).animate(o.animationOut,speed,function(){var $this=$(this);o.onHide.call($this)})}
return this},show:function(){var o=getOptions(this);if(!o){return this}
var $this=this.addClass(o.hoverClass),$ul=$this.children(o.popUpSelector);o.onBeforeShow.call($ul);$ul.stop(!0,!0).animate(o.animation,o.speed,function(){o.onShow.call($ul)});return this},destroy:function(){return this.each(function(){var $this=$(this),o=$this.data('sf-options'),$hasPopUp;if(!o){return!1}
$hasPopUp=$this.find(o.popUpSelector).parent('li');clearTimeout(o.sfTimer);toggleMenuClasses($this,o);toggleAnchorClass($hasPopUp);toggleTouchAction($this);$this.off('.superfish').off('.hoverIntent');$hasPopUp.children(o.popUpSelector).attr('style',function(i,style){return style.replace(/display[^;]+;?/g,'')});o.$path.removeClass(o.hoverClass+' '+c.bcClass).addClass(o.pathClass);$this.find('.'+o.hoverClass).removeClass(o.hoverClass);o.onDestroy.call($this);$this.removeData('sf-options')})},init:function(op){return this.each(function(){var $this=$(this);if($this.data('sf-options')){return!1}
var o=$.extend({},$.fn.superfish.defaults,op),$hasPopUp=$this.find(o.popUpSelector).parent('li');o.$path=setPathToCurrent($this,o);$this.data('sf-options',o);toggleMenuClasses($this,o);toggleAnchorClass($hasPopUp);toggleTouchAction($this);applyHandlers($this,o);$hasPopUp.not('.'+c.bcClass).superfish('hide',!0);o.onInit.call(this)})}}})();$.fn.superfish=function(method,args){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}else{return $.error('Method '+method+' does not exist on jQuery.fn.superfish')}};$.fn.superfish.defaults={popUpSelector:'ul,.sf-mega',hoverClass:'sfHover',pathClass:'overrideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},animationOut:{opacity:'hide'},speed:'normal',speedOut:'fast',cssArrows:!0,disableHI:!1,onInit:$.noop,onBeforeShow:$.noop,onShow:$.noop,onBeforeHide:$.noop,onHide:$.noop,onIdle:$.noop,onDestroy:$.noop};$.fn.extend({hideSuperfishUl:methods.hide,showSuperfishUl:methods.show})})(jQuery);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/wp/wp-includes/js/hoverIntent.min.js */
try{
!function(a){a.fn.hoverIntent=function(e,t,n){var o,r,v,i,u={interval:100,sensitivity:6,timeout:0};u="object"==typeof e?a.extend(u,e):a.isFunction(t)?a.extend(u,{over:e,out:t,selector:n}):a.extend(u,{over:e,out:e,selector:t});function s(e){o=e.pageX,r=e.pageY}function h(e){var t=a.extend({},e),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"===e.type?(v=t.pageX,i=t.pageY,a(n).on("mousemove.hoverIntent",s),n.hoverIntent_s||(n.hoverIntent_t=setTimeout(function(){I(t,n)},u.interval))):(a(n).off("mousemove.hoverIntent",s),n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){!function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,u.out.apply(t,[e])}(t,n)},u.timeout)))}var I=function(e,t){if(t.hoverIntent_t=clearTimeout(t.hoverIntent_t),Math.sqrt((v-o)*(v-o)+(i-r)*(i-r))<u.sensitivity)return a(t).off("mousemove.hoverIntent",s),t.hoverIntent_s=!0,u.over.apply(t,[e]);v=o,i=r,t.hoverIntent_t=setTimeout(function(){I(e,t)},u.interval)};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},u.selector)}}(jQuery);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/plugins/dl-menu/modernizr.custom.js */
try{
window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:w(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},q.cssanimations=function(){return F("animationName")},q.csstransitions=function(){return F("transition")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/plugins/dl-menu/jquery.dlmenu.js */
try{
(function($,window,undefined){'use strict';var Modernizr=window.Modernizr,$body=$('body');$.DLMenu=function(options,element){this.$el=$(element);this._init(options)};$.DLMenu.defaults={animationClasses:{classin:'dl-animate-in-1',classout:'dl-animate-out-1'},onLevelClick:function(el,name){return!1},onLinkClick:function(el,ev){return!1}};$.DLMenu.prototype={_init:function(options){this.options=$.extend(!0,{},$.DLMenu.defaults,options);this._config();var animEndEventNames={'WebkitAnimation':'webkitAnimationEnd','OAnimation':'oAnimationEnd','msAnimation':'MSAnimationEnd','animation':'animationend'},transEndEventNames={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd','msTransition':'MSTransitionEnd','transition':'transitionend'};this.animEndEventName=animEndEventNames[Modernizr.prefixed('animation')]+'.dlmenu';this.transEndEventName=transEndEventNames[Modernizr.prefixed('transition')]+'.dlmenu',this.supportAnimations=Modernizr.cssanimations,this.supportTransitions=Modernizr.csstransitions;this._initEvents()},_config:function(){this.open=!1;this.$trigger=this.$el.children('.dl-trigger');this.$menu=this.$el.children('ul.dl-menu');this.$menuitems=this.$menu.find('li:not(.dl-back)');this.$el.find('ul.dl-submenu').prepend('<li class="dl-back"><a href="#">back</a></li>');this.$back=this.$menu.find('li.dl-back')},_initEvents:function(){var self=this;this.$trigger.on('click.dlmenu',function(){if(self.open){self._closeMenu()}else{self._openMenu()}
return!1});this.$menuitems.on('click.dlmenu',function(event){event.stopPropagation();var $item=$(this),$submenu=$item.children('ul.dl-submenu');if($submenu.length>0){var $flyin=$submenu.clone().css('opacity',0).insertAfter(self.$menu),onAnimationEndFn=function(){self.$menu.off(self.animEndEventName).removeClass(self.options.animationClasses.classout).addClass('dl-subview');$item.addClass('dl-subviewopen').parents('.dl-subviewopen:first').removeClass('dl-subviewopen').addClass('dl-subview');$flyin.remove()};setTimeout(function(){$flyin.addClass(self.options.animationClasses.classin);self.$menu.addClass(self.options.animationClasses.classout);if(self.supportAnimations){self.$menu.on(self.animEndEventName,onAnimationEndFn)}else{onAnimationEndFn.call()}
self.options.onLevelClick($item,$item.children('a:first').text())});return!1}else{self.options.onLinkClick($item,event)}});this.$back.on('click.dlmenu',function(event){var $this=$(this),$submenu=$this.parents('ul.dl-submenu:first'),$item=$submenu.parent(),$flyin=$submenu.clone().insertAfter(self.$menu);var onAnimationEndFn=function(){self.$menu.off(self.animEndEventName).removeClass(self.options.animationClasses.classin);$flyin.remove()};setTimeout(function(){$flyin.addClass(self.options.animationClasses.classout);self.$menu.addClass(self.options.animationClasses.classin);if(self.supportAnimations){self.$menu.on(self.animEndEventName,onAnimationEndFn)}else{onAnimationEndFn.call()}
$item.removeClass('dl-subviewopen');var $subview=$this.parents('.dl-subview:first');if($subview.is('li')){$subview.addClass('dl-subviewopen')}
$subview.removeClass('dl-subview')});return!1})},closeMenu:function(){if(this.open){this._closeMenu()}},_closeMenu:function(){var self=this,onTransitionEndFn=function(){self.$menu.off(self.transEndEventName);self._resetMenu()};this.$menu.removeClass('dl-menuopen');this.$menu.addClass('dl-menu-toggle');this.$trigger.removeClass('dl-active');if(this.supportTransitions){this.$menu.on(this.transEndEventName,onTransitionEndFn)}else{onTransitionEndFn.call()}
this.open=!1},openMenu:function(){if(!this.open){this._openMenu()}},_openMenu:function(){var self=this;$body.off('click').on('click.dlmenu',function(){self._closeMenu()});this.$menu.addClass('dl-menuopen dl-menu-toggle').on(this.transEndEventName,function(){$(this).removeClass('dl-menu-toggle')});this.$trigger.addClass('dl-active');this.open=!0},_resetMenu:function(){this.$menu.removeClass('dl-subview');this.$menuitems.removeClass('dl-subview dl-subviewopen')}};var logError=function(message){if(window.console){window.console.error(message)}};$.fn.dlmenu=function(options){if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,'dlmenu');if(!instance){logError("cannot call methods on dlmenu prior to initialization; "+"attempted to call method '"+options+"'");return}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for dlmenu instance");return}
instance[options].apply(instance,args)})}else{this.each(function(){var instance=$.data(this,'dlmenu');if(instance){instance._init()}else{instance=$.data(this,'dlmenu',new $.DLMenu(options,this))}})}
return this}})(jQuery,window);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/plugins/jquery.easing.js */
try{
jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b}});

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/plugins/flexslider/jquery.flexslider.js */
try{
(function($){$.flexslider=function(el,options){var slider=$(el);slider.vars=$.extend({},$.flexslider.defaults,options);var namespace=slider.vars.namespace,msGesture=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,touch=(("ontouchstart" in window)||msGesture||window.DocumentTouch&&document instanceof DocumentTouch)&&slider.vars.touch,eventType="click touchend MSPointerUp",watchedEvent="",watchedEventClearTimer,vertical=slider.vars.direction==="vertical",reverse=slider.vars.reverse,carousel=(slider.vars.itemWidth>0),fade=slider.vars.animation==="fade",asNav=slider.vars.asNavFor!=="",methods={},focused=!0;$.data(el,"flexslider",slider);methods={init:function(){slider.animating=!1;slider.currentSlide=parseInt((slider.vars.startAt?slider.vars.startAt:0));if(isNaN(slider.currentSlide))slider.currentSlide=0;slider.animatingTo=slider.currentSlide;slider.atEnd=(slider.currentSlide===0||slider.currentSlide===slider.last);slider.containerSelector=slider.vars.selector.substr(0,slider.vars.selector.search(' '));slider.slides=$(slider.vars.selector,slider);slider.container=$(slider.containerSelector,slider);slider.count=slider.slides.length;slider.syncExists=$(slider.vars.sync).length>0;if(slider.vars.animation==="slide")slider.vars.animation="swing";slider.prop=(vertical)?"top":"marginLeft";slider.args={};slider.manualPause=!1;slider.stopped=!1;slider.started=!1;slider.startTimeout=null;slider.transitions=!slider.vars.video&&!fade&&slider.vars.useCSS&&(function(){var obj=document.createElement('div'),props=['perspectiveProperty','WebkitPerspective','MozPerspective','OPerspective','msPerspective'];for(var i in props){if(obj.style[props[i]]!==undefined){slider.pfx=props[i].replace('Perspective','').toLowerCase();slider.prop="-"+slider.pfx+"-transform";return!0}}
return!1}());if(slider.vars.controlsContainer!=="")slider.controlsContainer=$(slider.vars.controlsContainer).length>0&&$(slider.vars.controlsContainer);if(slider.vars.manualControls!=="")slider.manualControls=$(slider.vars.manualControls).length>0&&$(slider.vars.manualControls);if(slider.vars.randomize){slider.slides.sort(function(){return(Math.round(Math.random())-0.5)});slider.container.empty().append(slider.slides)}
slider.doMath();slider.setup("init");if(slider.vars.controlNav)methods.controlNav.setup();if(slider.vars.directionNav)methods.directionNav.setup();if(slider.vars.keyboard&&($(slider.containerSelector).length===1||slider.vars.multipleKeyboard)){$(document).bind('keyup',function(event){var keycode=event.keyCode;if(!slider.animating&&(keycode===39||keycode===37)){var target=(keycode===39)?slider.getTarget('next'):(keycode===37)?slider.getTarget('prev'):!1;slider.flexAnimate(target,slider.vars.pauseOnAction)}})}
if(slider.vars.mousewheel){slider.bind('mousewheel',function(event,delta,deltaX,deltaY){event.preventDefault();var target=(delta<0)?slider.getTarget('next'):slider.getTarget('prev');slider.flexAnimate(target,slider.vars.pauseOnAction)})}
if(slider.vars.pausePlay)methods.pausePlay.setup();if(slider.vars.slideshow&&slider.vars.pauseInvisible)methods.pauseInvisible.init();if(slider.vars.slideshow){if(slider.vars.pauseOnHover){slider.hover(function(){if(!slider.manualPlay&&!slider.manualPause)slider.pause()},function(){if(!slider.manualPause&&!slider.manualPlay&&!slider.stopped)slider.play()})}
if(!slider.vars.pauseInvisible||!methods.pauseInvisible.isHidden()){(slider.vars.initDelay>0)?slider.startTimeout=setTimeout(slider.play,slider.vars.initDelay):slider.play()}}
if(asNav)methods.asNav.setup();if(touch&&slider.vars.touch)methods.touch();if(!fade||(fade&&slider.vars.smoothHeight))$(window).bind("resize orientationchange focus",methods.resize);slider.find("img").attr("draggable","false");setTimeout(function(){slider.vars.start(slider)},200)},asNav:{setup:function(){slider.asNav=!0;slider.animatingTo=Math.floor(slider.currentSlide/slider.move);slider.currentItem=slider.currentSlide;slider.slides.removeClass(namespace+"active-slide").eq(slider.currentItem).addClass(namespace+"active-slide");if(!msGesture){slider.slides.click(function(e){e.preventDefault();var $slide=$(this),target=$slide.index();var posFromLeft=$slide.offset().left-$(slider).scrollLeft();if(posFromLeft<=0&&$slide.hasClass(namespace+'active-slide')){slider.flexAnimate(slider.getTarget("prev"),!0)}else if(!$(slider.vars.asNavFor).data('flexslider').animating&&!$slide.hasClass(namespace+"active-slide")){slider.direction=(slider.currentItem<target)?"next":"prev";slider.flexAnimate(target,slider.vars.pauseOnAction,!1,!0,!0)}})}else{el._slider=slider;slider.slides.each(function(){var that=this;that._gesture=new MSGesture();that._gesture.target=that;that.addEventListener("MSPointerDown",function(e){e.preventDefault();if(e.currentTarget._gesture)
e.currentTarget._gesture.addPointer(e.pointerId)},!1);that.addEventListener("MSGestureTap",function(e){e.preventDefault();var $slide=$(this),target=$slide.index();if(!$(slider.vars.asNavFor).data('flexslider').animating&&!$slide.hasClass('active')){slider.direction=(slider.currentItem<target)?"next":"prev";slider.flexAnimate(target,slider.vars.pauseOnAction,!1,!0,!0)}})})}}},controlNav:{setup:function(){if(!slider.manualControls){methods.controlNav.setupPaging()}else{methods.controlNav.setupManual()}},setupPaging:function(){var type=(slider.vars.controlNav==="thumbnails")?'control-thumbs':'control-paging',j=1,item,slide;slider.controlNavScaffold=$('<ol class="'+namespace+'control-nav '+namespace+type+'"></ol>');if(slider.pagingCount>1){for(var i=0;i<slider.pagingCount;i++){slide=slider.slides.eq(i);item=(slider.vars.controlNav==="thumbnails")?'<img src="'+slide.attr('data-thumb')+'"/>':'<a>'+j+'</a>';if('thumbnails'===slider.vars.controlNav&&!0===slider.vars.thumbCaptions){var captn=slide.attr('data-thumbcaption');if(''!=captn&&undefined!=captn)item+='<span class="'+namespace+'caption">'+captn+'</span>'}
slider.controlNavScaffold.append('<li>'+item+'</li>');j++}}(slider.controlsContainer)?$(slider.controlsContainer).append(slider.controlNavScaffold):slider.append($('<div />').addClass('flex-control-nav-wrapper').append(slider.controlNavScaffold));methods.controlNav.set();methods.controlNav.active();slider.controlNavScaffold.delegate('a, img',eventType,function(event){event.preventDefault();if(watchedEvent===""||watchedEvent===event.type){var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+'active')){slider.direction=(target>slider.currentSlide)?"next":"prev";slider.flexAnimate(target,slider.vars.pauseOnAction)}}
if(watchedEvent===""){watchedEvent=event.type}
methods.setToClearWatchedEvent()})},setupManual:function(){slider.controlNav=slider.manualControls;methods.controlNav.active();slider.controlNav.bind(eventType,function(event){event.preventDefault();if(watchedEvent===""||watchedEvent===event.type){var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+'active')){(target>slider.currentSlide)?slider.direction="next":slider.direction="prev";slider.flexAnimate(target,slider.vars.pauseOnAction)}}
if(watchedEvent===""){watchedEvent=event.type}
methods.setToClearWatchedEvent()})},set:function(){var selector=(slider.vars.controlNav==="thumbnails")?'img':'a';slider.controlNav=$('.'+namespace+'control-nav li '+selector,(slider.controlsContainer)?slider.controlsContainer:slider)},active:function(){slider.controlNav.removeClass(namespace+"active").eq(slider.animatingTo).addClass(namespace+"active")},update:function(action,pos){if(slider.pagingCount>1&&action==="add"){slider.controlNavScaffold.append($('<li><a>'+slider.count+'</a></li>'))}else if(slider.pagingCount===1){slider.controlNavScaffold.find('li').remove()}else{slider.controlNav.eq(pos).closest('li').remove()}
methods.controlNav.set();(slider.pagingCount>1&&slider.pagingCount!==slider.controlNav.length)?slider.update(pos,action):methods.controlNav.active()}},directionNav:{setup:function(){var directionNavScaffold=$('<ul class="'+namespace+'direction-nav"><li><a class="'+namespace+'prev" href="#">'+slider.vars.prevText+'</a></li><li><a class="'+namespace+'next" href="#">'+slider.vars.nextText+'</a></li></ul>');if(slider.controlsContainer){$(slider.controlsContainer).append(directionNavScaffold);slider.directionNav=$('.'+namespace+'direction-nav li a',slider.controlsContainer)}else{slider.append(directionNavScaffold);slider.directionNav=$('.'+namespace+'direction-nav li a',slider)}
methods.directionNav.update();slider.directionNav.bind(eventType,function(event){event.preventDefault();var target;if(watchedEvent===""||watchedEvent===event.type){target=($(this).hasClass(namespace+'next'))?slider.getTarget('next'):slider.getTarget('prev');slider.flexAnimate(target,slider.vars.pauseOnAction)}
if(watchedEvent===""){watchedEvent=event.type}
methods.setToClearWatchedEvent()})},update:function(){var disabledClass=namespace+'disabled';if(slider.pagingCount===1){slider.directionNav.addClass(disabledClass).attr('tabindex','-1')}else if(!slider.vars.animationLoop){if(slider.animatingTo===0){slider.directionNav.removeClass(disabledClass).filter('.'+namespace+"prev").addClass(disabledClass).attr('tabindex','-1')}else if(slider.animatingTo===slider.last){slider.directionNav.removeClass(disabledClass).filter('.'+namespace+"next").addClass(disabledClass).attr('tabindex','-1')}else{slider.directionNav.removeClass(disabledClass).removeAttr('tabindex')}}else{slider.directionNav.removeClass(disabledClass).removeAttr('tabindex')}}},pausePlay:{setup:function(){var pausePlayScaffold=$('<div class="'+namespace+'pauseplay"><a></a></div>');if(slider.controlsContainer){slider.controlsContainer.append(pausePlayScaffold);slider.pausePlay=$('.'+namespace+'pauseplay a',slider.controlsContainer)}else{slider.append(pausePlayScaffold);slider.pausePlay=$('.'+namespace+'pauseplay a',slider)}
methods.pausePlay.update((slider.vars.slideshow)?namespace+'pause':namespace+'play');slider.pausePlay.bind(eventType,function(event){event.preventDefault();if(watchedEvent===""||watchedEvent===event.type){if($(this).hasClass(namespace+'pause')){slider.manualPause=!0;slider.manualPlay=!1;slider.pause()}else{slider.manualPause=!1;slider.manualPlay=!0;slider.play()}}
if(watchedEvent===""){watchedEvent=event.type}
methods.setToClearWatchedEvent()})},update:function(state){(state==="play")?slider.pausePlay.removeClass(namespace+'pause').addClass(namespace+'play').html(slider.vars.playText):slider.pausePlay.removeClass(namespace+'play').addClass(namespace+'pause').html(slider.vars.pauseText)}},touch:function(){var startX,startY,offset,cwidth,dx,startT,scrolling=!1,localX=0,localY=0,accDx=0;if(!msGesture){el.addEventListener('touchstart',onTouchStart,!1);function onTouchStart(e){if(slider.animating){e.preventDefault()}else if((window.navigator.msPointerEnabled)||e.touches.length===1){slider.pause();cwidth=(vertical)?slider.h:slider.w;startT=Number(new Date());localX=e.touches[0].pageX;localY=e.touches[0].pageY;offset=(carousel&&reverse&&slider.animatingTo===slider.last)?0:(carousel&&reverse)?slider.limit-(((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo):(carousel&&slider.currentSlide===slider.last)?slider.limit:(carousel)?((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.currentSlide:(reverse)?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth;startX=(vertical)?localY:localX;startY=(vertical)?localX:localY;el.addEventListener('touchmove',onTouchMove,!1);el.addEventListener('touchend',onTouchEnd,!1)}}
function onTouchMove(e){localX=e.touches[0].pageX;localY=e.touches[0].pageY;dx=(vertical)?startX-localY:startX-localX;scrolling=(vertical)?(Math.abs(dx)<Math.abs(localX-startY)):(Math.abs(dx)<Math.abs(localY-startY));var fxms=500;if(!scrolling||Number(new Date())-startT>fxms){e.preventDefault();if(!fade&&slider.transitions){if(!slider.vars.animationLoop){dx=dx/((slider.currentSlide===0&&dx<0||slider.currentSlide===slider.last&&dx>0)?(Math.abs(dx)/cwidth+2):1)}
slider.setProps(offset+dx,"setTouch")}}}
function onTouchEnd(e){el.removeEventListener('touchmove',onTouchMove,!1);if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=(reverse)?-dx:dx,target=(updateDx>0)?slider.getTarget('next'):slider.getTarget('prev');if(slider.canAdvance(target)&&(Number(new Date())-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)){slider.flexAnimate(target,slider.vars.pauseOnAction)}else{if(!fade)slider.flexAnimate(slider.currentSlide,slider.vars.pauseOnAction,!0)}}
el.removeEventListener('touchend',onTouchEnd,!1);startX=null;startY=null;dx=null;offset=null}}else{el.style.msTouchAction="none";el._gesture=new MSGesture();el._gesture.target=el;el.addEventListener("MSPointerDown",onMSPointerDown,!1);el._slider=slider;el.addEventListener("MSGestureChange",onMSGestureChange,!1);el.addEventListener("MSGestureEnd",onMSGestureEnd,!1);function onMSPointerDown(e){e.stopPropagation();if(slider.animating){e.preventDefault()}else{slider.pause();el._gesture.addPointer(e.pointerId);accDx=0;cwidth=(vertical)?slider.h:slider.w;startT=Number(new Date());offset=(carousel&&reverse&&slider.animatingTo===slider.last)?0:(carousel&&reverse)?slider.limit-(((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo):(carousel&&slider.currentSlide===slider.last)?slider.limit:(carousel)?((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.currentSlide:(reverse)?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth}}
function onMSGestureChange(e){e.stopPropagation();var slider=e.target._slider;if(!slider){return}
var transX=-e.translationX,transY=-e.translationY;accDx=accDx+((vertical)?transY:transX);dx=accDx;scrolling=(vertical)?(Math.abs(accDx)<Math.abs(-transX)):(Math.abs(accDx)<Math.abs(-transY));if(e.detail===e.MSGESTURE_FLAG_INERTIA){setImmediate(function(){el._gesture.stop()});return}
if(!scrolling||Number(new Date())-startT>500){e.preventDefault();if(!fade&&slider.transitions){if(!slider.vars.animationLoop){dx=accDx/((slider.currentSlide===0&&accDx<0||slider.currentSlide===slider.last&&accDx>0)?(Math.abs(accDx)/cwidth+2):1)}
slider.setProps(offset+dx,"setTouch")}}}
function onMSGestureEnd(e){e.stopPropagation();var slider=e.target._slider;if(!slider){return}
if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=(reverse)?-dx:dx,target=(updateDx>0)?slider.getTarget('next'):slider.getTarget('prev');if(slider.canAdvance(target)&&(Number(new Date())-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)){slider.flexAnimate(target,slider.vars.pauseOnAction)}else{if(!fade)slider.flexAnimate(slider.currentSlide,slider.vars.pauseOnAction,!0)}}
startX=null;startY=null;dx=null;offset=null;accDx=0}}},resize:function(){if(!slider.animating&&slider.is(':visible')){if(!carousel)slider.doMath();if(fade){methods.smoothHeight()}else if(carousel){slider.slides.width(slider.computedW);slider.update(slider.pagingCount);slider.setProps()}else if(vertical){slider.viewport.height(slider.h);slider.setProps(slider.h,"setTotal")}else{if(slider.vars.smoothHeight)methods.smoothHeight();slider.newSlides.width(slider.computedW);slider.setProps(slider.computedW,"setTotal")}}},smoothHeight:function(dur){if(!vertical||fade){var $obj=(fade)?slider:slider.viewport;(dur)?$obj.animate({"height":slider.slides.eq(slider.animatingTo).outerHeight()},dur):$obj.height(slider.slides.eq(slider.animatingTo).outerHeight())}},sync:function(action){var $obj=$(slider.vars.sync).data("flexslider"),target=slider.animatingTo;switch(action){case "animate":$obj.flexAnimate(target,slider.vars.pauseOnAction,!1,!0);break;case "play":if(!$obj.playing&&!$obj.asNav){$obj.play()}break;case "pause":$obj.pause();break}},pauseInvisible:{visProp:null,init:function(){var prefixes=['webkit','moz','ms','o'];if('hidden' in document)return'hidden';for(var i=0;i<prefixes.length;i++){if((prefixes[i]+'Hidden')in document)
methods.pauseInvisible.visProp=prefixes[i]+'Hidden'}
if(methods.pauseInvisible.visProp){var evtname=methods.pauseInvisible.visProp.replace(/[H|h]idden/,'')+'visibilitychange';document.addEventListener(evtname,function(){if(methods.pauseInvisible.isHidden()){if(slider.startTimeout)clearTimeout(slider.startTimeout);else slider.pause()}else{if(slider.started)slider.play();else(slider.vars.initDelay>0)?setTimeout(slider.play,slider.vars.initDelay):slider.play()}})}},isHidden:function(){return document[methods.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(watchedEventClearTimer);watchedEventClearTimer=setTimeout(function(){watchedEvent=""},3000)}}
slider.flexAnimate=function(target,pause,override,withSync,fromNav){if(!slider.vars.animationLoop&&target!==slider.currentSlide){slider.direction=(target>slider.currentSlide)?"next":"prev"}
if(asNav&&slider.pagingCount===1)slider.direction=(slider.currentItem<target)?"next":"prev";if(!slider.animating&&(slider.canAdvance(target,fromNav)||override)&&slider.is(":visible")){if(asNav&&withSync){var master=$(slider.vars.asNavFor).data('flexslider');slider.atEnd=target===0||target===slider.count-1;master.flexAnimate(target,!0,!1,!0,fromNav);slider.direction=(slider.currentItem<target)?"next":"prev";master.direction=slider.direction;if(Math.ceil((target+1)/slider.visible)-1!==slider.currentSlide&&target!==0){slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");target=Math.floor(target/slider.visible)}else{slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");return!1}}
slider.animating=!0;slider.animatingTo=target;if(pause)slider.pause();slider.vars.before(slider);if(slider.syncExists&&!fromNav)methods.sync("animate");if(slider.vars.controlNav)methods.controlNav.active();if(!carousel)slider.slides.removeClass(namespace+'active-slide').eq(target).addClass(namespace+'active-slide');slider.atEnd=target===0||target===slider.last;if(slider.vars.directionNav)methods.directionNav.update();if(target===slider.last){slider.vars.end(slider);if(!slider.vars.animationLoop)slider.pause()}
if(!fade){var dimension=(vertical)?slider.slides.filter(':first').height():slider.computedW,margin,slideString,calcNext;if(carousel){margin=slider.vars.itemMargin;calcNext=((slider.itemW+margin)*slider.move)*slider.animatingTo;slideString=(calcNext>slider.limit&&slider.visible!==1)?slider.limit:calcNext}else if(slider.currentSlide===0&&target===slider.count-1&&slider.vars.animationLoop&&slider.direction!=="next"){slideString=(reverse)?(slider.count+slider.cloneOffset)*dimension:0}else if(slider.currentSlide===slider.last&&target===0&&slider.vars.animationLoop&&slider.direction!=="prev"){slideString=(reverse)?0:(slider.count+1)*dimension}else{slideString=(reverse)?((slider.count-1)-target+slider.cloneOffset)*dimension:(target+slider.cloneOffset)*dimension}
slider.setProps(slideString,"",slider.vars.animationSpeed);if(slider.transitions){if(!slider.vars.animationLoop||!slider.atEnd){slider.animating=!1;slider.currentSlide=slider.animatingTo}
slider.container.unbind("webkitTransitionEnd transitionend");slider.container.bind("webkitTransitionEnd transitionend",function(){slider.wrapup(dimension)})}else{slider.container.animate(slider.args,slider.vars.animationSpeed,slider.vars.easing,function(){slider.wrapup(dimension)})}}else{if(!touch){slider.slides.eq(slider.currentSlide).css({"zIndex":1}).animate({"opacity":0},slider.vars.animationSpeed,slider.vars.easing);slider.slides.eq(target).css({"zIndex":2}).animate({"opacity":1},slider.vars.animationSpeed,slider.vars.easing,slider.wrapup)}else{slider.slides.eq(slider.currentSlide).css({"opacity":0,"zIndex":1});slider.slides.eq(target).css({"opacity":1,"zIndex":2});slider.wrapup(dimension)}}
if(slider.vars.smoothHeight)methods.smoothHeight(slider.vars.animationSpeed)}}
slider.wrapup=function(dimension){if(!fade&&!carousel){if(slider.currentSlide===0&&slider.animatingTo===slider.last&&slider.vars.animationLoop){slider.setProps(dimension,"jumpEnd")}else if(slider.currentSlide===slider.last&&slider.animatingTo===0&&slider.vars.animationLoop){slider.setProps(dimension,"jumpStart")}}
slider.animating=!1;slider.currentSlide=slider.animatingTo;slider.vars.after(slider)}
slider.animateSlides=function(){if(!slider.animating&&focused)slider.flexAnimate(slider.getTarget("next"))}
slider.pause=function(){clearInterval(slider.animatedSlides);slider.animatedSlides=null;slider.playing=!1;if(slider.vars.pausePlay)methods.pausePlay.update("play");if(slider.syncExists)methods.sync("pause")}
slider.play=function(){if(slider.playing)clearInterval(slider.animatedSlides);slider.animatedSlides=slider.animatedSlides||setInterval(slider.animateSlides,slider.vars.slideshowSpeed);slider.started=slider.playing=!0;if(slider.vars.pausePlay)methods.pausePlay.update("pause");if(slider.syncExists)methods.sync("play")}
slider.stop=function(){slider.pause();slider.stopped=!0}
slider.canAdvance=function(target,fromNav){var last=(asNav)?slider.pagingCount-1:slider.last;return(fromNav)?!0:(asNav&&slider.currentItem===slider.count-1&&target===0&&slider.direction==="prev")?!0:(asNav&&slider.currentItem===0&&target===slider.pagingCount-1&&slider.direction!=="next")?!1:(target===slider.currentSlide&&!asNav)?!1:(slider.vars.animationLoop)?!0:(slider.atEnd&&slider.currentSlide===0&&target===last&&slider.direction!=="next")?!1:(slider.atEnd&&slider.currentSlide===last&&target===0&&slider.direction==="next")?!1:!0}
slider.getTarget=function(dir){slider.direction=dir;if(dir==="next"){return(slider.currentSlide===slider.last)?0:slider.currentSlide+1}else{return(slider.currentSlide===0)?slider.last:slider.currentSlide-1}}
slider.setProps=function(pos,special,dur){var target=(function(){var posCheck=(pos)?pos:((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo,posCalc=(function(){if(carousel){return(special==="setTouch")?pos:(reverse&&slider.animatingTo===slider.last)?0:(reverse)?slider.limit-(((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo):(slider.animatingTo===slider.last)?slider.limit:posCheck}else{switch(special){case "setTotal":return(reverse)?((slider.count-1)-slider.currentSlide+slider.cloneOffset)*pos:(slider.currentSlide+slider.cloneOffset)*pos;case "setTouch":return(reverse)?pos:pos;case "jumpEnd":return(reverse)?pos:slider.count*pos;case "jumpStart":return(reverse)?slider.count*pos:pos;default:return pos}}}());return(posCalc*-1)+"px"}());if(slider.transitions){target=(vertical)?"translate3d(0,"+target+",0)":"translate3d("+target+",0,0)";dur=(dur!==undefined)?(dur/1000)+"s":"0s";slider.container.css("-"+slider.pfx+"-transition-duration",dur)}
slider.args[slider.prop]=target;if(slider.transitions||dur===undefined)slider.container.css(slider.args)}
slider.setup=function(type){if(!fade){var sliderOffset,arr;if(type==="init"){slider.viewport=$('<div class="'+namespace+'viewport"></div>').css({"overflow":"hidden","position":"relative"}).appendTo(slider).append(slider.container);slider.cloneCount=0;slider.cloneOffset=0;if(reverse){arr=$.makeArray(slider.slides).reverse();slider.slides=$(arr);slider.container.empty().append(slider.slides)}}
if(slider.vars.animationLoop&&!carousel){slider.cloneCount=2;slider.cloneOffset=1;if(type!=="init")slider.container.find('.clone').remove();slider.container.append(slider.slides.first().clone().addClass('clone').attr('aria-hidden','true')).prepend(slider.slides.last().clone().addClass('clone').attr('aria-hidden','true'))}
slider.newSlides=$(slider.vars.selector,slider);sliderOffset=(reverse)?slider.count-1-slider.currentSlide+slider.cloneOffset:slider.currentSlide+slider.cloneOffset;if(vertical&&!carousel){slider.container.height((slider.count+slider.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){slider.newSlides.css({"display":"block"});slider.doMath();slider.viewport.height(slider.h);slider.setProps(sliderOffset*slider.h,"init")},(type==="init")?100:0)}else{slider.container.width((slider.count+slider.cloneCount)*200+"%");slider.setProps(sliderOffset*slider.computedW,"init");setTimeout(function(){slider.doMath();slider.newSlides.css({"width":slider.computedW,"float":"left","display":"block"});if(slider.vars.smoothHeight)methods.smoothHeight()},(type==="init")?100:0)}}else{slider.slides.css({"width":"100%","float":"left","marginRight":"-100%","position":"relative"});if(type==="init"){if(!touch){slider.slides.css({"opacity":0,"display":"block","zIndex":1}).eq(slider.currentSlide).css({"zIndex":2}).animate({"opacity":1},slider.vars.animationSpeed,slider.vars.easing)}else{slider.slides.css({"opacity":0,"display":"block","webkitTransition":"opacity "+slider.vars.animationSpeed/1000+"s ease","zIndex":1}).eq(slider.currentSlide).css({"opacity":1,"zIndex":2})}}
if(slider.vars.smoothHeight)methods.smoothHeight()}
if(!carousel)slider.slides.removeClass(namespace+"active-slide").eq(slider.currentSlide).addClass(namespace+"active-slide")}
slider.doMath=function(){var slide=slider.slides.first(),slideMargin=slider.vars.itemMargin,minItems=slider.vars.minItems,maxItems=slider.vars.maxItems;if($(window).width()<767){minItems=1;maxItems=1}
if($(window).width()<419){minItems=1;maxItems=1}
slider.w=(slider.viewport===undefined)?slider.width():slider.viewport.width();slider.h=slide.height();slider.boxPadding=slide.outerWidth()-slide.width();if(carousel){slider.itemT=slider.vars.itemWidth+slideMargin;slider.minW=(minItems)?minItems*slider.itemT:slider.w;slider.maxW=(maxItems)?(maxItems*slider.itemT)-slideMargin:slider.w;slider.itemW=(slider.minW>slider.w)?(slider.w-(slideMargin*(minItems-1)))/minItems:(slider.maxW<slider.w)?(slider.w-(slideMargin*(maxItems-1)))/maxItems:(slider.vars.itemWidth>slider.w)?slider.w:slider.vars.itemWidth;slider.visible=Math.floor((slider.w+slideMargin)/(slider.itemW+slideMargin-1));slider.move=(slider.vars.move>0&&slider.vars.move<slider.visible)?slider.vars.move:slider.visible;slider.pagingCount=Math.ceil(((slider.count-slider.visible)/slider.move)+1);slider.last=slider.pagingCount-1;slider.limit=(slider.pagingCount===1)?0:(slider.vars.itemWidth>slider.w)?(slider.itemW*(slider.count-1))+(slideMargin*(slider.count-1)):((slider.itemW+slideMargin)*slider.count)-slider.w-slideMargin}else{slider.itemW=slider.w;slider.pagingCount=slider.count;slider.last=slider.count-1}
slider.computedW=slider.itemW-slider.boxPadding}
slider.update=function(pos,action){slider.doMath();if(!carousel){if(pos<slider.currentSlide){slider.currentSlide+=1}else if(pos<=slider.currentSlide&&pos!==0){slider.currentSlide-=1}
slider.animatingTo=slider.currentSlide}
if(slider.vars.controlNav&&!slider.manualControls){if((action==="add"&&!carousel)||slider.pagingCount>slider.controlNav.length){methods.controlNav.update("add")}else if((action==="remove"&&!carousel)||slider.pagingCount<slider.controlNav.length){if(carousel&&slider.currentSlide>slider.last){slider.currentSlide-=1;slider.animatingTo-=1}
methods.controlNav.update("remove",slider.last)}}
if(slider.vars.directionNav)methods.directionNav.update()}
slider.addSlide=function(obj,pos){var $obj=$(obj);slider.count+=1;slider.last=slider.count-1;if(vertical&&reverse){(pos!==undefined)?slider.slides.eq(slider.count-pos).after($obj):slider.container.prepend($obj)}else{(pos!==undefined)?slider.slides.eq(pos).before($obj):slider.container.append($obj)}
slider.update(pos,"add");slider.slides=$(slider.vars.selector+':not(.clone)',slider);slider.setup();slider.vars.added(slider)}
slider.removeSlide=function(obj){var pos=(isNaN(obj))?slider.slides.index($(obj)):obj;slider.count-=1;slider.last=slider.count-1;if(isNaN(obj)){$(obj,slider.slides).remove()}else{(vertical&&reverse)?slider.slides.eq(slider.last).remove():slider.slides.eq(obj).remove()}
slider.doMath();slider.update(pos,"remove");slider.slides=$(slider.vars.selector+':not(.clone)',slider);slider.setup();slider.vars.removed(slider)}
methods.init()}
$(window).blur(function(e){focused=!1}).focus(function(e){focused=!0});$.flexslider.defaults={namespace:"flex-",selector:".slides:first > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}}
$.fn.flexslider=function(options){if(options===undefined)options={};if(typeof options==="object"){return this.each(function(){var $this=$(this),selector=(options.selector)?options.selector:".slides > li",$slides=$this.find(selector);if(($slides.length===1&&options.allowOneSlide===!0)||$slides.length===0){$slides.fadeIn(400);if(options.start)options.start($this)}else if($this.data('flexslider')===undefined){new $.flexslider(this,options)}})}else{var $slider=$(this).data('flexslider');switch(options){case "play":$slider.play();break;case "pause":$slider.pause();break;case "stop":$slider.stop();break;case "next":$slider.flexAnimate($slider.getTarget("next"),!0);break;case "prev":case "previous":$slider.flexAnimate($slider.getTarget("prev"),!0);break;default:if(typeof options==="number")$slider.flexAnimate(options,!0)}}}})(jQuery);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/plugins/jquery.isotope.min.js */
try{
/**
 * Isotope v1.5.25
 * An exquisite jQuery plugin for magical layouts
 * https://isotope.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * https://isotope.metafizzy.co/docs/license.html
 *
 * Non-commercial use is licensed under the MIT License
 *
 * Copyright 2013 Metafizzy
 */
(function(a,b,c){"use strict";var d=a.document,e=a.Modernizr,f=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},g="Moz Webkit O Ms".split(" "),h=function(a){var b=d.documentElement.style,c;if(typeof b[a]=="string")return a;a=f(a);for(var e=0,h=g.length;e<h;e++){c=g[e]+a;if(typeof b[c]=="string")return c}},i=h("transform"),j=h("transitionProperty"),k={csstransforms:function(){return!!i},csstransforms3d:function(){var a=!!h("perspective");if(a){var c=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),d="@media ("+c.join("transform-3d),(")+"modernizr)",e=b("<style>"+d+"{#modernizr{height:3px}}"+"</style>").appendTo("head"),f=b('<div id="modernizr" />').appendTo("html");a=f.height()===3,f.remove(),e.remove()}return a},csstransitions:function(){return!!j}},l;if(e)for(l in k)e.hasOwnProperty(l)||e.addTest(l,k[l]);else{e=a.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var m=" ",n;for(l in k)n=k[l](),e[l]=n,m+=" "+(n?"":"no-")+l;b("html").addClass(m)}if(e.csstransforms){var o=e.csstransforms3d?{translate:function(a){return"translate3d("+a[0]+"px, "+a[1]+"px, 0) "},scale:function(a){return"scale3d("+a+", "+a+", 1) "}}:{translate:function(a){return"translate("+a[0]+"px, "+a[1]+"px) "},scale:function(a){return"scale("+a+") "}},p=function(a,c,d){var e=b.data(a,"isoTransform")||{},f={},g,h={},j;f[c]=d,b.extend(e,f);for(g in e)j=e[g],h[g]=o[g](j);var k=h.translate||"",l=h.scale||"",m=k+l;b.data(a,"isoTransform",e),a.style[i]=m};b.cssNumber.scale=!0,b.cssHooks.scale={set:function(a,b){p(a,"scale",b)},get:function(a,c){var d=b.data(a,"isoTransform");return d&&d.scale?d.scale:1}},b.fx.step.scale=function(a){b.cssHooks.scale.set(a.elem,a.now+a.unit)},b.cssNumber.translate=!0,b.cssHooks.translate={set:function(a,b){p(a,"translate",b)},get:function(a,c){var d=b.data(a,"isoTransform");return d&&d.translate?d.translate:[0,0]}}}var q,r;e.csstransitions&&(q={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[j],r=h("transitionDuration"));var s=b.event,t=b.event.handle?"handle":"dispatch",u;s.special.smartresize={setup:function(){b(this).bind("resize",s.special.smartresize.handler)},teardown:function(){b(this).unbind("resize",s.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize",u&&clearTimeout(u),u=setTimeout(function(){s[t].apply(c,d)},b==="execAsap"?0:100)}},b.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])},b.Isotope=function(a,c,d){this.element=b(c),this._create(a),this._init(d)};var v=["width","height"],w=b(a);b.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},b.Isotope.prototype={_create:function(a){this.options=b.extend({},b.Isotope.settings,a),this.styleQueue=[],this.elemCount=0;var c=this.element[0].style;this.originalStyle={};var d=v.slice(0);for(var e in this.options.containerStyle)d.push(e);for(var f=0,g=d.length;f<g;f++)e=d[f],this.originalStyle[e]=c[e]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var h={"original-order":function(a,b){return b.elemCount++,b.elemCount},random:function(){return Math.random()}};this.options.getSortData=b.extend(this.options.getSortData,h),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var i=this;setTimeout(function(){i.element.addClass(i.options.containerClass)},0),this.options.resizable&&w.bind("smartresize.isotope",function(){i.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(a){var b=this.options.itemSelector,c=b?a.filter(b).add(a.find(b)):a,d={position:"absolute"};return c=c.filter(function(a,b){return b.nodeType===1}),this.usingTransforms&&(d.left=0,d.top=0),c.css(d).addClass(this.options.itemClass),this.updateSortData(c,!0),c},_init:function(a){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(a)},option:function(a){if(b.isPlainObject(a)){this.options=b.extend(!0,this.options,a);var c;for(var d in a)c="_update"+f(d),this[c]&&this[c]()}},_updateAnimationEngine:function(){var a=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,""),b;switch(a){case"css":case"none":b=!1;break;case"jquery":b=!0;break;default:b=!e.csstransitions}this.isUsingJQueryAnimation=b,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var a=this.usingTransforms=this.options.transformsEnabled&&e.csstransforms&&e.csstransitions&&!this.isUsingJQueryAnimation;a||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=a?this._translate:this._positionAbs},_filter:function(a){var b=this.options.filter===""?"*":this.options.filter;if(!b)return a;var c=this.options.hiddenClass,d="."+c,e=a.filter(d),f=e;if(b!=="*"){f=e.filter(b);var g=a.not(d).not(b).addClass(c);this.styleQueue.push({$el:g,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:f,style:this.options.visibleStyle}),f.removeClass(c),a.filter(b)},updateSortData:function(a,c){var d=this,e=this.options.getSortData,f,g;a.each(function(){f=b(this),g={};for(var a in e)!c&&a==="original-order"?g[a]=b.data(this,"isotope-sort-data")[a]:g[a]=e[a](f,d);b.data(this,"isotope-sort-data",g)})},_sort:function(){var a=this.options.sortBy,b=this._getSorter,c=this.options.sortAscending?1:-1,d=function(d,e){var f=b(d,a),g=b(e,a);return f===g&&a!=="original-order"&&(f=b(d,"original-order"),g=b(e,"original-order")),(f>g?1:f<g?-1:0)*c};this.$filteredAtoms.sort(d)},_getSorter:function(a,c){return b.data(a,"isotope-sort-data")[c]},_translate:function(a,b){return{translate:[a,b]}},_positionAbs:function(a,b){return{left:a,top:b}},_pushPosition:function(a,b,c){b=Math.round(b+this.offset.left),c=Math.round(c+this.offset.top);var d=this.getPositionStyles(b,c);this.styleQueue.push({$el:a,style:d}),this.options.itemPositionDataEnabled&&a.data("isotope-item-position",{x:b,y:c})},layout:function(a,b){var c=this.options.layoutMode;this["_"+c+"Layout"](a);if(this.options.resizesContainer){var d=this["_"+c+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:d})}this._processStyleQueue(a,b),this.isLaidOut=!0},_processStyleQueue:function(a,c){var d=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",f=this.options.animationOptions,g=this.options.onLayout,h,i,j,k;i=function(a,b){b.$el[d](b.style,f)};if(this._isInserting&&this.isUsingJQueryAnimation)i=function(a,b){h=b.$el.hasClass("no-transition")?"css":d,b.$el[h](b.style,f)};else if(c||g||f.complete){var l=!1,m=[c,g,f.complete],n=this;j=!0,k=function(){if(l)return;var b;for(var c=0,d=m.length;c<d;c++)b=m[c],typeof b=="function"&&b.call(n.element,a,n);l=!0};if(this.isUsingJQueryAnimation&&d==="animate")f.complete=k,j=!1;else if(e.csstransitions){var o=0,p=this.styleQueue[0],s=p&&p.$el,t;while(!s||!s.length){t=this.styleQueue[o++];if(!t)return;s=t.$el}var u=parseFloat(getComputedStyle(s[0])[r]);u>0&&(i=function(a,b){b.$el[d](b.style,f).one(q,k)},j=!1)}}b.each(this.styleQueue,i),j&&k(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(a){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,a)},addItems:function(a,b){var c=this._getAtoms(a);this.$allAtoms=this.$allAtoms.add(c),b&&b(c)},insert:function(a,b){this.element.append(a);var c=this;this.addItems(a,function(a){var d=c._filter(a);c._addHideAppended(d),c._sort(),c.reLayout(),c._revealAppended(d,b)})},appended:function(a,b){var c=this;this.addItems(a,function(a){c._addHideAppended(a),c.layout(a),c._revealAppended(a,b)})},_addHideAppended:function(a){this.$filteredAtoms=this.$filteredAtoms.add(a),a.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:a,style:this.options.hiddenStyle})},_revealAppended:function(a,b){var c=this;setTimeout(function(){a.removeClass("no-transition"),c.styleQueue.push({$el:a,style:c.options.visibleStyle}),c._isInserting=!1,c._processStyleQueue(a,b)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(a,b){this.$allAtoms=this.$allAtoms.not(a),this.$filteredAtoms=this.$filteredAtoms.not(a);var c=this,d=function(){a.remove(),b&&b.call(c.element)};a.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:a,style:this.options.hiddenStyle}),this._sort(),this.reLayout(d)):d()},shuffle:function(a){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(a)},destroy:function(){var a=this.usingTransforms,b=this.options;this.$allAtoms.removeClass(b.hiddenClass+" "+b.itemClass).each(function(){var b=this.style;b.position="",b.top="",b.left="",b.opacity="",a&&(b[i]="")});var c=this.element[0].style;for(var d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".isotope").undelegate("."+b.hiddenClass,"click").removeClass(b.containerClass).removeData("isotope"),w.unbind(".isotope")},_getSegments:function(a){var b=this.options.layoutMode,c=a?"rowHeight":"columnWidth",d=a?"height":"width",e=a?"rows":"cols",g=this.element[d](),h,i=this.options[b]&&this.options[b][c]||this.$filteredAtoms["outer"+f(d)](!0)||g;h=Math.floor(g/i),h=Math.max(h,1),this[b][e]=h,this[b][c]=i},_checkIfSegmentsChanged:function(a){var b=this.options.layoutMode,c=a?"rows":"cols",d=this[b][c];return this._getSegments(a),this[b][c]!==d},_masonryReset:function(){this.masonry={},this._getSegments();var a=this.masonry.cols;this.masonry.colYs=[];while(a--)this.masonry.colYs.push(0)},_masonryLayout:function(a){var c=this,d=c.masonry;a.each(function(){var a=b(this),e=Math.ceil(a.outerWidth(!0)/d.columnWidth);e=Math.min(e,d.cols);if(e===1)c._masonryPlaceBrick(a,d.colYs);else{var f=d.cols+1-e,g=[],h,i;for(i=0;i<f;i++)h=d.colYs.slice(i,i+e),g[i]=Math.max.apply(Math,h);c._masonryPlaceBrick(a,g)}})},_masonryPlaceBrick:function(a,b){var c=Math.min.apply(Math,b),d=0;for(var e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}var g=this.masonry.columnWidth*d,h=c;this._pushPosition(a,g,h);var i=c+a.outerHeight(!0),j=this.masonry.cols+1-f;for(e=0;e<j;e++)this.masonry.colYs[d+e]=i},_masonryGetContainerSize:function(){var a=Math.max.apply(Math,this.masonry.colYs);return{height:a}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(a){var c=this,d=this.element.width(),e=this.fitRows;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);e.x!==0&&f+e.x>d&&(e.x=0,e.y=e.height),c._pushPosition(a,e.x,e.y),e.height=Math.max(e.y+g,e.height),e.x+=f})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(a){var c=this,d=this.cellsByRow;a.each(function(){var a=b(this),e=d.index%d.cols,f=Math.floor(d.index/d.cols),g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(a){var c=this;a.each(function(a){var d=b(this);c._pushPosition(d,0,c.straightDown.y),c.straightDown.y+=d.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var a=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(a--)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(a){var c=this,d=c.masonryHorizontal;a.each(function(){var a=b(this),e=Math.ceil(a.outerHeight(!0)/d.rowHeight);e=Math.min(e,d.rows);if(e===1)c._masonryHorizontalPlaceBrick(a,d.rowXs);else{var f=d.rows+1-e,g=[],h,i;for(i=0;i<f;i++)h=d.rowXs.slice(i,i+e),g[i]=Math.max.apply(Math,h);c._masonryHorizontalPlaceBrick(a,g)}})},_masonryHorizontalPlaceBrick:function(a,b){var c=Math.min.apply(Math,b),d=0;for(var e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}var g=c,h=this.masonryHorizontal.rowHeight*d;this._pushPosition(a,g,h);var i=c+a.outerWidth(!0),j=this.masonryHorizontal.rows+1-f;for(e=0;e<j;e++)this.masonryHorizontal.rowXs[d+e]=i},_masonryHorizontalGetContainerSize:function(){var a=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:a}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(a){var c=this,d=this.element.height(),e=this.fitColumns;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);e.y!==0&&g+e.y>d&&(e.x=e.width,e.y=0),c._pushPosition(a,e.x,e.y),e.width=Math.max(e.x+f,e.width),e.y+=g})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(a){var c=this,d=this.cellsByColumn;a.each(function(){var a=b(this),e=Math.floor(d.index/d.rows),f=d.index%d.rows,g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(a){var c=this;a.each(function(a){var d=b(this);c._pushPosition(d,c.straightAcross.x,0),c.straightAcross.x+=d.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},b.fn.imagesLoaded=function(a){function h(){a.call(c,d)}function i(a){var c=a.target;c.src!==f&&b.inArray(c,g)===-1&&(g.push(c),--e<=0&&(setTimeout(h),d.unbind(".imagesLoaded",i)))}var c=this,d=c.find("img").add(c.filter("img")),e=d.length,f="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",g=[];return e||h(),d.bind("load.imagesLoaded error.imagesLoaded",i).each(function(){var a=this.src;this.src=f,this.src=a}),c};var x=function(b){a.console&&a.console.error(b)};b.fn.isotope=function(a,c){if(typeof a=="string"){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var c=b.data(this,"isotope");if(!c){x("cannot call methods on isotope prior to initialization; attempted to call method '"+a+"'");return}if(!b.isFunction(c[a])||a.charAt(0)==="_"){x("no such method '"+a+"' for isotope instance");return}c[a].apply(c,d)})}else this.each(function(){var d=b.data(this,"isotope");d?(d.option(a),d._init(c)):b.data(this,"isotope",new b.Isotope(a,this,c))});return this}})(window,jQuery);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/themes/base/javascript/gdlr-script.js */
try{
(function($){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){var gdlr_touch_device=!0}else{var gdlr_touch_device=!1}
if(window.innerWidth<767){var gdlr_is_mobile=!0}else{var gdlr_is_mobile=!1}
$.extend({getUrlVars:function(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1]}
return vars},getUrlVar:function(name){return $.getUrlVars()[name]}});$.fn.gdlr_flexslider=function(){if(typeof($.fn.flexslider)=='function'){var n=0;$(this).each(function(){n++;var flex_attr={animation:'fade',animationLoop:!1,slideshow:!1,prevText:'<i class="icon-angle-left" ></i>',nextText:'<i class="icon-angle-right" ></i>',useCSS:!1,};if($(this).attr('data-pausetime')){flex_attr.slideshowSpeed=parseInt($(this).attr('data-pausetime'))}
if($(this).attr('data-slidespeed')){flex_attr.animationSpeed=parseInt($(this).attr('data-slidespeed'))}
if($(this).attr('data-type')=='carousel'){flex_attr.move=1;flex_attr.animation='slide';if($(this).closest('.gdlr-item-no-space').length>0){flex_attr.itemWidth=$(this).width()/parseInt($(this).attr('data-columns'));flex_attr.itemMargin=0}else{flex_attr.itemWidth=(($(this).width()+30)/parseInt($(this).attr('data-columns')))-30;flex_attr.itemMargin=30}}else{if($(this).attr('data-effect')){flex_attr.animation=$(this).attr('data-effect')}}
if($(this).attr('data-columns')){flex_attr.minItems=parseInt($(this).attr('data-columns'));flex_attr.maxItems=parseInt($(this).attr('data-columns'))}
if($(this).attr('data-nav-container')){var flex_parent=$(this).parents('.'+$(this).attr('data-nav-container')).prev('.gdlr-nav-container');if(flex_parent.find('.gdlr-flex-prev').length>0||flex_parent.find('.gdlr-flex-next').length>0){flex_attr.controlNav=!1;flex_attr.directionNav=!1;flex_attr.start=function(slider){flex_parent.find('.gdlr-flex-prev').css("visibility","hidden");flex_parent.find('.gdlr-flex-next').click(function(){slider.flexAnimate(slider.getTarget("next"),!0);flex_parent.find('.gdlr-flex-prev').css("visibility","visible")});flex_parent.find('.gdlr-flex-prev').click(function(){slider.flexAnimate(slider.getTarget("prev"),!0)})}
flex_attr.end=function(slider){flex_parent.find('.gdlr-flex-next').css("visibility","hidden");flex_parent.find('.gdlr-flex-prev').click(function(){slider.flexAnimate(slider.getTarget("prev"),!0);flex_parent.find('.gdlr-flex-next').css("visibility","visible")});flex_parent.find('.gdlr-flex-next').click(function(){slider.flexAnimate(slider.getTarget("next"),!0)})}
flex_attr.after=function(slider){if(slider.currentSlide==slider.count-slider.visible){flex_parent.find('.gdlr-flex-next').css("visibility","hidden");flex_parent.find('.gdlr-flex-prev').css("visibility","visible")}
if(slider.currentSlide==0){flex_parent.find('.gdlr-flex-prev').css("visibility","hidden");flex_parent.find('.gdlr-flex-next').css("visibility","visible")}}}else{flex_attr.controlNav=!1;flex_attr.controlsContainer=flex_parent.find('.nav-container')}}else if($(this).find('.gdlr-flex-prev').length>0||$(this).find('.gdlr-flex-next').length>0){var flex_parent=$(this);flex_attr.directionNav=!1;flex_attr.start=function(slider){flex_parent.find('.gdlr-flex-next').click(function(){slider.flexAnimate(slider.getTarget("next"),!0);return!1});flex_parent.find('.gdlr-flex-prev').click(function(){slider.flexAnimate(slider.getTarget("prev"),!0);return!1})}}
$(this).flexslider(flex_attr)})}}
$.fn.gdlr_nivoslider=function(){if(typeof($.fn.nivoSlider)=='function'){$(this).each(function(){var nivo_attr={};if($(this).attr('data-pausetime')){nivo_attr.pauseTime=parseInt($(this).attr('data-pausetime'))}
if($(this).attr('data-slidespeed')){nivo_attr.animSpeed=parseInt($(this).attr('data-slidespeed'))}
if($(this).attr('data-effect')){nivo_attr.effect=$(this).attr('data-effect')}
$(this).nivoSlider(nivo_attr)})}}
$.fn.gdlr_isotope=function(){if(typeof($.fn.isotope)=='function'){$(this).each(function(){var layout=($(this).attr('data-layout'))?$(this).attr('data-layout'):'fitRows';if(layout=='fitRows')return;var isotope_element=$(this);isotope_element.children('.clear').remove();isotope_element.isotope({layoutMode:layout});$(window).resize(function(){isotope_element.isotope()})})}};$.fn.gdlr_fancybox=function(){if(typeof($.fn.fancybox)=='function'){var fancybox_attr={nextMethod:'resizeIn',nextSpeed:250,prevMethod:!1,prevSpeed:250,titlePosition:'inside',titleShow:!0,helpers:{media:{}}};if(typeof($.fancybox.helpers.thumbs)=='object'){fancybox_attr.helpers.thumbs={width:50,height:50}}
$(this).fancybox(fancybox_attr)}}
$.fn.gdlr_fluid_video=function(){$(this).find('iframe[src^="https://www.youtube.com"], iframe[src^="//www.youtube.com"],'+'iframe[src^="https://player.vimeo.com"], iframe[src^="//player.vimeo.com"]').each(function(){if(($(this).is('embed')&&$(this).parent('object').length)||$(this).parent('.fluid-width-video-wrapper').length){return}
if(!$(this).attr('id')){$(this).attr('id','gdlr-video-'+Math.floor(Math.random()*999999))}
if($(this).closest('.ls-container').length<=0){var ratio=$(this).height()/$(this).width();$(this).removeAttr('height').removeAttr('width');$(this).wrap('<div class="gdlr-fluid-video-wrapper"></div>').parent().css('padding-top',(ratio*100)+"%")}})}
$.fn.gdlr_pie_chart=function(){if(typeof($.fn.easyPieChart)=='function'){$(this).each(function(){var gdlr_chart=$(this);$(this).easyPieChart({animate:1200,lineWidth:gdlr_chart.attr('data-linewidth')?parseInt(gdlr_chart.attr('data-linewidth')):8,size:gdlr_chart.attr('data-size')?parseInt(gdlr_chart.attr('data-size')):155,barColor:gdlr_chart.attr('data-color')?gdlr_chart.attr('data-color'):'#a9e16e',trackColor:gdlr_chart.attr('data-bg-color')?gdlr_chart.attr('data-bg-color'):'#f2f2f2',backgroundColor:gdlr_chart.attr('data-background'),scaleColor:!1,lineCap:'square'});function limit_gdlr_chart_size(){if(gdlr_chart.parent().width()<parseInt(gdlr_chart.attr('data-size'))){var max_width=gdlr_chart.parent().width()+'px';gdlr_chart.css({'max-width':max_width,'max-height':max_width})}}
limit_gdlr_chart_size();$(window).resize(function(){limit_gdlr_chart_size()})})}}
$(document).ready(function(){$('.gdlr-accordion-item').each(function(){var multiple_tab=$(this).hasClass('gdlr-multiple-tab');$(this).children('.accordion-tab').children('.accordion-title').click(function(){var current_tab=$(this).parent();if(current_tab.hasClass('active')){$(this).children('i').removeClass('icon-minus').addClass('icon-plus');$(this).siblings('.accordion-content').slideUp(function(){current_tab.removeClass('active')})}else{$(this).children('i').removeClass('icon-plus').addClass('icon-minus');$(this).siblings('.accordion-content').slideDown(function(){current_tab.addClass('active')})}
if(!multiple_tab){current_tab.siblings().children('.accordion-title').children('i').removeClass('icon-minus').addClass('icon-plus');current_tab.siblings().children('.accordion-content').slideUp(function(){$(this).parent().removeClass('active')})}})});$('.tab-title-wrapper').children().click(function(){$(this).addClass('active');$(this).siblings().removeClass('active');var selected_index=$(this).index()+1;$(this).parent().siblings('.tab-content-wrapper').children(':nth-child('+selected_index+')').each(function(){$(this).siblings().removeClass('active').hide();$(this).fadeIn(function(){$(this).addClass('active')})})});var inital_tab=$.getUrlVar('tab');if(inital_tab){$('#'+inital_tab.replace(',',', #')).each(function(){$(this).trigger('click')})}
$('.gdlr-code-item .gdlr-code-title').click(function(){var parent=$(this).parent();if(parent.hasClass('active')){$(this).children('i').removeClass('icon-minus').addClass('icon-plus');$(this).siblings('.gdlr-code-content').slideUp(function(){parent.removeClass('active')})}else{$(this).children('i').removeClass('icon-plus').addClass('icon-minus');$(this).siblings('.gdlr-code-content').slideDown(function(){parent.addClass('active')})}});$('.gdlr-parallax-wrapper').each(function(){if($(this).hasClass('gdlr-background-image')){var parallax_section=$(this);var parallax_speed=parseFloat(parallax_section.attr('data-bgspeed'));if(parallax_speed==0||gdlr_touch_device)return;if(parallax_speed==-1){parallax_section.css('background-attachment','fixed');parallax_section.css('background-position','center center');return}
$(window).scroll(function(){if(($(window).scrollTop()+$(window).height()>parallax_section.offset().top)&&($(window).scrollTop()<parallax_section.offset().top+parallax_section.outerHeight())){var scroll_pos=0;if($(window).height()>parallax_section.offset().top){scroll_pos=$(window).scrollTop()}else{scroll_pos=$(window).scrollTop()+$(window).height()-parallax_section.offset().top}
parallax_section.css('background-position','center '+(-scroll_pos*parallax_speed)+'px')}})}else if($(this).hasClass('gdlr-background-video')){if(typeof($.fn.mb_YTPlayer)=='function'){$(this).children('.gdlr-bg-player').mb_YTPlayer()}}else{return}});$('body').gdlr_fluid_video();if(typeof($.fn.superfish)=='function'){$('#gdlr-main-navigation .sf-mega > ul').each(function(){$(this).children('li').each(function(){var current_item=$(this);current_item.replaceWith($('<div />').addClass('sf-mega-section').addClass(current_item.attr('data-column')).attr('data-size',current_item.attr('data-size')).html($('<div />').addClass('sf-mega-section-inner').addClass(current_item.attr('class')).attr('id',current_item.attr('id')).html(current_item.html())))});$(this).replaceWith(this.innerHTML)});$('#gdlr-main-navigation .sf-mega').each(function(){var sf_mega=$(this);$(this).show();var row=0;var column=0;var max_height=0;sf_mega.children('.sf-mega-section').each(function(){if(column%60==0){if(row!=0){sf_mega.children('[data-row="'+row+'"]').children('.sf-mega-section-inner').height(max_height-50);max_height=0}
row++;$(this).addClass('first-column')}
$(this).attr('data-row',row);column+=eval('60*'+$(this).attr('data-size'));if($(this).height()>max_height){max_height=$(this).height()}});sf_mega.children('[data-row="'+row+'"]').children('.sf-mega-section-inner').height(max_height-50)});$('#gdlr-main-navigation').superfish({delay:500,speed:'fast',animation:{opacity:'show',height:'show'}});$('#gdlr-top-navigation').superfish({delay:500,speed:'fast',animation:{opacity:'show',height:'show'}})}
if(typeof($.fn.dlmenu)=='function'){$('#gdlr-responsive-navigation').each(function(){$(this).find('.dl-submenu').each(function(){if($(this).siblings('a').attr('href')&&$(this).siblings('a').attr('href')!='#'){var parent_nav=$('<li class="menu-item gdlr-parent-menu"></li>');parent_nav.append($(this).siblings('a').clone());$(this).prepend(parent_nav)}});$(this).dlmenu()})}
$('.gdlr-gallery-thumbnail').each(function(){var thumbnail_container=$(this).children('.gdlr-gallery-thumbnail-container');$(this).find('.gallery-item').click(function(){var selected_slide=thumbnail_container.children('[data-id="'+$(this).attr('data-id')+'"]');if(selected_slide.css('display')=='block')return!1;var image_width=selected_slide.children('img').attr('width');var image_ratio=selected_slide.children('img').attr('height')/image_width;var temp_height=image_ratio*Math.min(thumbnail_container.width(),image_width);thumbnail_container.animate({'height':temp_height});selected_slide.fadeIn().siblings().hide();return!1});$(window).resize(function(){thumbnail_container.css('height','auto')})});$('a[href$=".jpg"], a[href$=".png"], a[href$=".gif"]').not('[data-rel="fancybox"]').attr('data-rel','fancybox');$('[data-rel="fancybox"]').gdlr_fancybox();$('.gdlr-image-link-shortcode').hover(function(){$(this).find('.gdlr-image-link-overlay').animate({opacity:0.8},150);$(this).find('.gdlr-image-link-icon').animate({opacity:1},150)},function(){$(this).find('.gdlr-image-link-overlay').animate({opacity:0},150);$(this).find('.gdlr-image-link-icon').animate({opacity:0},150)});$('.gdlr-personnel-item.round-style .personnel-item').each(function(){var current_item=$(this);function gdlr_set_round_personnel_height(){current_item.find('.personnel-item-inner').each(function(){$(this).css('margin-top',-($(this).height()/2))})}
gdlr_set_round_personnel_height();$(window).resize(function(){gdlr_set_round_personnel_height()})});$('.gdlr-personnel-item.round-style .personnel-item').hover(function(){$(this).find('.personnel-author-image').animate({'opacity':0.05},200);$(this).find('.personnel-item-inner').animate({'opacity':1},200)},function(){$(this).find('.personnel-author-image').animate({'opacity':1},200);$(this).find('.personnel-item-inner').animate({'opacity':0},200)});$('.gdlr-price-table-item').each(function(){var price_table=$(this);function set_price_table_height(){var max_height=0;var price_content=price_table.find('.price-content');price_content.css('height','auto');price_content.each(function(){if(max_height<$(this).height()){max_height=$(this).height()}});price_content.css('height',max_height)}
set_price_table_height()
$(window).resize(function(){set_price_table_height()})});$('form').submit(function(){var has_default=!1;$(this).find('input[data-default]').each(function(){if($(this).is('#url')){if($(this).val()==$(this).attr('data-default'))$(this).val('')}else if($(this).attr('data-name')){if($(this).val()==$(this).attr('data-default'))has_default=!0}});if(has_default)return!1});$('input[data-default]').each(function(){var default_value=$(this).attr("data-default");$(this).val(default_value);$('.body-wrapper').on('blur',this,function(){if($(this).val()===""){$(this).val(default_value)}}).on('focus',this,function(){if($(this).val()===default_value){$(this).val("")}})});$('.gdlr-paypal-form').each(function(){$(this).find('.gdlr-amount-button').click(function(){var amount=$(this).attr('data-val');$(this).addClass('active').siblings().removeClass('active');$(this).parent('.gdlr-paypal-amount-wrapper').siblings('[name="amount"]').val(amount)});$(this).find('.custom-amount').change(function(){var amount=parseInt($(this).val());$(this).siblings().removeClass('active');$(this).parent('.gdlr-paypal-amount-wrapper').siblings('[name="amount"]').val(amount)});$(this).submit(function(e){var valid=!0;var gdlr_form=$(this);$(this).find('.gdlr-require').each(function(){if(valid&&$(this).val()==''){gdlr_form.children('.gdlr-notice.require-field').slideDown(200).siblings('.gdlr-notice').slideUp(200);valid=!1}});$(this).find('.gdlr-email').each(function(){var re=/\S+@\S+/;if(valid&&!re.test($(this).val())){gdlr_form.children('.gdlr-notice.email-invalid').slideDown(200).siblings('.gdlr-notice').slideUp(200);valid=!1}});if(valid){gdlr_form.children('.gdlr-notice').slideUp(200);gdlr_form.children('.gdlr-paypal-loader').slideDown(200);var ajax_url=gdlr_form.attr('data-ajax');$.ajax({type:'POST',url:ajax_url,data:jQuery(this).serialize(),dataType:'json',error:function(a,b,c){console.log(a,b,c)},success:function(data){gdlr_form.children('.gdlr-notice.alert-message').html(data.message).slideDown(200).addClass('gdlr-'+data.status);gdlr_form.children('.gdlr-paypal-loader').slideUp(200);if(data.status=='success'){gdlr_form.children('[name="item_number"]').val(data.item_number);gdlr_form[0].submit()}}})}
e.preventDefault();e.returnValue=!1})});$('.nivoSlider').gdlr_nivoslider();$('.flexslider').gdlr_flexslider()});$(window).load(function(){$('.gdlr-isotope').gdlr_isotope();if(!gdlr_touch_device&&!gdlr_is_mobile){$('.body-wrapper.float-menu').each(function(){var sub_area=$('.gdlr-navigation-substitute');if(sub_area!==undefined&&sub_area.offset()!==undefined){var nav_area=sub_area.children('.gdlr-navigation-wrapper');$(window).scroll(function(){if($(this).scrollTop()>sub_area.offset().top-parseInt($('html').css('margin-top'))&&$(this).width()>959){if(!nav_area.hasClass('gdlr-fixed-menu')){nav_area.addClass('gdlr-fixed-menu')}}else{if(nav_area.hasClass('gdlr-fixed-menu')){nav_area.removeClass('gdlr-fixed-menu')}}})}})}
$(window).trigger('resize');$(window).trigger('scroll')})})(jQuery);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/plugins/3d-flipbook-dflip-lite/assets/js/dflip.min.js */
try{
"use strict";var DFLIP=DFLIP||{};var PRESENTATION=DFLIP;(function dFlip(DFLIP,$){DFLIP.version="1.7.3.8";DFLIP.PAGE_MODE={SINGLE:1,DOUBLE:2,AUTO:null};DFLIP.SINGLE_PAGE_MODE={ZOOM:1,BOOKLET:2,AUTO:null};DFLIP.CONTROLSPOSITION={HIDDEN:"hide",TOP:"top",BOTTOM:"bottom"};DFLIP.DIRECTION={LTR:1,RTL:2};DFLIP.LINK_TARGET={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};DFLIP.CORNERS={TL:"tl",TR:"tr",BL:"bl",BR:"br",L:"l",R:"r",NONE:null};DFLIP.SOURCE_TYPE={IMAGE:"image",PDF:"pdf",HTML:"html"};DFLIP.DISPLAY_TYPE={WEBGL:"3D",HTML:"2D"};DFLIP.PAGE_SIZE={AUTO:0,SINGLE:1,DOUBLEINTERNAL:2};var defaults=DFLIP.defaults={webgl:true,webglShadow:true,soundEnable:true,search:false,height:"auto",autoEnableOutline:false,autoEnableThumbnail:false,overwritePDFOutline:false,enableDownload:true,duration:800,direction:DFLIP.DIRECTION.LTR,pageMode:DFLIP.PAGE_MODE.AUTO,singlePageMode:DFLIP.SINGLE_PAGE_MODE.AUTO,backgroundColor:"#fff",forceFit:true,transparent:false,hard:"none",openPage:1,annotationClass:"",autoPlay:false,autoPlayDuration:5e3,autoPlayStart:false,maxTextureSize:1600,minTextureSize:256,rangeChunkSize:524288,icons:{altnext:"ti-angle-right",altprev:"ti-angle-left",next:"ti-angle-right",prev:"ti-angle-left",end:"ti-angle-double-right",start:"ti-angle-double-left",share:"ti-sharethis",help:"ti-help-alt",more:"ti-more-alt",download:"ti-download",zoomin:"ti-zoom-in",zoomout:"ti-zoom-out",fullscreen:"ti-fullscreen",fitscreen:"ti-arrows-corner",thumbnail:"ti-layout-grid2",outline:"ti-menu-alt",close:"ti-close",search:"ti-search",doublepage:"ti-book",singlepage:"ti-file",sound:"ti-volume",facebook:"ti-facebook",google:"ti-google",twitter:"ti-twitter-alt",mail:"ti-email",play:"ti-control-play",pause:"ti-control-pause"},text:{toggleSound:"Turn on/off Sound",toggleThumbnails:"Toggle Thumbnails",toggleOutline:"Toggle Outline/Bookmark",previousPage:"Previous Page",nextPage:"Next Page",toggleFullscreen:"Toggle Fullscreen",zoomIn:"Zoom In",zoomOut:"Zoom Out",toggleHelp:"Toggle Help",singlePageMode:"Single Page Mode",doublePageMode:"Double Page Mode",downloadPDFFile:"Download PDF File",gotoFirstPage:"Goto First Page",gotoLastPage:"Goto Last Page",play:"Start AutoPlay",pause:"Pause AutoPlay",share:"Share",mailSubject:"I wanted you to see this FlipBook",mailBody:"Check out this site {{url}}",loading:"Loading"},allControls:"altPrev,pageNumber,altNext,play,outline,thumbnail,zoomIn,zoomOut,fullScreen,share,download,search,more,pageMode,startPage,endPage,sound",moreControls:"download,pageMode,startPage,endPage,sound",hideControls:"",controlsPosition:DFLIP.CONTROLSPOSITION.BOTTOM,paddingTop:30,paddingLeft:20,paddingRight:20,paddingBottom:30,enableAnalytics:false,scrollWheel:true,onCreate:function(flipBook){},onCreateUI:function(flipBook){},onFlip:function(flipBook){},beforeFlip:function(flipBook){},onReady:function(flipBook){},zoomRatio:1.5,pageSize:DFLIP.PAGE_SIZE.AUTO,pdfjsSrc:"js/libs/pdf.min.js",pdfjsCompatibilitySrc:"js/libs/compatibility.js",pdfjsWorkerSrc:"js/libs/pdf.worker.min.js",threejsSrc:"js/libs/three.min.js",mockupjsSrc:"js/libs/mockup.min.js",soundFile:"sound/turn2.mp3",imagesLocation:"images",imageResourcesPath:"images/pdfjs/",cMapUrl:"cmaps/",enableDebugLog:false,canvasToBlob:false,enableAnnotation:true,pdfRenderQuality:.9,textureLoadFallback:"blank",stiffness:3,backgroundImage:"",pageRatio:null,pixelRatio:window.devicePixelRatio||1,thumbElement:"div",spotLightIntensity:.22,ambientLightColor:"#fff",ambientLightIntensity:.8,shadowOpacity:.15,linkTarget:DFLIP.LINK_TARGET.BLANK,sharePrefix:"flipbook-"};var has3d="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,hasMouse="onmousedown"in window,hasTouch="ontouchstart"in window;var userAgent=navigator.userAgent;var utils=DFLIP.utils={drag:{left:0,right:1,none:-1},mouseEvents:hasMouse?{type:"mouse",start:"mousedown",move:"mousemove",end:"mouseup"}:{type:"touch",start:"touchstart",move:"touchmove",end:"touchend"},html:{div:"<div/>",img:"<img/>",a:"<a>",input:"<input type='text'/>"},getSharePrefix:function(){var prefixes=utils.getSharePrefixes();return prefixes[0]},getSharePrefixes:function(){var prefixes=(DFLIP.defaults.sharePrefix+",dflip-,flipbook-,dearflip-").split(",").filter(function(e){return e});return prefixes},toRad:function(deg){return deg*Math.PI/180},isset:function(check,fallback){return check==null?fallback:check},isnull:function(variable){return variable==null||variable==null},toDeg:function(rad){return rad*180/Math.PI},transition:function(hasTransition,duration){return hasTransition?duration/1e3+"s ease-out":"0s none"},hasCompatibility:function(){var compatible=false;if(window.dFlipLocation!=null){if(window.dFlipLocation.indexOf("lip-lit")>0)compatible=true}return compatible},scrollIntoView:function(element,reference,align){reference=reference||element.parentNode;reference.scrollTop=element.offsetTop-reference.offsetTop+(align===false?element.offsetHeight-reference.offsetHeight:0);reference.scrollLeft=element.offsetLeft-reference.offsetLeft},display:function(hasDisplay){return hasDisplay?"block":"none"},resetTranslate:function(){return translateStr(0,0)},translateStr:function(x,y){return has3d?" translate3d("+x+"px,"+y+"px, 0px) ":" translate("+x+"px, "+y+"px) "},httpsCorrection:function(url){var location=window.location;if(location.href.indexOf("https://")>-1&&url.indexOf(location.hostname)>-1){url=url.replace("https://","https://")}if(location.href.indexOf("https://")>-1&&url.indexOf(location.hostname)>-1){url=url.replace("https://","https://")}return url},resetBoxShadow:function(){return"rgba(0, 0, 0, 0) 0px 0px 20px"},rotateStr:function(deg){return" rotateZ("+deg+"deg) "},bg:function(src){return"#fff"+bgImage(src)},bgImage:function(src){return src==null||src=="blank"?"":" url("+src+")"},src:function(src){return src!=null?""+src+"":""},limitAt:function(x,min,max){return x<min?min:x>max?max:x},distOrigin:function(x,y){return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))},distPoints:function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},calculateScale:function(startTouches,endTouches){var startDistance=distPoints(startTouches[0].x,startTouches[0].y,startTouches[1].x,startTouches[1].y),endDistance=distPoints(endTouches[0].x,endTouches[0].y,endTouches[1].x,endTouches[1].y);return endDistance/startDistance},getVectorAvg:function(vectors){return{x:vectors.map(function(v){return v.x}).reduce(utils.sum)/vectors.length,y:vectors.map(function(v){return v.y}).reduce(utils.sum)/vectors.length}},sum:function(a,b){return a+b},getTouches:function(event,position){position=position||{left:0,top:0};return Array.prototype.slice.call(event.touches).map(function(touch){return{x:touch.pageX-position.left,y:touch.pageY-position.top}})},angleByDistance:function(distance,fullWidth){var h=fullWidth/2;var d=limitAt(distance,0,fullWidth);return d<h?toDeg(Math.asin(d/h)):90+toDeg(Math.asin((d-h)/h))},log:function(args){if(defaults.enableDebugLog==true&&window.console)console.log(args)},lowerPowerOfTwo:function(value){return Math.pow(2,Math.floor(Math.log(value)/Math.LN2))},nearestPowerOfTwo:function(value,max){return Math.min(max||2048,Math.pow(2,Math.ceil(Math.log(value)/Math.LN2)))},zoomStops:function(value,zoomRatio,ceil,min,max){if(min==null)min=256;if(max==null)max=2048;var factor=Math.log(value/min)/Math.log(zoomRatio);return min*Math.pow(zoomRatio,ceil==null?Math.round(factor):ceil==true?Math.ceil(factor):Math.floor(factor))},extendOptions:function(defaults,options){return $.extend(true,{},defaults,options)},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},hasFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},getBasePage:function(pageNumber){return Math.floor(pageNumber/2)*2},loadResources:function loadResources(resourceTag,src,callback){var doc=document,element=doc.createElement(resourceTag),refElement=doc.getElementsByTagName(resourceTag)[0];element.async=true;if(callback){element.addEventListener("load",function(e){callback(null,e)},false)}element.src=src;refElement.parentNode.insertBefore(element,refElement)},getScriptCallbacks:[],getScript:function(source,callback,errorCallback){var _callbacks=utils.getScriptCallbacks[source],script;function load(_,isAbort){if(script!=null){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;script=null;script=null;if(!isAbort){for(var i=0;i<_callbacks.length;i++){if(_callbacks[i])_callbacks[i]();_callbacks[i]=null}errorCallback=null}}}}if($("script[src='"+source+"']").length===0){_callbacks=utils.getScriptCallbacks[source]=[];_callbacks.push(callback);script=document.createElement("script");var prior=document.body.getElementsByTagName("script")[0];script.async=1;script.setAttribute("data-cfasync",false);if(prior!=null){prior.parentNode.insertBefore(script,prior);prior=null}else{document.body.appendChild(script)}script.addEventListener("load",load,false);script.addEventListener("readystatechange",load,false);script.addEventListener("complete",load,false);if(errorCallback){script.addEventListener("error",errorCallback,false)}script.src=source+(prefix.dom=="MS"?"?"+Math.random(1):"")}else{_callbacks.push(callback)}},isHardPage:function(config,pageNumber,pageCount,isBooklet){if(config!=null){if(config=="cover"){return pageNumber==0||isBooklet&&pageNumber==1||pageNumber==Math.ceil(pageCount/(isBooklet?1:2))-(isBooklet?0:1)}else if(config=="all"){return true}else{var baseTest=(","+config+",").indexOf(","+(pageNumber*2+1)+",")>-1;var nextTest=(","+config+",").indexOf(","+(pageNumber*2+2)+",")>-1;return baseTest||nextTest}}return false},fixMouseEvent:function(event){if(event){var originalEvent=event.originalEvent||event;if(originalEvent.changedTouches&&originalEvent.changedTouches.length>0){var _event=$.event.fix(event);var touch=originalEvent.changedTouches[0];_event.clientX=touch.clientX;_event.clientY=touch.clientY;_event.pageX=touch.pageX;_event.touches=originalEvent.touches;_event.pageY=touch.pageY;_event.movementX=touch.movementX;_event.movementY=touch.movementY;return _event}else{return event}}else{return event}},hasWebgl:function(){try{var canvas=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(canvas.getContext("webgl")||canvas.getContext("experimental-webgl")))}catch(e){return false}}(),isBookletMode:function(book){return book.pageMode==DFLIP.PAGE_MODE.SINGLE&&book.singlePageMode==DFLIP.SINGLE_PAGE_MODE.BOOKLET},isRTLMode:function(book){return book.direction==DFLIP.DIRECTION.RTL},isMobile:function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(userAgent||navigator.vendor||window.opera);return check}(),isIOS:/(iPad|iPhone|iPod)/g.test(userAgent),isSafari:/constructor/i.test(window.HTMLElement)||function(p){return p.toString()==="[object SafariRemoteNotification]"}(!window["safari"]||safari.pushNotification),prefix:function(){var styles=window.getComputedStyle(document.documentElement,""),pre=Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/)[1],dom="WebKit|Moz|MS".match(new RegExp("("+pre+")","i"))[1];return{dom:dom,lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}}(),canSupport3D:function(){var canSupport=true;try{if(userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){canSupport=false;console.log("Proper Support for 3D not detected for IE!")}else if(isSafari&&!isIOS){canSupport=false;console.log("Proper Support for 3D not detected for IOS!")}else{var android=userAgent.toString().toLowerCase().match(/android\s([0-9\.]*)/i);android=android?android[1]:undefined;if(android){android=parseInt(android,10);if(!isNaN(android)&&android<8){canSupport=false;console.log("Proper Support for 3D not detected for Android below 8.0!")}}}}catch(error){}return canSupport},__extends:function(child,parent){for(var key in parent)if(parent.hasOwnProperty(key))child[key]=parent[key];function Ctor(){this.constructor=child}Ctor.prototype=parent.prototype;child.prototype=new Ctor;child.__super=parent.prototype;return child}};var SOURCE_TYPE=DFLIP.SOURCE_TYPE,DISPLAY_TYPE=DFLIP.DISPLAY_TYPE,drag=utils.drag,mouseEvents=utils.mouseEvents,html=utils.html,isset=utils.isset,isnull=utils.isnull,toRad=utils.toRad,toDeg=utils.toDeg,transition=utils.transition,translateStr=utils.translateStr,resetBoxShadow=utils.resetBoxShadow,rotateStr=utils.rotateStr,bg=utils.bg,bgImage=utils.bgImage,src=utils.src,limitAt=utils.limitAt,distOrigin=utils.distOrigin,distPoints=utils.distPoints,angleByDistance=utils.angleByDistance,log=utils.log,nearestPowerOfTwo=utils.nearestPowerOfTwo,extendOptions=utils.extendOptions,getBasePage=utils.getBasePage,getScript=utils.getScript,fixMouseEvent=utils.fixMouseEvent,prefix=utils.prefix,isBookletMode=utils.isBookletMode,isRTLMode=utils.isRTLMode,isMobile=utils.isMobile,hasWebgl=utils.hasWebgl,isSafari=utils.isSafari,isIOS=utils.isIOS,__extends=utils.__extends;(function checkSetPresenceInImageData(){if(window.CanvasPixelArray){if(typeof window.CanvasPixelArray.prototype.set!=="function"){window.CanvasPixelArray.prototype.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i]}}}}else{var polyfill=false,versionMatch;if(isSafari){versionMatch=userAgent.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//);polyfill=versionMatch&&parseInt(versionMatch[1])<6}if(polyfill){var contextPrototype=window.CanvasRenderingContext2D.prototype;var createImageData=contextPrototype.createImageData;contextPrototype.createImageData=function(w,h){var imageData=createImageData.call(this,w,h);imageData.data.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i]}};return imageData};contextPrototype=null}}})();(function checkRequestAnimationFrame(){function fakeRequestAnimationFrame(callback){window.setTimeout(callback,20)}if("requestAnimationFrame"in window){return}window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||fakeRequestAnimationFrame})();(function checkTypedArrayCompatibility(){if(typeof Uint8Array!=="undefined"){if(typeof Uint8Array.prototype.subarray==="undefined"){Uint8Array.prototype.subarray=function subarray(start,end){return new Uint8Array(this.slice(start,end))};Float32Array.prototype.subarray=function subarray(start,end){return new Float32Array(this.slice(start,end))}}if(typeof Float64Array==="undefined"){window.Float64Array=Float32Array}return}function subarray(start,end){return new TypedArray(this.slice(start,end))}function setArrayOffset(array,offset){if(arguments.length<2){offset=0}for(var i=0,n=array.length;i<n;++i,++offset){this[offset]=array[i]&255}}function TypedArray(arg1){var result,i,n;if(typeof arg1==="number"){result=[];for(i=0;i<arg1;++i){result[i]=0}}else if("slice"in arg1){result=arg1.slice(0)}else{result=[];for(i=0,n=arg1.length;i<n;++i){result[i]=arg1[i]}}result.subarray=subarray;result.buffer=result;result.byteLength=result.length;result.set=setArrayOffset;if(typeof arg1==="object"&&arg1.buffer){result.buffer=arg1.buffer}return result}window.Uint8Array=TypedArray;window.Int8Array=TypedArray;window.Uint32Array=TypedArray;window.Int32Array=TypedArray;window.Uint16Array=TypedArray;window.Float32Array=TypedArray;window.Float64Array=TypedArray})();var extendDFlipOptions=function(options){return $.extend(true,{},defaults,options)};var createUI=function(container,object){var uiClass="df-ui";var wrapperClass="df-ui-wrapper";var buttonClass=uiClass+"-"+"btn";var isRTL=isRTLMode(object.target);var ui=object.ui=$(html.div,{class:uiClass});var options=object.options;ui.dispose=function(){container.find("."+buttonClass).each(function(){$(this).off()});help.off();next.off();prev.off();play.off();zoom.off();zoomIn.off();zoomOut.off();page.off();sound.off();more.off();fullScreen.off();fit.off();share.off();start.off();end.off();pageModeButton.off();altPrev.off();altNext.off();thumbnail.off();outline.off();controls.remove();sizeControls.remove();prev.remove();next.remove();zoom.remove();if(ui.shareBox){if(ui.shareBox.dispose)ui.shareBox.dispose();ui.shareBox=null}document.removeEventListener("keyup",onKeyUp,false);window.removeEventListener("click",closeMoreOptions,false);ui.update=null;object=null};var validPage=function(pageNumber){if(isNaN(pageNumber))pageNumber=object.target._activePage;else if(pageNumber<1)pageNumber=1;else if(pageNumber>object.target.pageCount)pageNumber=object.target.pageCount;return pageNumber};var next=ui.next=$(html.div,{class:buttonClass+" "+uiClass+"-next "+options.icons["next"],title:isRTL?options.text.previousPage:options.text.nextPage,html:"<span>"+options.text.nextPage+"</span>"}).on("click",function(){object.next()});var prev=ui.prev=$(html.div,{class:buttonClass+" "+uiClass+"-prev "+options.icons["prev"],title:isRTL?options.text.nextPage:options.text.previousPage,html:"<span>"+options.text.previousPage+"</span>"}).on("click",function(){object.prev()});var play=$(html.div,{class:buttonClass+" "+uiClass+"-play "+options.icons["play"],title:options.text.play,html:"<span>"+options.text.play+"</span>"}).on("click",function(){var el=$(this);object.setAutoPlay(!el.hasClass(options.icons["pause"]))});if(options.autoPlay==true){ui.play=play;object.setAutoPlay(options.autoPlayStart)}var zoom=$(html.div,{class:wrapperClass+" "+uiClass+"-zoom"});var zoomIn=ui.zoomIn=$(html.div,{class:buttonClass+" "+uiClass+"-zoomin "+options.icons["zoomin"],title:options.text.zoomIn,html:"<span>"+options.text.zoomIn+"</span>"}).on("click",function(){object.zoom(1);ui.update();if(object.target.startPoint&&object.target.pan)object.target.pan(object.target.startPoint)});var zoomOut=ui.zoomOut=$(html.div,{class:buttonClass+" "+uiClass+"-zoomout "+options.icons["zoomout"],title:options.text.zoomOut,html:"<span>"+options.text.zoomOut+"</span>"}).on("click",function(){object.zoom(-1);ui.update();if(object.target.startPoint&&object.target.pan)object.target.pan(object.target.startPoint)});zoom.append(zoomIn).append(zoomOut);var page=ui.pageNumber=$(html.div,{class:buttonClass+" "+uiClass+"-page"}).on("change",function(){var pageNumber=parseInt(ui.pageInput.val(),10);pageNumber=validPage(pageNumber);object.gotoPage(pageNumber)}).on("keyup",function(event){if(event.keyCode==13){var pageNumber=parseInt(ui.pageInput.val(),10);pageNumber=validPage(pageNumber);if(pageNumber!==validPage(object.target._activePage||object._activePage))object.gotoPage(pageNumber)}});ui.pageInput=$('<input id="df_book_page_number" type="text"/>').appendTo(page);ui.pageLabel=$('<label for="df_book_page_number"/>').appendTo(page);var sizeControls=$(html.div,{class:wrapperClass+" "+uiClass+"-size"});var help=$(html.div,{class:buttonClass+" "+uiClass+"-help "+options.icons["help"],title:options.text.toggleHelp,html:"<span>"+options.text.toggleHelp+"</span>"}).on("click",function(){});var sound=ui.sound=$(html.div,{class:buttonClass+" "+uiClass+"-sound "+options.icons["sound"],title:options.text.toggleSound,html:"<span>"+options.text.toggleSound+"</span>"}).on("click",function(){options.soundEnable=!options.soundEnable;ui.updateSound()});ui.updateSound=function(){if(options.soundEnable==false||options.soundEnable=="false")sound.addClass("disabled");else sound.removeClass("disabled")};ui.updateSound();function closeSearchOptions(event){ui.search.removeClass("df-active")}if(typeof options.source=="string"&&options.search==true){var search=ui.search=$(html.div,{class:buttonClass+" "+uiClass+"-search "+options.icons["search"]}).on("click",function(event){if(!search.hasClass("df-active")){$(this).addClass("df-active");event.stopPropagation()}});window.addEventListener("click",closeSearchOptions,false);var searchContainer=$(html.div,{class:"search-container"});search.append(searchContainer)}var more=ui.more=$(html.div,{class:buttonClass+" "+uiClass+"-more "+options.icons["more"]}).on("click",function(event){if(!more.hasClass("df-active")){$(this).addClass("df-active");event.stopPropagation()}});function closeMoreOptions(event){more.removeClass("df-active")}window.addEventListener("click",closeMoreOptions,false);var moreContainer=$(html.div,{class:"more-container"});more.append(moreContainer);if(typeof options.source=="string"&&options.enableDownload==true){var downloadClass=buttonClass+" "+uiClass+"-download "+options.icons["download"];var download=ui.download=$('<a download target="_blank" class="'+downloadClass+'"><span>'+options.text.downloadPDFFile+"</span></a>");download.attr("href",options.source).attr("title",options.text.downloadPDFFile)}var fullscreenEnabled=utils.hasFullscreenEnabled();if(!fullscreenEnabled){container.addClass("df-custom-fullscreen")}ui.switchFullscreen=function(){var fullscreenElement=utils.getFullscreenElement();var container=object.container[0];if(ui.isFullscreen!=true){object.container.addClass("df-fullscreen");if(container.requestFullscreen){container.requestFullscreen()}else if(container.msRequestFullscreen){container.msRequestFullscreen()}else if(container.mozRequestFullScreen){container.mozRequestFullScreen()}else if(container.webkitRequestFullscreen){container.webkitRequestFullscreen()}ui.isFullscreen=true}else{object.container.removeClass("df-fullscreen");ui.isFullscreen=false;if(document.exitFullscreen){if(document.fullscreenElement)document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){if(document.fullscreenElement)document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}if(!utils.hasFullscreenEnabled()){setTimeout(function(){object.resize()},50)}};var fullScreen=ui.fullScreen=$(html.div,{class:buttonClass+" "+uiClass+"-fullscreen "+options.icons["fullscreen"],title:options.text.toggleFullscreen,html:"<span>"+options.text.toggleFullscreen+"</span>"}).on("click",ui.switchFullscreen);var fit=ui.fit=$(html.div,{class:buttonClass+" "+uiClass+"-fit "+options.icons["fitscreen"]}).on("click",function(){$(this).toggleClass("df-button-fit-active")});sizeControls.append(fullScreen);var controls=$(html.div,{class:wrapperClass+" "+uiClass+"-controls"});var shareBox=ui.shareBox=new DFLIP.Share(container,options);var share=ui.share=$(html.div,{class:buttonClass+" "+uiClass+"-share "+options.icons["share"],title:options.text.share,html:"<span>"+options.text.share+"</span>"}).on("click",function(event){if(ui.shareBox.isOpen==true)ui.shareBox.close();else{ui.shareBox.update(object.getURLHash());ui.shareBox.show()}});var start=ui.startPage=$(html.div,{class:buttonClass+" "+uiClass+"-start "+(isRTL?options.icons["end"]:options.icons["start"]),title:options.text.gotoFirstPage,html:"<span>"+options.text.gotoFirstPage+"</span>"}).on("click",function(){object.start()});var end=ui.endPage=$(html.div,{class:buttonClass+" "+uiClass+"-end "+(isRTL?options.icons["start"]:options.icons["end"]),title:options.text.gotoLastPage,html:"<span>"+options.text.gotoLastPage+"</span>"}).on("click",function(){object.end()});var pageModeButton=ui.pageMode=$(html.div,{class:buttonClass+" "+uiClass+"-pagemode "+options.icons["singlepage"],html:"<span>"+options.text.singlePageMode+"</span>"}).on("click",function(){var el=$(this);object.setPageMode(!el.hasClass(options.icons["doublepage"]))});object.setPageMode(object.target.pageMode==DFLIP.PAGE_MODE.SINGLE);var altPrev=ui.altPrev=$(html.div,{class:buttonClass+" "+uiClass+"-prev"+" "+uiClass+"-alt "+options.icons["prev"],title:isRTL?options.text.nextPage:options.text.previousPage,html:"<span>"+options.text.previousPage+"</span>"}).on("click",function(){object.prev()});var altNext=ui.altNext=$(html.div,{class:buttonClass+" "+uiClass+"-next"+" "+uiClass+"-alt "+options.icons["next"],title:isRTL?options.text.previousPage:options.text.nextPage,html:"<span>"+options.text.nextPage+"</span>"}).on("click",function(){object.next()});var thumbnail=ui.thumbnail=$(html.div,{class:buttonClass+" "+uiClass+"-thumbnail "+options.icons["thumbnail"],title:options.text.toggleThumbnails,html:"<span>"+options.text.toggleThumbnails+"</span>"}).on("click",function(){var $this=$(this);if(object.target.thumbContainer){var thumbContainer=object.target.thumbContainer;thumbContainer.toggleClass("df-sidemenu-visible");$this.toggleClass("df-active")}else{object.contentProvider.initThumbs();$this.toggleClass("df-active")}if($this.hasClass("df-active")){$this.siblings(".df-active").trigger("click")}ui.update(true)});var outline=ui.outline=$(html.div,{class:buttonClass+" "+uiClass+"-outline "+options.icons["outline"],title:options.text.toggleOutline,html:"<span>"+options.text.toggleOutline+"</span>"}).on("click",function(){var $this=$(this);if(object.target.outlineContainer){var outlineContainer=object.target.outlineContainer;$this.toggleClass("df-active");outlineContainer.toggleClass("df-sidemenu-visible");if($this.hasClass("df-active")){$this.siblings(".df-active").trigger("click")}ui.update(true)}});var allControls=options.allControls.replace(/ /g,"").split(","),moreControls=","+options.moreControls.replace(/ /g,"")+",",hideControls=","+options.hideControls.replace(/ /g,"")+",";if(isIOS&&isMobile){hideControls+=",fullScreen,"}var moreControlsArray=moreControls.split(",");for(var controlCount=0;controlCount<allControls.length;controlCount++){var controlName=allControls[controlCount];if(hideControls.indexOf(","+controlName+",")<0){var control=ui[controlName];if(control!=null&&typeof control=="object"){if(moreControls.indexOf(","+controlName+",")>-1&&controlName!=="more"&&controlName!=="pageNumber"){moreContainer.append(control)}else{controls.append(control)}}}}container.append(controls).append(prev).append(next).append(zoom);var ctrlDown=false,shiftDown=false,altDown=false;var shiftKey=16,ctrlKey=17,altKey=18,sKey=83,vKey=86,cKey=67,eKey=69,gKey=71,nKey=78,oKey=79,deleteKey=46,rightKey=39,leftKey=37,escKey=27;document.addEventListener("keyup",onKeyUp,false);function onKeyUp(event){switch(event.keyCode){case escKey:if(ui.isFullscreen==true){ui.fullScreen.trigger("click")}else if(window.dfLightBox&&window.dfActiveLightBoxBook){window.dfLightBox.closeButton.trigger("click")}break;case shiftKey:shiftDown=false;break;case ctrlKey:ctrlDown=false;break;case altKey:altDown=false;break;case leftKey:object.prev();break;case rightKey:object.next();break;default:break}}ui.update=function(resize){log("ui update");var target=object.target;var pageNumber=validPage(target._activePage||object._activePage);var pageCount=target.pageCount||object.pageCount;var isRTL=target.direction==DFLIP.DIRECTION.RTL,isStart=pageNumber==1||pageNumber==0,isEnd=pageNumber==pageCount;ui.next.show();ui.prev.show();ui.altNext.removeClass("disabled");ui.altPrev.removeClass("disabled");if(isStart&&!isRTL||isEnd&&isRTL){ui.prev.hide();ui.altPrev.addClass("disabled")}if(isEnd&&!isRTL||isStart&&isRTL){ui.next.hide();ui.altNext.addClass("disabled")}ui.pageInput.val(pageNumber);ui.pageLabel.html(pageNumber+"/"+pageCount);if(container.find(".df-sidemenu-visible").length>0){container.addClass("df-sidemenu-open")}else{container.removeClass("df-sidemenu-open")}if(resize==true)object.resize();if(target.contentProvider.zoomScale==target.contentProvider.maxZoom){ui.zoomIn.addClass("disabled")}else{ui.zoomIn.removeClass("disabled")}if(target.contentProvider.zoomScale==1){ui.zoomOut.addClass("disabled")}else{ui.zoomOut.removeClass("disabled")}};if(object.target!=null){object.target.ui=ui}if(options.onCreateUI!=null)options.onCreateUI(object)};var PreviewStage=null;function RegisterMockupObjects(){PreviewStage=function(_super){__extends(PreviewStage,_super);function PreviewStage(parameters){parameters=parameters||{};var _this=this;_super.call(this,parameters);_this.options=parameters;_this.canvas=$(_this.renderer.domElement).addClass("df-3dcanvas");_this.container=parameters.container;_this.container.append(_this.canvas);_this.type="PreviewStage";_this.mouse=new THREE.Vector2;_this.raycaster=new THREE.Raycaster;_this.camera.position.set(0,20,600);_this.camera.lookAt(new THREE.Vector3(0,0,0));_this.spotLight.position.set(-220,330,550);_this.spotLight.castShadow=isMobile?false:parameters.webglShadow;if(_this.spotLight.shadow){_this.spotLight.shadow.bias=-8e-4}_this.spotLight.intensity=isset(parameters.spotLightIntensity,defaults.spotLightIntensity);_this.ambientLight.color=new THREE.Color(isset(parameters.ambientLightColor,defaults.ambientLightColor));_this.ambientLight.intensity=isset(parameters.ambientLightIntensity,defaults.ambientLightIntensity);var material=new THREE.ShadowMaterial;material.opacity=isset(parameters.shadowOpacity,defaults.shadowOpacity);_this.ground.material=material;_this.ground.position.z=-2;_this.orbitControl.maxAzimuthAngle=0;_this.orbitControl.minAzimuthAngle=0;_this.orbitControl.minPolarAngle=Math.PI/2;_this.orbitControl.maxPolarAngle=2.2;_this.orbitControl.mouseButtons.ORBIT=THREE.MOUSE.RIGHT;_this.orbitControl.mouseButtons.PAN=-1;_this.orbitControl.maxDistance=5e3;_this.orbitControl.minDistance=50;_this.orbitControl.noZoom=true;_this.selectiveRendering=true;_this.orbitControl.zoomSpeed=5;_this.orbitControl.keyPanSpeed=0;_this.orbitControl.center.set(0,0,0);_this.orbitControl.update();_this.swipe_threshold=isMobile?15:20;var cssRenderer=_this.cssRenderer=new THREE.CSS3DRenderer;$(cssRenderer.domElement).css({position:"absolute",top:0,pointerEvents:"none"}).addClass("df-3dcanvas df-csscanvas");_this.container[0].appendChild(cssRenderer.domElement);var cssScene=_this.cssScene=new THREE.Scene;var divLeftDOM=document.createElement("div");divLeftDOM.className="df-page-content df-page-content-left";var divRightDOM=document.createElement("div");divRightDOM.className="df-page-content df-page-content-right";var divLeft=cssScene.divLeft=new THREE.CSS3DObject(divLeftDOM);var divRight=cssScene.divRight=new THREE.CSS3DObject(divRightDOM);cssScene.add(divLeft);cssScene.add(divRight);_this.resizeCallback=function(){cssRenderer.setSize(_this.canvas.width(),_this.canvas.height())};function requestRender(){_this.renderRequestPending=true}window.addEventListener(mouseEvents.move,requestRender,false);window.addEventListener("keyup",requestRender,false);_this.dispose=function(){-_this.clearChild();_this.render();window.removeEventListener(mouseEvents.move,requestRender,false);if(_this.options.scrollWheel==true){_this.container[0].removeEventListener("mousewheel",onMouseWheel,false);_this.container[0].removeEventListener("DOMMouseScroll",onMouseWheel,false)}window.removeEventListener("keyup",requestRender,false);_this.renderer.domElement.removeEventListener("mousemove",editor_mouseMove,false);_this.renderer.domElement.removeEventListener("touchmove",editor_mouseMove,false);_this.renderer.domElement.removeEventListener("mousedown",editor_mouseDown,false);_this.renderer.domElement.removeEventListener("touchstart",editor_mouseDown,false);_this.renderer.domElement.removeEventListener("mouseup",editor_mouseUp,false);_this.renderer.domElement.removeEventListener("touchend",editor_mouseUp,false);_this.canvas.remove();cssRenderer.domElement.parentNode.removeChild(cssRenderer.domElement);cssRenderer=null;_this.renderCallback=null;_this.renderCallback=null;_this.orbitControl.dispose();_this.orbitControl=null;_this.renderer.dispose();_this.cancelRAF()};_this.renderCallback=function(){if(TWEEN.getAll().length>0)_this.renderRequestPending=true;TWEEN.update();cssRenderer.render(cssScene,_this.camera)};var onMouseWheel=function(event){var delta=0;if(event.wheelDelta!=null){delta=event.wheelDelta}else if(event.detail!=null){delta=-event.detail}if(delta){var currentZoom=_this.previewObject.contentProvider.zoomScale;if(delta>0&&currentZoom==1||delta<0&&currentZoom>1){event.preventDefault()}_this.previewObject.zoom(delta>0?1:-1)}requestRender()};var editor_mouseMove=function(event){_this.renderRequestPending=true;event=fixMouseEvent(event);if(_this.isMouseDown&&event.movementX!=0&&event.movementY!=0){_this.isMouseMoving=true}if(event.touches!=null&&event.touches.length==2&&_this.startTouches!=null){_this.zoomDirty=true;var touchCenter=utils.getVectorAvg(utils.getTouches(event,_this.container.offset())),newScale=utils.calculateScale(_this.startTouches,utils.getTouches(event)),scale=newScale/_this.lastScale;var zoom=_this.previewObject.contentProvider.zoomScale,x=touchCenter.x,y=touchCenter.y;_this.camera.position.z=_this.originalZ/newScale;_this.lastScale=newScale;_this.lastZoomCenter=touchCenter;event.preventDefault();return}if(_this.isMouseDown==true&&_this.previewObject.contentProvider.zoomScale==1){var swipe_dist=event.pageX-_this.lastPos,swipe_time=performance.now()-_this.lastTime;if(Math.abs(swipe_dist)>_this.swipe_threshold){if(swipe_dist<0){_this.target.next()}else{_this.target.prev()}event.preventDefault();_this.isMouseDown=false}_this.lastPos=event.pageX;_this.lastTime=performance.now()}};var editor_mouseDown=function(event){event=fixMouseEvent(event);if(event.touches!=null&&event.touches.length==2&&_this.startTouches==null){_this.startTouches=utils.getTouches(event);_this.lastScale=1;_this.originalZ=_this.camera.position.z*1}document.activeElement.blur();_this.mouseValue=event.pageX+","+event.pageY;_this.isMouseMoving=false;_this.isMouseDown=true;_this.lastPos=event.pageX;_this.lastTime=performance.now()};var editor_click=function(event){_this.isMouseDown=false;if(event.button!==0)return this;var mouseValue=event.pageX+","+event.pageY;if(_this.isMouseMoving){}else if(mouseValue==_this.mouseValue){event=event||window.event;event=$.event.fix(event);var mouse=_this.mouse,raycaster=_this.raycaster;mouse.x=event.offsetX/_this.canvas.innerWidth()*2-1;mouse.y=1-event.offsetY/_this.canvas.innerHeight()*2;raycaster.setFromCamera(mouse,_this.camera);var intersects=raycaster.intersectObjects(_this.target instanceof MOCKUP.Bundle?_this.target.children:[_this.target],true);if(intersects.length>0){var object,objectCount=0;do{object=intersects[objectCount]!=null?intersects[objectCount].object:null;objectCount++}while((object instanceof THREE.BoxHelper||!(object instanceof MOCKUP.Paper)||object.isFlipping==true)&&objectCount<intersects.length);if(object.userData.object!=null){}else{if(object.angles[1]>90){if(object.isEdge!=true)_this.target.next()}else{if(object.isEdge!=true)_this.target.prev()}}}else{}}};var editor_mouseUp=function(event){event=fixMouseEvent(event);if(event.touches!=null&&event.touches.length==0){var zoom=_this.previewObject.contentProvider.zoomScale;if(_this.zoomDirty==true){_this.previewObject.contentProvider.zoomScale=utils.limitAt(_this.previewObject.contentProvider.zoomScale*_this.lastScale,1,_this.previewObject.contentProvider.maxZoom);_this.previewObject.zoomValue=_this.previewObject.contentProvider.zoomScale*1;_this.previewObject.resize();_this.zoomDirty=false}_this.lastScale=null;_this.startTouches=null}if(event.touches!=null&&event.touches.length>1)return;editor_click(event)};_this.renderer.domElement.addEventListener("mousemove",editor_mouseMove,false);_this.renderer.domElement.addEventListener("touchmove",editor_mouseMove,false);_this.renderer.domElement.addEventListener("mousedown",editor_mouseDown,false);_this.renderer.domElement.addEventListener("touchstart",editor_mouseDown,false);_this.renderer.domElement.addEventListener("mouseup",editor_mouseUp,false);_this.renderer.domElement.addEventListener("touchend",editor_mouseUp,false);if(_this.options.scrollWheel==true){_this.container[0].addEventListener("mousewheel",onMouseWheel,false);_this.container[0].addEventListener("DOMMouseScroll",onMouseWheel,false)}$(_this.renderer.domElement).css({display:"block"});$(window).trigger("resize");return this}PreviewStage.prototype.width=function(){return this.container.width()};PreviewStage.prototype.height=function(){return this.container.height()};return PreviewStage}(MOCKUP.Stage);MOCKUP.PreviewStage=PreviewStage;var BookPaper=function(_super){__extends(BookPaper,_super);function BookPaper(parameters,stage){parameters=parameters||{};parameters.folds=1;_super.call(this,parameters,stage);this.angle=0;this.isFlipping=false;this.material.materials[5].transparent=true;this.material.materials[4].transparent=true;this.type="BookPaper"}BookPaper.prototype.tween=function(oldAngle,newAngle){var page=this;var epsilon=1e-5;page.originalStiff=page.stiffness;var oldTarget=page.newStiffness;var isBooklet=isBookletMode(page.parent);var diff=newAngle-oldAngle;var isRight=oldAngle>90;var isRTL=page.parent.direction==DFLIP.DIRECTION.RTL;page.init={angle:oldAngle,angle2:oldAngle<90?0:180,stiff:page.originalStiff,index:isRight&&!isRTL||!isRight&&isRTL?1:0};page.first={angle:oldAngle+diff/4,angle2:oldAngle<90?90:90,stiff:page.originalStiff,index:isRight&&!isRTL||!isRight&&isRTL?1:.25};page.mid={angle:oldAngle+diff*2/4,angle2:oldAngle<90?135:45,stiff:page.newStiffness,index:isRight&&!isRTL||!isRight&&isRTL?.5:.5};page.mid2={angle:oldAngle+diff*3/4,angle2:oldAngle<90?180:0,stiff:page.newStiffness,index:isRight&&!isRTL||!isRight&&isRTL?.25:1};page.end={angle:newAngle,angle2:oldAngle<90?180:0,stiff:page.newStiffness,index:isRight&&!isRTL||!isRight&&isRTL?0:1};page.isFlipping=true;var update=function(tween,event){page.angles[1]=tween.angle;page.angles[4]=page.isHard?tween.angle:tween.angle2;if(page.isHard==true){page.stiffness=0}else{page.stiffness=tween.stiff/(oldTarget+epsilon)*(page.newStiffness+epsilon);page.stiffness=isNaN(page.stiffness)?0:tween.stiff}if(isBooklet){page.material.materials[5].opacity=page.material.materials[4].opacity=tween.index;page.castShadow=isRight&&!isRTL||!isRight&&isRTL?tween.index>.5:tween.index>.5}page.updateAngle(true)};if(isBooklet&&(!isRight&&!isRTL||isRight&&isRTL)){page.material.materials[5].opacity=page.material.materials[4].opacity=0;page.castShadow=false}page.currentTween=new TWEEN.Tween(page.init).to({angle:[page.first.angle,page.mid.angle,page.mid2.angle,page.end.angle],angle2:[page.first.angle2,page.mid.angle2,page.mid2.angle2,page.end.angle2],stiff:[page.first.stiff,page.mid.stiff,page.mid2.stiff,page.end.stiff],index:[page.first.index,page.mid.index,page.mid2.index,page.end.index]},page.parent.duration).onUpdate(function(event){update(this,event)}).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(function(event){page.stiffness=page.newStiffness;page.updateAngle();page.material.materials[5].opacity=page.material.materials[4].opacity=1;page.castShadow=true;page.isFlipping=false;if(page.parent&&page.parent.refresh)page.parent.refresh()}).start()};return BookPaper}(MOCKUP.FlexBoxPaper);MOCKUP.BookPaper=BookPaper;var Book=function(_super){__extends(Book,_super);function Book(parameters,stage){parameters=parameters||{};parameters.segments=parameters.segments||50;this.pageCount=parameters.pageCount;this.height=parameters.height;this.width=parameters.width;this.direction=parameters.direction||DFLIP.DIRECTION.LTR;this.startPage=1;this.endPage=this.pageCount;this.stackCount=parameters.stackCount||6;this.materials=[];_super.call(this,parameters,stage);this.angles=[0,0,0,0,0,0];this.stiffness=parameters.stiffness==null?1.5:parameters.stiffness;this.hardConfig=parameters.hard;this._activePage=parameters.openPage||this.startPage;this.createStack(parameters);this.pageMode=parameters.pageMode||(isMobile||this.pageCount<=2?DFLIP.PAGE_MODE.SINGLE:DFLIP.PAGE_MODE.DOUBLE);this.singlePageMode=parameters.singlePageMode||(isMobile?DFLIP.SINGLE_PAGE_MODE.BOOKLET:DFLIP.SINGLE_PAGE_MODE.ZOOM);this.type="Book"}Book.prototype.getPageByNumber=function(pageNumber){var relativePageNumber=isBookletMode(this)?isRTLMode(this)?pageNumber+1:pageNumber:Math.floor((pageNumber-1)/2);return this.getObjectByName(relativePageNumber.toString())};Book.prototype.isPageHard=function(pageNumber){return utils.isHardPage(this.hardConfig,pageNumber,this.pageCount)};Book.prototype.activePage=function(pageNumber){if(pageNumber==null)return this._activePage;this.gotoPage(pageNumber)};Book.prototype.gotoPage=function(pageNumber){pageNumber=parseInt(pageNumber,10);this._activePage=pageNumber;if(this.autoPlay==true){this.previewObject.setAutoPlay(this.autoPlay)}this.updatePage(pageNumber);if(this&&this.thumblist&&this.thumblist.review)this.thumblist.review()};Book.prototype.moveBy=function(step){var nextPage=this._activePage+step;nextPage=limitAt(nextPage,this.startPage,this.endPage);if(this.firstFlipped!=true){this.previewObject.analytics({eventAction:"First Page Flip",options:this.previewObject.options});this.firstFlipped=true}this.gotoPage(nextPage)};Book.prototype.next=function(step){if(step==null)step=this.direction==DFLIP.DIRECTION.RTL?-this.pageMode:this.pageMode;this.moveBy(step)};Book.prototype.prev=function(step){if(step==null)step=this.direction==DFLIP.DIRECTION.RTL?this.pageMode:-this.pageMode;this.moveBy(step)};Book.prototype.updateAngle=function(){var startAngle=this.angles[1];var endAngle=this.angles[4];var spreadAngle=endAngle-startAngle;var stacks=this.stackCount;for(var _stackCount=0;_stackCount<stacks;_stackCount++){var clone=this.children[_stackCount];clone.angles[1]=startAngle+_stackCount*spreadAngle/(stacks*100);clone.stiffness=this.stiffness;clone.updateAngle()}};Book.prototype.refresh=function(){this.updatePage(this._activePage);if(this.flipCallback!=null)this.flipCallback()};Book.prototype.updatePage=function(pageNumber){var isRTL=this.direction==DFLIP.DIRECTION.RTL,isBooklet=isBookletMode(this),newBaseNumber=getBasePage(pageNumber);var pageDivisor=isBooklet?1:2;pageNumber=Math.floor(pageNumber/pageDivisor);if(isRTL)pageNumber=Math.ceil(this.pageCount/pageDivisor)-pageNumber;var oldBaseNumber=this.oldBaseNumber||0;var pageCount=this.pageCount/pageDivisor;var stackCount=this.stackCount;var angleShift=.02;var depth=.4;var stiffFactor=isBooklet?0:(.5-Math.abs(pageCount/2-pageNumber)/pageCount)/this.stiffness;var positionFactor=1;var midPoint=Math.floor(stackCount/2);var isLeft=false;if(oldBaseNumber>pageNumber){isLeft=true;this.children[stackCount-1].skipFlip=true;this.children.unshift(this.children.pop())}else if(oldBaseNumber<pageNumber){this.children[0].skipFlip=true;this.children.push(this.children.shift())}var remainingPages=pageCount-pageNumber;var stackDepth=5/pageCount;var leftDepth=stackDepth*pageNumber/2;var rightDepth=stackDepth*remainingPages/2;var maxDepth=leftDepth<rightDepth?rightDepth:leftDepth;for(var _pageCount=0;_pageCount<stackCount;_pageCount++){var page=this.children[_pageCount];var color=page.color;var oldAngle=page.angles[1];var newAngle;var relativePageNumber=pageNumber-midPoint+_pageCount;if(isRTL)relativePageNumber=isBooklet?this.pageCount-relativePageNumber:Math.ceil(this.pageCount/2)-relativePageNumber-1;var isHard=page.isHard=this.isPageHard(relativePageNumber);var oldName=page.name;page.isEdge=false;if(_pageCount==0){page.depth=leftDepth<depth?depth:leftDepth}else if(_pageCount==stackCount-1){page.depth=rightDepth<depth?depth:rightDepth}else{page.depth=depth;page.isEdge=false}if(page.isFlipping==true){page.depth=depth}page.position.x=0;var leftAngle=angleShift*_pageCount,rightAngle=180-angleShift*(_pageCount-midPoint)+angleShift*_pageCount;if(_pageCount<midPoint){page.newStiffness=isHard||this.stiffness==0?0:stiffFactor/(pageNumber/pageCount)/4;newAngle=leftAngle;page.position.z=maxDepth-(-_pageCount+midPoint)*depth;if(isLeft==true)page.position.z-=depth}else{newAngle=rightAngle;page.newStiffness=isHard||this.stiffness==0?0:stiffFactor/(Math.abs(pageCount-pageNumber)/pageCount)/4;page.position.z=maxDepth-(-stackCount+_pageCount+midPoint+1)*depth-page.depth}if(page.isFlipping==false){if(Math.abs(oldAngle-newAngle)>20&&page.skipFlip==false){page.depth=depth;var predicted=page.stiffness;if(oldAngle>newAngle){predicted=stiffFactor/(Math.abs(pageCount-pageNumber)/pageCount)/4}else{predicted=stiffFactor/(pageNumber/pageCount)/4}page.position.z+=depth;page.stiffness=isNaN(predicted)?page.stiffness:predicted;page.updateAngle(true);page.targetStiffness=isHard?0:_pageCount<pageNumber?stiffFactor/(Math.abs(pageCount-pageNumber)/pageCount)/4:stiffFactor/(pageNumber/pageCount)/4;page.targetStiffness=isHard?0:isNaN(page.targetStiffness)?page.stiffness:page.targetStiffness;page.isFlipping=true;page.tween(oldAngle,newAngle);if(this.preFlipCallback!=null)this.preFlipCallback()}else{page.skipFlip=false;page.newStiffness=isNaN(page.newStiffness)?0:page.newStiffness;if(page.angles[1]!=newAngle||page.stiffness!=page.newStiffness||page.depth!=page.oldDepth){page.angles[1]=page.angles[4]=newAngle;page.stiffness=page.newStiffness;page.updateAngle(true)}else{}}}page.visible=isBooklet?isRTL?_pageCount<midPoint||page.isFlipping:_pageCount>=midPoint||page.isFlipping:relativePageNumber>=0&&relativePageNumber<pageCount||isBooklet&&relativePageNumber==pageCount;if(this.requestPage!=null){page.name=relativePageNumber.toString();if(page.name!=oldName){page.textureLoaded=false;page.frontImage(defaults.textureLoadFallback);page.frontPageStamp="-1";page.frontTextureLoaded=false;page.thumbLoaded=false;page.backImage(defaults.textureLoadFallback);page.backPageStamp="-1";page.backTextureLoaded=false;this.requestPage()}}page.oldDepth=page.depth;var xPos=Math.abs(page.geometry.boundingBox.max.x)<Math.abs(page.geometry.boundingBox.min.x)?page.geometry.boundingBox.max.x:page.geometry.boundingBox.min.x;page.position.x=page.isEdge==true&&page.isFlipping==false?_pageCount<midPoint?xPos:-xPos:0}this.oldBaseNumber=pageNumber;if(this.updatePageCallback!=null)this.updatePageCallback()};Book.prototype.createCover=function(parameters){parameters.width=parameters.width*2;this.cover=new MOCKUP.BiFold(parameters);this.add(this.cover)};Book.prototype.createStack=function(parameters){var colors="red,green,blue,yellow,orange,black".split(",");for(var _stackCount=0;_stackCount<this.stackCount;_stackCount++){parameters.angles=[,this.stackCount-_stackCount];parameters.stiffness=(this.stackCount-_stackCount)/100;var clone=new MOCKUP.BookPaper(parameters);clone.angles[1]=180;clone.index=_stackCount;clone.updateAngle();clone.textureReady=false;clone.textureRequested=false;this.add(clone);clone.color=colors[_stackCount];clone.position.z=-1*_stackCount}};Book.prototype.shininess=function(shininess){if(shininess==null){return this.mainObject.shininess()}else{this.mainObject.shininess(shininess)}};Book.prototype.bumpScale=function(bumpScale){if(bumpScale==null){return this.mainObject.bumpScale()}else{this.mainObject.bumpScale(bumpScale)}};Book.prototype.frontImage=function(frontImage){if(frontImage==null){return this.mainObject.frontImage()}else{this.mainObject.frontImage(frontImage)}};Book.prototype.backImage=function(backImage){if(backImage==null){return this.mainObject.backImage()}else{this.mainObject.backImage(backImage)}};return Book}(MOCKUP.Bundle);MOCKUP.Book=Book}var PreviewObject=function(_super){function PreviewObject(parameters){parameters=parameters||{};this.type="PreviewObject";var _this=this;_this.zoomValue=1;function resizeDelay(){setTimeout(function(){_this.resize()},50)}window.addEventListener("resize",resizeDelay,false);this.sound=document.createElement("audio");this.sound.setAttribute("src",parameters.soundFile+"?ver="+DFLIP.version);this.sound.setAttribute("type","audio/mpeg");this.autoPlayFunction=function(){if(_this&&_this.target.autoPlay){if(_this.target.direction==DFLIP.DIRECTION.RTL)_this.target.prev();else _this.target.next()}};this.dispose=function(){clearInterval(this.autoPlayTimer);this.autoPlayTimer=null;this.autoPlayFunction=null;if(this.target&&this.target.children){for(var count=0;count<this.target.children.length;count++){var page=this.target.children[count];if(page&&page.currentTween)page.currentTween.stop()}}if(this.zoomTween){if(this.zoomTween.stop)this.zoomTween.stop();this.zoomTween=null}if(this.container&&this.container.info&&this.container.info.remove)this.container.info.remove();if(this.target&&this.target.dispose)this.target.dispose();this.target=null;if(this.stage&&this.stage.dispose)this.stage.dispose();this.stage=null;if(this.ui&&this.ui.dispose)this.ui.dispose();this.ui=null;if(this.contentProvider&&this.contentProvider.dispose)this.contentProvider.dispose();this.contentProvider=null;window.removeEventListener("resize",resizeDelay)}}PreviewObject.prototype={start:function(){this.target.gotoPage(this.target.startPage)},end:function(){this.target.gotoPage(this.target.endPage)},next:function(){},prev:function(){},getPageTextContent:function(pageIndex){return this.contentProvider.pdfDocument.getPage(pageIndex+1).then(function(page){return page.getTextContent({normalizeWhitespace:true})})},calculateSize:function(containerHeight,stageWidth,maxHeight,paddingHeight,paddingWidth,isAutoHeight,pageRatio,isSingle){var stageHeight=containerHeight;var stageInnerWidth=stageWidth-paddingWidth;var stageInnerHeight=stageHeight-paddingHeight;var autoWidth=Math.ceil(isSingle?stageInnerWidth:stageInnerWidth/2);var autoHeight=autoWidth/pageRatio;var refHeight=null;if(isAutoHeight){refHeight=Math.min(autoHeight,maxHeight-paddingHeight);stageHeight=refHeight}else{refHeight=Math.min(stageInnerHeight,maxHeight-paddingHeight)}var isWide=autoHeight>refHeight;var width,height;if(isWide){height=refHeight;width=Math.floor(height*pageRatio)}else{width=autoWidth;height=Math.ceil(autoWidth/pageRatio)}if(isAutoHeight){stageHeight=Math.max(height+paddingHeight,320)}return{stageHeight:stageHeight,isWide:isWide,height:height,width:width}},zoom:function(delta){this.pendingZoom=true;this.zoomDelta=delta;this.resize();if(this.ui)this.ui.update()},resize:function(){var _this=this;if(_this.target==null||_this.target.ui==null||_this.target.contentProvider==null||_this.target.contentProvider.viewport==null||_this.target.stage==null)return;if(this.ui&&this.ui.isFullscreen==true&&utils.hasFullscreenEnabled()==true&&utils.getFullscreenElement()==null){this.ui.switchFullscreen()}var target=_this.target,container=_this.container,options=_this.options,stage=target.stage,contentProvider=target.contentProvider,pageRatio=contentProvider.pageRatio,zoomViewport=contentProvider.zoomViewport,isRTL=isRTLMode(target),is3d=target.mode!=="css",isLandScape=contentProvider.pageRatio>1,isAutoHeight=this.ui.isFullscreen==true?false:options.height==="auto",isWide,height,width,cameraZ,fov,zoom,maxZoom,sideShift=container.hasClass("df-sidemenu-open")?220:0,isSingle=this.target.pageMode==DFLIP.PAGE_MODE.SINGLE;var containerWidth=container.width();if(containerWidth<400){_this.container.addClass("df-xs")}else{_this.container.removeClass("df-xs")}var controlsHeight=container.find(".df-ui-controls").height();var paddingTop=options.paddingTop+(options.controlsPosition==DFLIP.CONTROLSPOSITION.TOP?controlsHeight:0),paddingRight=options.paddingRight,paddingBottom=options.paddingBottom+(options.controlsPosition==DFLIP.CONTROLSPOSITION.BOTTOM?controlsHeight:0),paddingLeft=options.paddingLeft;paddingTop=isNaN(paddingTop)?0:limitAt(paddingTop,0,paddingTop),paddingBottom=isNaN(paddingBottom)?0:limitAt(paddingBottom,0,paddingBottom),paddingLeft=isNaN(paddingLeft)?0:limitAt(paddingLeft,0,paddingLeft),paddingRight=isNaN(paddingRight)?0:limitAt(paddingRight,0,paddingRight);var paddingHeight=paddingTop+paddingBottom,paddingWidth=paddingLeft+paddingRight;var stageWidth=containerWidth-sideShift;container.height(options.height);var maxHeight=$(window).height();var containerHeight=Math.min(container.height(),maxHeight);var sizes=_this.calculateSize(containerHeight,stageWidth,maxHeight,paddingHeight,paddingWidth,isAutoHeight,pageRatio,isSingle);if(isAutoHeight){containerHeight=stageHeight=_this.calculateSize(containerHeight,stageWidth+sideShift,maxHeight,paddingHeight,paddingWidth,isAutoHeight,pageRatio,isSingle).stageHeight}else{containerHeight=stageHeight=sizes.stageHeight}container.height(containerHeight);var stageHeight=containerHeight;var stageInnerWidth=stageWidth-paddingWidth,stageInnerHeight=stageHeight-paddingHeight;width=Math.floor(isSingle?stageInnerWidth:stageInnerWidth/2);height=Math.floor(width/pageRatio);isWide=height>stageInnerHeight;if(isWide){height=stageInnerHeight;width=height*pageRatio}maxZoom=contentProvider.maxZoom=contentProvider.zoomViewport.height/height;if(_this.zoomValue==null)_this.zoomValue=1;if(contentProvider.zoomScale==null)contentProvider.zoomScale=1;if(_this.pendingZoom==true&&_this.zoomDelta!=null){var delta=_this.zoomDelta,predictedIndex,currentMaxDimension=Math.max(height,width);_this.zoomValue=_this.zoomDelta>0?_this.zoomValue*_this.options.zoomRatio:_this.zoomValue/_this.options.zoomRatio;_this.zoomValue=limitAt(_this.zoomValue,1,maxZoom);if(_this.zoomValue==1){contentProvider.zoomScale=1}else{contentProvider.zoomScale=limitAt(_this.zoomValue,1,maxZoom)}}zoom=contentProvider.zoomScale;contentProvider.checkViewportSize(width,height,zoom);if(contentProvider.contentSourceType==SOURCE_TYPE.PDF){width=contentProvider.imageViewport.width/zoom;height=contentProvider.imageViewport.height/zoom}if(contentProvider.zoomScale!=1){this.target.container.addClass("df-zoom-enabled")}var zoomWidth=target.zoomWidth=Math.floor(width*zoom),zoomHeight=target.zoomHeight=Math.floor(height*zoom);var zoomFullWidth=zoomWidth*2;if(is3d){var proportion=zoomHeight/target.height,aspect=stageWidth/stageHeight;var relativeHeight=zoom*(height+paddingHeight)/proportion,relativeWidth=zoom*(width*(isSingle?1:2)+paddingWidth)/proportion;var focusSize=isWide?relativeHeight:relativeWidth/aspect;stage.resizeCanvas(stageWidth,stageHeight);cameraZ=1/(2*Math.tan(Math.PI*stage.camera.fov*.5/180)/(focusSize/zoom))+2.2;stage.camera.updateProjectionMatrix();stage.renderRequestPending=true;var shift=(paddingTop-paddingBottom)*(target.height/height)/zoom/2;var _reset=contentProvider.zoomScale==1;if(stage.camera.position.z!==cameraZ&&_this.pendingZoom==true){if(_this.zoomTween!=null)_this.zoomTween.stop();_this.zoomTween=new TWEEN.Tween({campos:stage.camera.position.z,otx:stage.orbitControl.target.x,oty:stage.orbitControl.target.y,otz:stage.orbitControl.target.z}).delay(0).to({campos:cameraZ,otx:0,oty:shift,otz:0},100).onUpdate(function(){stage.camera.position.z=this.campos;if(_reset){stage.camera.position.y=this.oty;stage.orbitControl.target=new THREE.Vector3(this.otx,this.oty,this.otz)}stage.orbitControl.update()}).easing(TWEEN.Easing.Linear.None).onComplete(function(){stage.camera.position.z=cameraZ;if(contentProvider.zoomScale==1){stage.camera.position.set(0,shift,cameraZ);stage.orbitControl.target=new THREE.Vector3(0,shift,0)}stage.orbitControl.update()}).start()}else{if(contentProvider.zoomScale==1){stage.camera.position.set(0,shift,cameraZ);stage.orbitControl.target=new THREE.Vector3(0,shift,0)}stage.orbitControl.update()}stage.orbitControl.update();stage.orbitControl.mouseButtons.ORBIT=zoom!=1?-1:THREE.MOUSE.RIGHT;stage.orbitControl.mouseButtons.PAN=zoom!=1?THREE.MOUSE.LEFT:-1}else{target.pageWidth=Math.round(width);target.fullWidth=target.pageWidth*2;target.height=Math.round(height);var shiftHeight=target.shiftHeight=Math.round(limitAt((zoomHeight-stageHeight+paddingHeight)/2,0,zoomHeight)),shiftWidth=target.shiftWidth=Math.round(limitAt((zoomFullWidth-stageWidth+paddingWidth)/2,0,zoomFullWidth));if(zoom==1){target.left=0;target.top=0}target.stage.css({top:-shiftHeight,bottom:-shiftHeight,right:-shiftWidth+(isRTL?sideShift:0),left:-shiftWidth+(isRTL?0:sideShift),paddingTop:paddingTop,paddingRight:paddingRight,paddingBottom:paddingBottom,paddingLeft:paddingLeft,transform:"translate3d("+target.left+"px,"+target.top+"px,0)"});target.stageHeight=stage.height();target.wrapper.css({width:zoomFullWidth,height:zoomHeight,marginTop:containerHeight-zoomHeight-paddingHeight>0?(containerHeight-paddingHeight-zoomHeight)/2:0});var wrapperSize=Math.floor(distOrigin(width,height)*zoom);target.stage.find(".df-page-wrapper").width(wrapperSize).height(wrapperSize);target.stage.find(".df-book-page, .df-page-front , .df-page-back, .df-page-fold-inner-shadow").height(zoomHeight).width(zoomWidth)}_this.checkCenter({type:"resize"});if(contentProvider.zoomScale==1){this.target.container.removeClass("df-zoom-enabled")}if(target.thumblist){target.thumblist.reset($(target.thumblist.container).height())}_this.pendingZoom=false},playSound:function(){try{if(this.options&&this.options.soundEnable==true){this.sound.currentTime=0;this.sound.play()}}catch(error){}},setPageMode:function(isSingle){if(isSingle==true){this.ui.pageMode.addClass(this.options.icons["doublepage"]);this.ui.pageMode.html("<span>"+this.options.text.doublePageMode+"</span>");this.ui.pageMode.attr("title",this.options.text.doublePageMode);this.target.pageMode=DFLIP.PAGE_MODE.SINGLE}else{this.ui.pageMode.removeClass(this.options.icons["doublepage"]);this.ui.pageMode.html("<span>"+this.options.text.singlePageMode+"</span>");this.ui.pageMode.attr("title",this.options.text.singlePageMode);this.target.pageMode=DFLIP.PAGE_MODE.DOUBLE}if(this.target&&this.target.singlePageMode==DFLIP.SINGLE_PAGE_MODE.BOOKLET){this.target.reset()}this.resize()},setAutoPlay:function(isPlay){if(this.options.autoPlay){isPlay=isPlay==true;var text=isPlay?this.options.text.pause:this.options.text.play;this.ui.play.toggleClass(this.options.icons["pause"],isPlay);this.ui.play.html("<span>"+text+"</span>");this.ui.play.attr("title",text);clearInterval(this.autoPlayTimer);if(isPlay){this.autoPlayTimer=setInterval(this.autoPlayFunction,this.options.autoPlayDuration)}this.target.autoPlay=isPlay}},height:function(height){if(height==null){return this.container.height()}else{this.options.height=height;this.container.height(height);this.resize()}},checkCenter:function(options){options=options==null?{}:options;this.centerType=this.centerType||"start";var target=this.target;var singleShift=0,left=0,right=0;var basePage=utils.getBasePage(target._activePage);var isEven=target._activePage%2==0;var isRTL=target.direction==DFLIP.DIRECTION.RTL;var isSingle=target.pageMode==DFLIP.PAGE_MODE.SINGLE,isBooklet=isSingle&&target.singlePageMode==DFLIP.SINGLE_PAGE_MODE.BOOKLET;var stageWidth=target.stage.width(),width;if(target.mode=="css"){width=target.wrapper.width();singleShift=Math.max((width-stageWidth)/2,0);left=-width/4;right=width/4;if(basePage==0||isBooklet){target.wrapper.css({left:isSingle?isRTL?right-singleShift:left-singleShift:isRTL?right:left});target.shadow.css({width:"50%",left:isRTL?0:"50%",transitionDelay:""})}else if(basePage==target.pageCount){target.wrapper.css({left:isSingle?isRTL?left-singleShift:right-singleShift:isRTL?left:right});target.shadow.css({width:"50%",left:isRTL?"50%":0,transitionDelay:""})}else{target.wrapper.css({left:isSingle?isRTL?isEven?left-singleShift:right-singleShift:isEven?right-singleShift:left-singleShift:0});target.shadow.css({width:"100%",left:0,transitionDelay:parseInt(target.duration,10)+50+"ms"})}target.wrapper.css({transition:options.type=="resize"?"none":""})}else if(target.stage!=null){var init=target.position.x,end;singleShift=target.width/4;width=target.width;left=-width/2;right=width/2;if(basePage==0||isBooklet){end=isRTL?right:left}else if(basePage==target.pageCount){end=isRTL?left:right}else{end=isSingle?isRTL?isEven?left:right:isEven?right:left:0}if(end!==this.centerEnd){this.centerTween=new TWEEN.Tween({x:init}).delay(0).to({x:end},target.duration).onUpdate(function(){target.position.x=this.x;target.stage.cssScene.position.x=this.x}).easing(target.ease).start();this.centerEnd=end}}},width:function(width){if(width==null){return this.container.width()}else{this.options.width=width;this.container.width(width);this.resize()}}};return PreviewObject}({});DFLIP.PreviewObject=PreviewObject;var ContentProvider=function(_super){__extends(ContentProvider,_super);function ContentProvider(contentSource,callback,parameters,flipbook){parameters=parameters||{};var _this=this;_this.contentRawSource=contentSource||[defaults.textureLoadFallback];_this.contentSource=_this.contentRawSource;_this.contentSourceType=null;_this.minDimension=parameters.minTextureSize||256;_this.maxDimension=parameters.maxTextureSize||2048;_this.pdfRenderQuality=parameters.pdfRenderQuality||DFLIP.defaults.pdfRenderQuality;_this.flipbook=flipbook;_this.waitPeriod=50;_this.maxLength=297;_this.enableDebug=false;_this.zoomScale=1;_this.maxZoom=2;_this.options=parameters;_this.outline=parameters.outline;_this.links=parameters.links;_this.html=parameters.html;_this.isCrossOrigin=parameters.isCrossOrigin;_this.normalViewport={height:297,width:210,scale:1};_this.viewport={height:297,width:210,scale:1};_this.imageViewport={height:297,width:210,scale:1};_this.bookSize={height:297,width:210};_this.zoomViewport={height:297,width:210};_this.thumbsize=128;_this.cacheIndex=256;_this.cache=[];_this.pageRatio=parameters.pageRatio||_this.viewport.width/_this.viewport.height;_this.textureLoadTimeOut=null;_this.type="TextureLibrary";if(Array===_this.contentSource.constructor||Array.isArray(_this.contentSource)||_this.contentSource instanceof Array){_this.contentSourceType=SOURCE_TYPE.IMAGE;_this.pageCount=_this.contentSource.length;for(var _correct=0;_correct<_this.contentSource.length;_correct++){_this.contentSource[_correct]=utils.httpsCorrection(_this.contentSource[_correct].toString())}$("<img/>").attr("src",_this.contentSource[0]).on("load",function(){_this.viewport.height=this.height;_this.viewport.width=this.width;_this.pageRatio=_this.viewport.width/_this.viewport.height;_this.bookSize={width:(_this.pageRatio>1?1:_this.pageRatio)*_this.maxLength,height:_this.maxLength/(_this.pageRatio<1?1:_this.pageRatio)};_this.zoomViewport={width:(_this.pageRatio>1?1:_this.pageRatio)*_this.maxDimension,height:_this.maxDimension/(_this.pageRatio<1?1:_this.pageRatio)};_this.linkService=new PDFLinkService;$(this).off();if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL){_this.pageCount=_this.contentSource.length*2-2;if(_this.options.webgl==true)_this.requiresImageTextureScaling=true}if(callback!=null){callback(_this);callback=null}log(this.height+":"+this.width)})}else if(typeof _this.contentSource=="string"||_this.contentSource instanceof String){var checkSource=function(){if(_this.contentSource.indexOf(".base64")>1){$.ajax({url:_this.contentSource,xhrFields:{onprogress:function(e){if(e.lengthComputable){var percentage=100*e.loaded/e.total;_this.updateInfo(_this.options.text.loading+" PDF "+percentage.toString().split(".")[0]+"% ...")}}},success:function(response){_this.options.docParameters={data:atob(response)};processSource()}})}else{processSource()}};var processSource=function(){if(_this){pdfjsLib.GlobalWorkerOptions.workerSrc=defaults.pdfjsWorkerSrc;_this.contentSourceType=SOURCE_TYPE.PDF;var disableFontFace=_this.options.disableFontFace;if(isSafari||isIOS||_this.options.disableFontFace==true){}var loading=_this.loading=pdfjsLib.getDocument(_this.options.docParameters?_this.options.docParameters:{url:utils.httpsCorrection(contentSource),rangeChunkSize:isNaN(_this.options.rangeChunkSize)?524288:_this.options.rangeChunkSize,cMapUrl:defaults.cMapUrl,cMapPacked:true,imageResourcesPath:defaults.imageResourcesPath,disableAutoFetch:true,disableStream:true,disableFontFace:disableFontFace});loading.promise.then(function sourceLoaded(pdf){_this.pdfDocument=pdf;pdf.getPage(1).then(function(page){_this.normalViewport=page.getViewport({scale:1});_this.viewport=page.getViewport({scale:1});_this.viewport.height=_this.viewport.height/10;_this.viewport.width=_this.viewport.width/10;_this.pageRatio=_this.viewport.width/_this.viewport.height;_this.bookSize={width:(_this.pageRatio>1?1:_this.pageRatio)*_this.maxLength,height:_this.maxLength/(_this.pageRatio<1?1:_this.pageRatio)};_this.zoomViewport={width:(_this.pageRatio>1?1:_this.pageRatio)*_this.maxDimension,height:_this.maxDimension/(_this.pageRatio<1?1:_this.pageRatio)};_this.refPage=page;if(pdf.numPages>1){pdf.getPage(2).then(function(page){if(_this.options.pageSize==DFLIP.PAGE_SIZE.AUTO){var _viewport=page.getViewport({scale:1});var _pageRatio=_viewport.width/_viewport.height;if(_pageRatio>_this.pageRatio*1.5){_this.options.pageSize=DFLIP.PAGE_SIZE.DOUBLEINTERNAL;_this.pageCount=pdf.numPages*2-2}else{_this.options.pageSize=DFLIP.PAGE_SIZE.SINGLE}}if(callback!=null){callback(_this);callback=null}})}else{if(callback!=null){callback(_this);callback=null}}});_this.linkService=new PDFLinkService;_this.linkService.setDocument(pdf,null);_this.pageCount=pdf.numPages;_this.contentSource=pdf},function loadingError(error){if(_this){var cors="",tmp=document.createElement("a");tmp.href=_this.contentSource;if(tmp.hostname!==window.location.hostname)cors="CROSS ORIGIN!! ";_this.updateInfo(cors+"Cannot access file!  "+_this.contentSource)}});loading.onProgress=function getDocumentProgress(progressData){if(_this){var percentage=100*progressData.loaded/progressData.total;if(isNaN(percentage)){if(progressData&&progressData.loaded){_this.updateInfo(_this.options.text.loading+" PDF "+(Math.ceil(progressData.loaded/1e4)/100).toString()+"MB ...")}else{_this.updateInfo(_this.options.text.loading+" PDF ...")}}else{_this.updateInfo(_this.options.text.loading+" PDF "+percentage.toString().split(".")[0]+"% ...")}}}}};var checkCORS=function(){if(_this){if(defaults.pdfjsWorkerSrc.indexOf("?ver")<0)defaults.pdfjsWorkerSrc+="?ver="+DFLIP.version;_this.updateInfo(_this.options.text.loading+" PDF Worker ...");var tmp=document.createElement("a");tmp.href=defaults.pdfjsWorkerSrc;if(tmp.hostname!==window.location.hostname){_this.updateInfo(_this.options.text.loading+" PDF Worker CORS ...");$.ajax({url:defaults.pdfjsWorkerSrc,cache:true,success:function(data){defaults.pdfjsWorkerSrc=DFLIP.createObjectURL(data,"text/javascript");checkSource()}})}else{checkSource()}}};if(window.pdfjsLib==null){if(_this){_this.updateInfo(_this.options.text.loading+" PDF Service ...");getScript(defaults.pdfjsSrc+"?ver="+DFLIP.version,function(){if(typeof define==="function"&&define.amd&&window.requirejs){_this.updateInfo(_this.options.text.loading+" PDF Service (require) ...");require.config({paths:{"pdfjs-dist/build/pdf.worker":defaults.pdfjsWorkerSrc.replace(".js","")}});require(["pdfjs-dist/build/pdf"],function(pdfjsLib){window.pdfjsLib=pdfjsLib;checkCORS()})}else if(typeof exports==="object"&&exports["pdfjs-dist/build/pdf"]!=null){window.pdfjsLib=exports["pdfjs-dist/build/pdf"];checkCORS()}else{checkCORS()}},function(){_this.updateInfo("Unable to load PDF service..")})}}else{checkSource()}}else{console.error("Unknown source type. Please check documentation for help")}this.dispose=function(){if(_this.loading&&_this.loading.destroy){_this.loading.destroy()}_this.loading=null;if(_this.textureLoadTimeOut){clearTimeout(_this.textureLoadTimeOut);_this.textureLoadTimeOut=null}if(this.targetObject){if(this.targetObject.thumbContainer&&this.targetObject.thumbContainer.remove)this.targetObject.thumbContainer.remove();if(this.targetObject.outlineContainer&&this.targetObject.outlineContainer.remove)this.targetObject.outlineContainer.remove();if(this.targetObject.dispose)this.targetObject.dispose();this.targetObject.processPage=null;this.targetObject.requestPage=null;if(this.targetObject.container&&this.targetObject.container.off)this.targetObject.container.off()}if(this.pdfDocument&&this.pdfDocument.destroy)this.pdfDocument.destroy();if(this.linkService&&this.linkService.dispose)this.linkService.dispose();if(this.outlineViewer&&this.outlineViewer.dispose)this.outlineViewer.dispose();if(this.thumblist&&this.thumblist.dispose){this.thumblist.review=null;this.thumblist.dispose()}this.activeThumb=null;this.targetObject=null;this.pdfDocument=null;this.linkService=null;this.outlineViewer=null;this.thumblist=null;_this=null};return this}ContentProvider.prototype.updateInfo=function(info){if(this.flipbook&&this.flipbook.updateInfo){this.flipbook.updateInfo(info)}};ContentProvider.prototype.initThumbs=function(){var _this=this;if(_this.cache[_this.thumbsize]==null)_this.cache[_this.thumbsize]=[];var thumbLoadTimeOut;var review=function(){clearTimeout(thumbLoadTimeOut);thumbLoadTimeOut=setTimeout(function(){thumbLoadTimeOut=setTimeout(reviewThumbs,_this.waitPeriod/2)},_this.waitPeriod)};var reviewThumbs=function(){var requestCount=0;if(Date.now()-_this.thumblist.lastScrolled<100){requestCount=1}else{_this.targetObject.container.find(".df-thumb-container .df-vrow").each(function(){var thumb=$(this);if(!thumb.hasClass("df-thumb-loaded")){requestCount++;var id=$(this).attr("id").replace("df-thumb","");_this.getPage(id,review,true);thumb.addClass("df-thumb-loaded");return false}});if(requestCount==0){clearTimeout(thumbLoadTimeOut)}}if(requestCount>0){review()}if(_this.activeThumb!=_this.targetObject._activePage){var thumbVisible=_this.targetObject.thumbContainer!=null&&_this.targetObject.thumbContainer.hasClass("df-sidemenu-visible");if(thumbVisible){var wrapper=_this.thumblist.container;var cScroll=wrapper.scrollTop,cHeight=wrapper.getBoundingClientRect().height;var thumb=_this.targetObject.thumbContainer.find("#df-thumb"+_this.targetObject._activePage);if(thumb.length>0){_this.targetObject.thumbContainer.find(".df-selected").removeClass("df-selected");thumb.addClass("df-selected");thumb=thumb[0];if(cScroll+cHeight<thumb.offsetTop+thumb.scrollHeight)utils.scrollIntoView(thumb,null,false);else if(cScroll>thumb.offsetTop)utils.scrollIntoView(thumb);_this.activeThumb=_this.targetObject._activePage}else{$(wrapper).scrollTop(_this.targetObject._activePage*124);review()}}}};_this.thumblist=_this.targetObject.thumblist=new ThumbList({h:500,addFn:function(row){},scrollFn:review,itemHeight:128,totalRows:_this.pageCount,generatorFn:function(row){var el=document.createElement("div");var pageNumber=row+1;el.id="df-thumb"+pageNumber;var elText=document.createElement("div");elText.innerHTML=pageNumber;el.appendChild(elText);return el}});_this.thumblist.lastScrolled=Date.now();_this.thumblist.review=review;review();var thumbContainer=$("<div>").addClass("df-thumb-container df-sidemenu-visible df-sidemenu");thumbContainer.append($(_this.thumblist.container).addClass("df-thumb-wrapper"));_this.targetObject.thumbContainer=thumbContainer;_this.targetObject.container.append(thumbContainer);var sideMenuClose=$(html.div,{class:"df-ui-btn df-ui-sidemenu-close ti-close"});thumbContainer.append(sideMenuClose);_this.thumblist.reset($(_this.thumblist.container).height());_this.targetObject.container.on("click",".df-thumb-container .df-vrow",function(e){e.stopPropagation();var id=$(this).attr("id").replace("df-thumb","");_this.targetObject.gotoPage(parseInt(id,10))})};ContentProvider.prototype.initOutline=function(){var _this=this;var outlineContainer=$("<div>").addClass("df-outline-container df-sidemenu");var outlineWrapper=$("<div>").addClass("df-outline-wrapper");var sideMenuClose=$(html.div,{class:"df-ui-btn df-ui-sidemenu-close ti-close"});outlineContainer.append(sideMenuClose).append(outlineWrapper);_this.targetObject.container.append(outlineContainer);_this.targetObject.outlineContainer=outlineContainer;_this.outlineViewer=new BookMarkViewer({container:outlineWrapper[0],linkService:_this.linkService,outlineItemClass:"df-outline-item",outlineToggleClass:"df-outline-toggle",outlineToggleHiddenClass:"df-outlines-hidden"});function processOutline(outline){if(_this.options.overwritePDFOutline==true){outline=[]}outline=outline||[];if(_this.outline){for(var count=0;count<_this.outline.length;count++){_this.outline[count].custom=true;if(outline)outline.push(_this.outline[count])}}if(outline.length===0&&_this.targetObject.ui.outline!=null){_this.targetObject.ui.outline.hide()}_this.outlineViewer.render({outline:outline})}if(_this.pdfDocument){_this.pdfDocument.getOutline().then(function(outline){processOutline(outline)})}else{processOutline([])}if(_this.options.autoEnableOutline==true){_this.targetObject.ui.outline.trigger("click")}if(_this.options.autoEnableThumbnail==true){_this.targetObject.ui.thumbnail.trigger("click")}};ContentProvider.prototype.checkViewportSize=function(width,height,zoom){var _this=this;var target=_this.targetObject;var zoomWidth=width*zoom,zoomHeight=height*zoom;var oldCacheSize=_this.cacheIndex;if(_this.contentSourceType==SOURCE_TYPE.PDF){_this.cacheIndex=Math.ceil(Math.max(zoomWidth,zoomHeight));_this.cacheIndex=Math.floor(Math.max(zoomWidth,zoomHeight));_this.cacheIndex=limitAt(_this.cacheIndex*defaults.pixelRatio,_this.minDimension,_this.maxDimension);if(_this.cache[_this.cacheIndex]==null)_this.cache[_this.cacheIndex]=[];if(oldCacheSize!==_this.cacheIndex){for(var pageCount=0;pageCount<target.children.length;pageCount++){var page=target.children[pageCount]}target.refresh()}_this.imageViewport=_this.refPage.getViewport({scale:zoomHeight/_this.normalViewport.height});_this.viewport=target.mode=="css"?_this.imageViewport:_this.refPage.getViewport({scale:_this.bookSize.height/_this.normalViewport.height});log(_this.cacheIndex);_this.annotedPage=undefined;_this.review()}else{if(_this.cache[_this.cacheIndex]==null)_this.cache[_this.cacheIndex]=[]}};ContentProvider.prototype.getCache=function(index,isThumb){return isThumb==true?this.cache[this.thumbsize]==null?null:this.cache[this.thumbsize][index]:this.cache[this.cacheIndex]==null?null:this.cache[this.cacheIndex][index]};ContentProvider.prototype.setCache=function(index,src,isThumb,cacheIndexSize){if(isThumb==true){if(this.cache[this.thumbsize]!=null)this.cache[this.thumbsize][index]=src}else{var cacheIndex=cacheIndexSize==null?this.cacheIndex:cacheIndexSize;if(this.cache[cacheIndex]!=null)this.cache[cacheIndex][index]=src}};ContentProvider.prototype.setTarget=function(targetObject){var _this=this;if(targetObject==null){return this.targetObject}else{this.targetObject=targetObject;targetObject.contentProvider=this;targetObject.container.removeClass("df-loading df-init");if(_this.linkService!=null){_this.linkService.setViewer(targetObject);_this.initOutline()}targetObject.processPage=function(pageNumber,callback){if(pageNumber>0&&pageNumber<=_this.pageCount){_this.getPage(pageNumber,callback)}else{_this.setPage(pageNumber,defaults.textureLoadFallback,callback)}};targetObject.requestPage=function(){_this.review("Request")};if(targetObject.resize!=null)targetObject.resize()}};ContentProvider.prototype.review=function(message){var _this=this;message=message||"timer review";clearTimeout(_this.textureLoadTimeOut);_this.textureLoadTimeOut=setTimeout(function(){_this.textureLoadTimeOut=setTimeout(_this.reviewPages,_this.waitPeriod/2,_this,message)},_this.waitPeriod)};ContentProvider.prototype.reviewPages=function(_this,message){_this=_this||this;var target=_this.targetObject;if(target==null)return;var isBooklet=isBookletMode(target);if(message!=null)log(message);var requiresRevisit=false;var pageCount,page;for(pageCount=0;pageCount<_this.targetObject.children.length;pageCount++){page=target.children[pageCount];if(page.isFlipping==true){requiresRevisit=true;break}}if(requiresRevisit==false){var pageLength=target.children.length>3?3:target.children.length;var midPoint=pageLength/2;var basePage=isBooklet?target._activePage:getBasePage(target._activePage);_this.baseNumber=basePage;if(_this.zoomScale>1){pageLength=1}for(pageCount=0;pageCount<pageLength;pageCount++){var dividend=Math.floor(pageCount/2);var diff=pageCount%2==0?-dividend*(isBooklet?1:2):(dividend==0?1:dividend)*(isBooklet?1:2);var frontPageNumber=basePage+diff,backPageNumber=basePage+diff+1;var page1=target.getPageByNumber(frontPageNumber),page2=target.getPageByNumber(backPageNumber),reqFrontPageStamp=frontPageNumber+"|"+_this.cacheIndex,reqBackPageStamp=backPageNumber+"|"+_this.cacheIndex;var requestCount=0;if(page1!=null&&page1.frontPageStamp!=reqFrontPageStamp&&page1.visible==true){page1.frontTextureLoaded=false;target.processPage(frontPageNumber,function(){_this.review("Batch Call")});page1.frontPageStamp=reqFrontPageStamp;requestCount++}if(page2!=null&&page2.backPageStamp!=reqBackPageStamp&&page2.visible==true&&!isBooklet){page2.backTextureLoaded=false;target.processPage(backPageNumber,function(){_this.review("Batch Call")});page2.backPageStamp=reqBackPageStamp;requestCount++}if(diff==0&&_this.annotedPage!==basePage){_this.getAnnotations(frontPageNumber);if(!isBooklet)_this.getAnnotations(backPageNumber);_this.annotedPage=basePage}if(requestCount>0){break}}if(requestCount==0){if(target.mode!=="css"){_this.setLoading(basePage)}else{}}}else{_this.review("Revisit request");if(_this.annotedPage!=null&&target.mode!=="css"){var baseActive=getBasePage(target._activePage);$(target.getContentLayer(baseActive)).html("");$(target.getContentLayer(baseActive+1)).html("");_this.annotedPage=null}}};ContentProvider.prototype.getPage=function(pageNumber,callbackFunction,isThumb){var _this=this;pageNumber=parseInt(pageNumber,10);var _pageNumber=pageNumber;var source=_this.contentSource;if(pageNumber<=0&&pageNumber>=_this.pageCount){_this.setPage(pageNumber,defaults.textureLoadFallback,callbackFunction,isThumb)}else{if(_this.contentSourceType==SOURCE_TYPE.PDF){if(_this.getCache(pageNumber,isThumb)!=null){_this.setPage(pageNumber,_this.getCache(pageNumber,isThumb),callbackFunction,isThumb);log("Page "+pageNumber+" loaded from cache")}else{if(isThumb!==true)_this.setLoading(pageNumber,true);if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>2){_pageNumber=Math.ceil((pageNumber-1)/2)+1}source.getPage(_pageNumber,isThumb).then(function(page){renderPage(page,pageNumber,callbackFunction,isThumb)})}}else if(_this.contentSourceType==SOURCE_TYPE.IMAGE||_this.contentSourceType==SOURCE_TYPE.HTML){if(_this.getCache(pageNumber,isThumb)!=null){_this.setPage(pageNumber,_this.getCache(pageNumber,isThumb),callbackFunction,isThumb);log("Page "+pageNumber+" loaded from cache")}else{if(isThumb!==true)_this.setLoading(pageNumber,true);if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>2){_pageNumber=Math.ceil((pageNumber-1)/2)+1}loadImagejQuery(source[_pageNumber-1],function(src){_this.setCache(pageNumber,src,isThumb,_this.cacheIndex);_this.setPage(pageNumber,src,callbackFunction,isThumb);if(callbackFunction!=null)callbackFunction()},_this.isCrossOrigin)}}}function loadImage(src,callback,isCrossOrigin){var img=new Image;img.crossOrigin="Anonymous";img.onload=function(){if(isCrossOrigin==true){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0);if(defaults.canvasToBlob==true){canvas.toBlob(function(blob){var src=DFLIP.createObjectURL(blob,"image/jpeg");if(callback!=null)callback(src)},"image/jpeg",.85)}else{if(callback!=null)callback(canvas)}}else{if(callback!=null)callback(src)}img.onload=null;img=null};img.src=src;if(img.complete||img.complete===undefined){img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";img.src=src}}function loadImagejQuery(src,callback,isCrossOrigin){$("<img/>").attr("src",src).on("load",function(){$(this).off();if(callback!=null){callback(src)}log(this.height+":"+this.width)})}function renderPage(page,pageNumber,callbackFunction,isThumb){var forceFit=_this.options.forceFit;var isDoublePage=_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>1&&pageNumber<_this.pageCount;var widthFix=isDoublePage&&forceFit?2:1;var viewport=forceFit?page.getViewport({scale:1}):_this.normalViewport;var scale=_this.cacheIndex/Math.max(viewport.width/widthFix,viewport.height);if(_this.webgl==true){scale=nearestPowerOfTwo(_this.cacheIndex)/(_this.pageRatio>1?viewport.width/widthFix:viewport.height)}var canvas=document.createElement("canvas");var start=performance.now();var requestedCacheSize=_this.cacheIndex;var context=canvas.getContext("2d");if(isThumb==true){scale=_this.thumbsize/_this.normalViewport.height}canvas.height=Math.round(viewport.height*scale);canvas.width=Math.round(viewport.width/widthFix*scale);if(_this.targetObject.mode=="css"&&Math.abs(_this.targetObject.zoomHeight-canvas.height)<2){canvas.height=_this.targetObject.zoomHeight+0;canvas.width=_this.targetObject.zoomWidth+0}viewport=page.getViewport({scale:scale});log("rendering "+pageNumber+" at "+canvas.width+"x"+canvas.height);if(isDoublePage){if(isRTLMode(_this.targetObject)){if(pageNumber%2==0){viewport.transform[4]=-canvas.width}}else{if(pageNumber%2==1){viewport.transform[4]=-canvas.width}}}var renderContext={canvasContext:context,viewport:viewport};page.cleanupAfterRender=true;var pageRendering=page.render(renderContext);pageRendering.promise.then(function(){log(performance.now()-start);start=performance.now();if(isThumb==true||_this.options.canvasToBlob==true&&_this.webgl!==true){canvas.toBlob(function(blob){var src=DFLIP.createObjectURL(blob,"image/jpeg");log(performance.now()-start);_this.setCache(pageNumber,src,isThumb,requestedCacheSize);_this.setPage(pageNumber,src,callbackFunction,isThumb)},"image/jpeg",_this.pdfRenderQuality)}else{log("Setting Page "+pageNumber);_this.setPage(pageNumber,canvas,callbackFunction,isThumb)}renderContext=null})}};ContentProvider.prototype.getTargetPage=function(pageNumber){};ContentProvider.prototype.setLoading=function(pageNumber,show){if(this.targetObject!=null){if(this.webgl==true){var container=this.targetObject.container;if(show==true){if(container.isLoading!==true){container.addClass("df-loading");container.isLoading=true;log("Loading icon at "+pageNumber+" as "+show)}}else{if(container.isLoading!=null){container.removeClass("df-loading");container.isLoading=null;log("Loading icon at "+pageNumber+" as "+show)}}}else{var contentLayer=$(this.targetObject.getContentLayer(pageNumber));if(contentLayer!=null){if(show==true)contentLayer.addClass("df-page-loading");else contentLayer.removeClass("df-page-loading");log("Loading icon at "+pageNumber+" as "+show)}}}};ContentProvider.prototype.getAnnotations=function(pageNumber){var _this=this;if(_this.options.enableAnnotation==false)return;var target=_this.targetObject;pageNumber=parseInt(pageNumber,10);var source=_this.contentSource;var contentLayer=$(target.getContentLayer(pageNumber));contentLayer.empty();if(pageNumber>0&&pageNumber<=_this.pageCount){if(_this.contentSourceType==SOURCE_TYPE.PDF){var basePage=getBasePage(pageNumber);var _pageNumber=pageNumber;if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>2){_pageNumber=Math.ceil((pageNumber-1)/2)+1}source.getPage(_pageNumber).then(function(page){if(contentLayer!=null&&contentLayer.length>0){var viewport=page.getViewport({scale:1});viewport=page.getViewport({scale:_this.viewport.height/viewport.height});_this.setupAnnotations(page,viewport,contentLayer,pageNumber)}})}if(_this.links!=null&&_this.links[pageNumber]!=null){var pageLinks=_this.links[pageNumber];for(var index=0;index<pageLinks.length;index++){var pageLink=pageLinks[index];var annotation;if(pageLink.dest&&pageLink.dest.indexOf&&pageLink.dest.indexOf("[html]")==0){annotation=document.createElement("div");annotation.innerHTML=pageLink.dest.substr(6);annotation.className="customHtmlAnnotation"}else{annotation=document.createElement("a");annotation.setAttribute("dest",pageLink.dest);annotation.className="customLinkAnnotation";annotation.href="#"+pageLink.dest;annotation.onclick=function(){var dest=this.getAttribute("dest");if(dest){_this.linkService.customNavigateTo(dest)}return false}}annotation.style.left=pageLink.x+"%";annotation.style.top=pageLink.y+"%";annotation.style.width=pageLink.w+"%";annotation.style.height=pageLink.h+"%";contentLayer[0].appendChild(annotation)}}if(_this.html!=null&&_this.html[pageNumber]!=null){var pageHTML=_this.html[pageNumber];contentLayer.append($("<div class='customHTMLAnnotation'>").html(pageHTML))}}};ContentProvider.prototype.setPage=function(pageNumber,textureSrc,callbackFunction,isThumb){var _this=this;var target=_this.targetObject;var isRTL=isRTLMode(target);var isBooklet=isBookletMode(target);if(isThumb==true){var page=_this.targetObject.container.find("#df-thumb"+pageNumber);page.css({backgroundImage:bgImage(textureSrc)})}else{if(textureSrc==defaults.textureLoadFallback){log("Fallback on "+pageNumber)}var bookPage=target.getPageByNumber(pageNumber);if(bookPage!=null){if(pageNumber%2!=0&&!isRTL||pageNumber%2!=1&&isRTL&&!isBooklet||isBooklet&&!isRTL){log(pageNumber+"rendered to back of "+bookPage.color);bookPage.backImage(textureSrc,function(object,texture){bookPage.backTextureLoaded=true;_this.setLoading(pageNumber);if(_this.requiresImageTextureScaling&&texture&&pageNumber!=1&&pageNumber!=_this.pageCount){texture.repeat.x=.5;texture.offset.x=.5}if(callbackFunction!=null)callbackFunction()})}else{log(pageNumber+"rendered to front of "+bookPage.color);bookPage.frontImage(textureSrc,function(object,texture){bookPage.frontTextureLoaded=true;_this.setLoading(pageNumber);if(_this.requiresImageTextureScaling&&texture&&pageNumber!=1&&pageNumber!=_this.pageCount){texture.repeat.x=.5}if(callbackFunction!=null)callbackFunction()})}}else{log("Invalid set request on Page "+pageNumber)}}};ContentProvider.prototype.setupAnnotations=function(page,viewport,pageDiv,pageNumber){if(pageDiv==null||$(pageDiv).length==0)return;var _this=this;return page.getAnnotations().then(function(annotationsData){viewport=viewport.clone({dontFlip:true});if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>2&&pageNumber%2==1){}else if(pageNumber==1){}if(pageDiv==null){return}pageDiv=$(pageDiv);if(pageDiv.find(".annotationDiv").length==0){pageDiv.append($("<div class='annotationDiv'>"))}var div=pageDiv.find(".annotationDiv");div.empty();if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>2&&pageNumber%2==1){div.css({left:"-100%"})}else if(pageNumber==1){div.css({left:""})}pdfjsLib.AnnotationLayer.render({annotations:annotationsData,div:div[0],page:page,viewport:viewport,imageResourcesPath:defaults.imageResourcesPath,linkService:_this.linkService});if(_this.options.annotationClass&&_this.options.annotationClass!==""){div.find(" > section").addClass(_this.options.annotationClass)}if(_this.options.search==true){if(pageDiv.find(".textLayerDiv").length==0){pageDiv.append($("<div class='textLayerDiv'>"))}var div2=pageDiv.find(".textLayerDiv");page.getTextContent().then(function(textContent){var textLayer=new DFLIP.TextLayerBuilder({textLayerDiv:div2[0],pageIndex:null,viewport:viewport.clone({dontFlip:false})});textLayer.setTextContent(textContent);textLayer.render()})}})};return ContentProvider}({});var PageCSS=function(){function PageCSS(parameters){this.angles=parameters.angles||[0,0,0,0,0,0];this.stiffness=parameters.angles||.1;this.segments=parameters.segments||1;this.canvasMode=parameters.contentSourceType!==SOURCE_TYPE.IMAGE&&parameters.canvasToBlob==false;this.initDOM()}function createInternals(pageSide){var contentLayer=pageSide.contentLayer=$(html.div,{class:"df-page-content"});pageSide.append(contentLayer)}PageCSS.prototype={initDOM:function(){var element=this.element=$(html.div,{class:"df-book-page"});var wrapper=this.wrapper=$(html.div,{class:"df-page-wrapper"});var front=this.front=$(html.div,{class:"df-page-front"});var back=this.back=$(html.div,{class:"df-page-back"});var foldInnerShadow=this.foldInnerShadow=$(html.div,{class:"df-page-fold-inner-shadow"});var foldOuterShadow=this.foldOuterShadow=$(html.div,{class:"df-page-fold-outer-shadow"});this.frontIMG=new Image;this.backIMG=new Image;createInternals(front,this.segments,true);createInternals(back,this.segments,false);element.append(wrapper).append(foldOuterShadow);wrapper.append(front).append(back).append(foldInnerShadow)},updatePoint:function(point){if(point==null)return;var page=this.parent.dragPage!=null?this.parent.dragPage:point.page!=null?point.page:this;var pageWidth=page.element.width(),pageHeight=page.element.height();var corner=this.parent.corner!=null?this.parent.corner:point.corner,corners=DFLIP.CORNERS;var isRight=page.side==drag.right,isBottom=corner==corners.BL||corner==corners.BR;point.rx=isRight==true?pageWidth*2-point.x:point.x;point.ry=isBottom==true?pageHeight-point.y:point.y;var radAngle=Math.atan2(point.ry,point.rx);radAngle=Math.PI/2-limitAt(radAngle,0,toRad(90));var correctionX=isRight?point.x/2:pageWidth-point.x/2,correctionY=point.ry/2,refLength=Math.max(0,Math.sin(radAngle-Math.atan2(correctionY,correctionX))*distOrigin(correctionX,correctionY)),foldLength=.5*distOrigin(point.rx,point.ry);var x=Math.round(pageWidth-refLength*Math.sin(radAngle)),y=Math.round(refLength*Math.cos(radAngle)),angle=toDeg(radAngle);var angle1=isBottom?isRight?180+(90-angle):180+angle:isRight?angle:90-angle;var angle2=isBottom?isRight?180+(90-angle):angle:isRight?angle+180:angle1,angleS=isBottom?isRight?90-angle:angle+90:isRight?angle1-90:angle1+180,x1=isRight?pageWidth-x:x,y1=isBottom?pageHeight+y:-y,x2=isRight?-x:x-pageWidth,y2=isBottom?-pageHeight-y:y;var opacity=limitAt(point.distance*.5/pageWidth,0,.5);var foldOpacity=limitAt((pageWidth*2-point.rx)*.5/pageWidth,.05,.3);page.element.addClass("df-folding");var front=isRight?page.back:page.front;var back=isRight?page.front:page.back;var outerShadow=page.foldOuterShadow;var innerShadow=page.foldInnerShadow;page.wrapper.css({transform:translateStr(x1,y1)+rotateStr(angle1)});front.css({transform:rotateStr(-angle1)+translateStr(-x1,-y1)});back.css({transform:rotateStr(angle2)+translateStr(x2,y2),boxShadow:"rgba(0, 0, 0, "+opacity+") 0px 0px 20px"});innerShadow.css({transform:rotateStr(angle2)+translateStr(x2,y2),opacity:foldOpacity/2,backgroundImage:prefix.css+"linear-gradient( "+angleS+"deg, rgba(0, 0, 0, 0.25) , rgb(0, 0, 0) "+foldLength*.7+"px, rgb(255, 255, 255) "+foldLength+"px)"});outerShadow.css({opacity:foldOpacity/2,left:isRight?"auto":0,right:isRight?0:"auto",backgroundImage:prefix.css+"linear-gradient( "+(-angleS+180)+"deg, rgba(0, 0, 0,0) "+foldLength/3+"px, rgb(0, 0, 0) "+foldLength+"px)"})},updateAngle:function(angle,isRight){var width=this.element.width()*5;this.wrapper.css({perspective:width,perspectiveOrigin:isRight==true?"0% 50%":"100% 50%"});this.front.css({display:isRight==true?angle<=-90?"block":"none":angle<90?"block":"none",transform:(prefix.dom!=="MfS"?"":"perspective("+width+"px) ")+(isRight==true?"translateX(-100%) ":"")+"rotateY("+((isRight==true?180:0)+angle)+"deg)"});this.back.css({display:isRight==true?angle>-90?"block":"none":angle>=90?"block":"none",transform:(prefix.dom!=="MSd"?"":"perspective("+width+"px) ")+(isRight==false?"translateX(100%) ":"")+"rotateY("+((isRight==false?-180:0)+angle)+"deg)"});return},tween:function(point){var page=this;if(page==null||page.parent==null)return;var isBooklet=isBookletMode(page.parent);var isRight=page.side==drag.right;var isRTL=page.parent.direction==DFLIP.DIRECTION.RTL;var isBottom=page.parent.corner==DFLIP.CORNERS.BL||page.parent.corner==DFLIP.CORNERS.BR;var isMagnetic=page.magnetic==true;var travelY=isBottom?page.parent.height:0;var init,first,mid,angle=0;var end=page.end=page&&page.animateToReset==true?{x:isRight?page.parent.fullWidth:0,y:travelY}:{x:isRight?0:page.parent.fullWidth,y:travelY};page.ease=page.isHard?TWEEN.Easing.Quadratic.InOut:TWEEN.Easing.Linear.None;var tempDuration=page.parent.duration;if(page.isHard==true){if(point!=null){angle=angleByDistance(point.distance,point.fullWidth)}init=page.init={angle:angle*(isRight?-1:1)};end=page.end=page&&page.animateToReset==true?{angle:isRight?0:-0}:{angle:isRight?-180:180}}else{if(point==null){init=page.init=page&&page.animateToReset==true?{x:isRight?0:page.parent.fullWidth,y:0}:{x:isRight?page.parent.fullWidth:0,y:0};first=page.first={x:(isRight?3:1)*page.parent.fullWidth/4,y:0};mid=page.mid={x:(isRight?1:3)*page.parent.fullWidth/4,y:0}}else{init=page.init={x:point.x,y:point.y,opacity:1};first=page.first={x:point.x*3/4,y:point.y*3/4,opacity:1};mid=page.mid={x:point.x/4,y:point.y/4,opacity:1};tempDuration=page.parent.duration*distPoints(init.x,init.y,end.x,end.y)/page.parent.fullWidth;tempDuration=limitAt(tempDuration,page.parent.duration/3,page.parent.duration)}}init.index=0;end.index=1;page.isFlipping=true;var update=function(tween){if(page.isHard==true){page.updateAngle(tween.angle,isRight);page.angle=tween.angle}else{page.updatePoint({x:tween.x,y:tween.y});page.x=tween.x;page.y=tween.y}if(isBooklet&&!isMagnetic)page.element[0].style.opacity=isRight&&!isRTL||!isRight&&isRTL?tween.index>.5?2*(1-tween.index):1:tween.index<.5?2*tween.index:1};if(isBooklet&&(!isRight&&!isRTL||isRight&&isRTL))page.element[0].style.opacity=0;var completeTween=page.completeTween=page.completeTween||function(skipRefresh){page.isFlipping=false;if(page.isHard==true){page.updateAngle(page.end.angle);page.back.css({display:"block"});page.front.css({display:"block"})}else{page.updatePoint({x:page.end.x,y:page.end.y})}page.element[0].style.opacity=1;if(page.animateToReset!==true){page.side=page.side==drag.right?drag.left:drag.right}else page.animateToReset=null;page.currentTween=null;page.pendingPoint=null;page.magnetic=false;page.parent.dragPage=null;page.parent.corner=DFLIP.CORNERS.NONE;if(skipRefresh!=true)page.parent.refresh()};if(page.isHard==true){page.currentTween=new TWEEN.Tween(init).delay(0).to(end,page.parent.duration).onUpdate(function(){update(this)}).easing(page.ease).onComplete(page.completeTween).start()}else{if(point==null){page.currentTween=new TWEEN.Tween(init).delay(0).to(end,page.parent.duration).onUpdate(function(){update(this)}).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(page.completeTween).start()}else{page.currentTween=new TWEEN.Tween(init).delay(0).to(end,tempDuration).onUpdate(function(){update(this)}).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(page.completeTween);page.currentTween.start()}}},frontImage:function(texture,callback){var _this=this;function completed(){_this.front.css({backgroundImage:bgImage(texture)});if(callback!=null)callback()}if(_this.canvasMode==true){_this.front.find(">canvas").remove();if(texture!==defaults.textureLoadFallback){_this.front.append($(texture))}if(callback!=null)callback()}else{if(texture==defaults.textureLoadFallback){completed()}else{_this.frontIMG.onload=completed;_this.frontIMG.src=texture}}},backImage:function(texture,callback){var _this=this;function completed(){_this.back.css({backgroundImage:bgImage(texture)});if(callback!=null)callback()}if(_this.canvasMode==true){_this.back.find(">canvas").remove();if(texture!==defaults.textureLoadFallback){_this.back.append($(texture))}if(callback!=null)callback()}else{if(texture==defaults.textureLoadFallback){completed()}else{_this.backIMG.onload=completed;_this.backIMG.src=texture}}},updateCSS:function(css){this.element.css(css)},resetCSS:function(){this.wrapper.css({transform:""});this.front.css({transform:"",boxShadow:""});this.back.css({transform:"",boxShadow:""})},clearTween:function(skipRefresh){this.currentTween.stop();this.completeTween(skipRefresh==true);this.resetCSS()}};return PageCSS}();var BookCSS=function(_super){__extends(BookCSS,_super);function updateFolding(dragPage){dragPage.parent.container.find(".df-folding").removeClass("df-folding");dragPage.element.addClass("df-folding")}function hasFlipping(book){var hasFlipping=false;for(var pageCount=0;pageCount<book.pages.length;pageCount++){var page=book.pages[pageCount];if(page.isFlipping==true){hasFlipping=true;break}}return hasFlipping}function BookCSS(parameters,container){var _this=this;_this.type="BookCSS";_this.images=parameters.images||[];_this.pageCount=parameters.pageCount||1;_this.foldSense=50;_this.stackCount=4;_this.mode="css";_this.pages=[];_this.duration=parameters.duration;_this.container=$(container);_this.options=parameters;_this.drag=drag.none;_this.pageMode=parameters.pageMode||(isMobile||_this.pageCount<=2?DFLIP.PAGE_MODE.SINGLE:DFLIP.PAGE_MODE.DOUBLE);_this.singlePageMode=parameters.singlePageMode||(isMobile?DFLIP.SINGLE_PAGE_MODE.BOOKLET:DFLIP.SINGLE_PAGE_MODE.ZOOM);_this.swipe_threshold=isMobile?15:50;_this.direction=parameters.direction||DFLIP.DIRECTION.LTR;_this.startPage=1;_this.endPage=_this.pageCount;_this._activePage=parameters.openPage||_this.startPage;_this.hardConfig=parameters.hard;has3d="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style;_this.animateF=function(){if(TWEEN.getAll().length>0)TWEEN.update();else clearInterval(_this.animate)};_this.init(parameters);_this.skipDrag=false;function checkPage(point){if(_this.dragPage!=point.page&&point.page.visible==true){_this.dragPage.clearTween(true);_this.dragPage=point.page;_this.corner=point.corner;_this.dragPage.pendingPoint=point}}var mouseMove=function(event){var point=_this.eventToPoint(event);if(event.touches!=null&&event.touches.length==2&&_this.startTouches!=null){_this.zoomDirty=true;var touchCenter=utils.getVectorAvg(utils.getTouches(event,_this.container.offset())),newScale=utils.calculateScale(_this.startTouches,utils.getTouches(event)),scale=newScale/_this.lastScale;var zoom=_this.contentProvider.zoomScale,x=touchCenter.x,y=touchCenter.y;_this.stage.css({transform:"translate3d("+_this.left+"px,"+_this.top+"px,0) scale3d("+newScale+","+newScale+",1)"});_this.lastScale=newScale;_this.lastZoomCenter=touchCenter;event.preventDefault()}if(event.touches!=null&&event.touches.length>1||_this.startPoint==null||_this.startTouches!=null)return;var targetPage=_this.dragPage||point.page;if(_this.contentProvider.zoomScale!==1){if(event.touches!=null||_this.isPanning==true){_this.pan(point);event.preventDefault()}}else{if(_this.skipDrag!==true){var distance=point.distance;if(!hasFlipping(_this)){if(_this.dragPage!=null||point.isInside==true){if(_this.dragPage!=null){log("set mouse down move")}else{point.y=limitAt(point.y,1,_this.height-1);point.x=limitAt(point.x,1,point.fullWidth-1)}var corner=_this.corner||point.corner;if(targetPage.isHard){var isRight=corner==DFLIP.CORNERS.BR||corner==DFLIP.CORNERS.TR;var angle=angleByDistance(point.distance,point.fullWidth);targetPage.updateAngle(angle*(isRight?-1:1),isRight)}else{targetPage.updatePoint(point,_this)}targetPage.magnetic=true;targetPage.magneticCorner=point.corner;event.preventDefault()}if(_this.dragPage==null&&targetPage!=null&&point.isInside==false&&targetPage.magnetic==true){targetPage.pendingPoint=point;targetPage.animateToReset=true;_this.corner=targetPage.magneticCorner;_this.animatePage(targetPage);targetPage.pendingPoint=null;targetPage.magnetic=false;targetPage.magneticCorner=null}if(_this.isPanning==true&&_this.dragPage==null&&_this.contentProvider.zoomScale==1){var swipe_dist=point.x-_this.lastPos,swipe_time=performance.now()-_this.lastTime;if(Math.abs(swipe_dist)>_this.swipe_threshold){if(swipe_dist<0){_this.next()}else{_this.prev()}_this.drag=drag.none;_this.isPanning=false;event.preventDefault()}_this.lastPos=point.x;_this.lastTime=performance.now()}}}}},mouseUp=function(event){if(event.touches!=null&&event.touches.length==0){var zoom=_this.contentProvider.zoomScale;if(_this.zoomDirty==true){_this.previewObject.contentProvider.zoomScale=utils.limitAt(_this.previewObject.contentProvider.zoomScale*_this.lastScale,1,_this.previewObject.contentProvider.maxZoom);_this.previewObject.zoomValue=_this.previewObject.contentProvider.zoomScale*1;_this.previewObject.resize();_this.zoomDirty=false}_this.wrapper.css({transform:""});_this.lastScale=null;_this.startTouches=null}_this.isPanning=false;if(event.touches!=null&&event.touches.length>1)return;if(_this.skipDrag!==true){var point=_this.eventToPoint(event);if(_this.dragPage){event.preventDefault();_this.dragPage.pendingPoint=point;if(point.x==_this.startPoint.x&&point.y==_this.startPoint.y&&point.isInside==true){if(_this.corner==DFLIP.CORNERS.BR||_this.corner==DFLIP.CORNERS.TR){checkPage(point);if(_this.dragPage.isFlipping!==true)_this.next()}else if(_this.corner==DFLIP.CORNERS.BL||_this.corner==DFLIP.CORNERS.TL){checkPage(point);if(_this.dragPage.isFlipping!==true)_this.prev()}}else if(_this.dragPage.isFlipping!==true){if(point.distance>point.fullWidth/2){if(point.x>point.fullWidth/2)_this.prev();else _this.next()}else{_this.dragPage.animateToReset=true;_this.animatePage(_this.dragPage)}}if(_this.dragPage){_this.dragPage.pendingPoint=null;_this.dragPage.magnetic=false}}else{}_this.drag=drag.none}},mouseClick=function(event){var point=_this.eventToPoint(event);var element=event.srcElement||event.originalTarget;if(_this.dragPage&&_this.dragPage.magnetic)return;if(_this.wrapper[0].contains(event.target)&&_this.contentProvider.zoomScale==1&&point.x==_this.startPoint.x&&point.y==_this.startPoint.y&&point.isInsidePage&&_this.startPoint.page==point.page&&!point.page.isFlipping&&element.nodeName!=="A"){if(_this.startPoint.page.side==0){_this.corner=DFLIP.CORNERS.TL;_this.prev();_this.startPoint.page=null}else{_this.corner=DFLIP.CORNERS.TR;_this.next();_this.startPoint.page=null}_this.isPanning=false}},mouseDown=function(event){if(event.touches!=null&&event.touches.length==2&&_this.startTouches==null){_this.startTouches=utils.getTouches(event);_this.lastScale=1}if(event.touches!=null&&event.touches.length>1||event.touches==null&&event.button!==0)return;var point=_this.eventToPoint(event);_this.startPoint=point;_this.left=_this.left||0;_this.top=_this.top||0;_this.isPanning=true;_this.lastPos=point.x;_this.lastTime=performance.now();if(_this.skipDrag!==true){if(point.isInside==true&&!hasFlipping(_this)){_this.startPoint=point;_this.drag=point.drag;_this.dragPage=point.page;_this.corner=point.corner;log(_this.corner);updateFolding(_this.dragPage);if(point.page.isHard){}else{point.page.updatePoint(point,_this)}if(point.page.name=="0"){_this.shadow.css({width:"50%",left:_this.direction==DFLIP.DIRECTION.RTL?0:"50%",transitionDelay:""})}else if(point.page.name==Math.ceil(_this.pageCount/2)-1){_this.shadow.css({width:"50%",left:_this.direction==DFLIP.DIRECTION.RTL?"50%":0,transitionDelay:""})}}}},onMouseWheel=function(event){var delta=0;if(event.wheelDelta!=null){delta=event.wheelDelta/120}else if(event.detail!=null){delta=-event.detail/3}var zoom1=_this.contentProvider.zoomScale,maxZoom=_this.contentProvider.maxZoom;if(delta){if(delta>0&&zoom1<maxZoom||delta<0&&zoom1>1){event.stopPropagation();event.preventDefault();var pointOld=_this.eventToPoint(event);var pointNew=_this.eventToPoint(event);var origin={x:_this.container.width()/2,y:-23+_this.container.height()/2};_this.previewObject.zoom(delta);var zoom2=_this.contentProvider.zoomScale;if(zoom1!==zoom2){var dz=zoom2/zoom1;if(zoom2==1){_this.left=0;_this.top=0}else{_this.left*=dz;_this.top*=dz}var dx=(pointOld.raw.x-origin.x)*dz,dy=(pointOld.raw.y-origin.y)*dz;pointNew.raw.x=origin.x+dx;pointNew.raw.y=origin.y+dy;_this.startPoint=pointNew;_this.pan(pointOld);var targetPage=_this.dragPage||pointOld.page;if(_this.dragPage==null&&targetPage!=null&&pointOld.isInside==true&&targetPage.magnetic==true){targetPage.pendingPoint=pointOld;targetPage.animateToReset=true;_this.corner=targetPage.magneticCorner;_this.animatePage(targetPage);targetPage.pendingPoint=null;targetPage.magnetic=false;targetPage.magneticCorner=null}}}}};var containerDom=_this.container[0];var stageDom=_this.stage[0];if(containerDom){stageDom.addEventListener("mousemove",mouseMove,false);stageDom.addEventListener("touchmove",mouseMove,false);stageDom.addEventListener("mousedown",mouseDown,false);stageDom.addEventListener("click",mouseClick,false);stageDom.addEventListener("mouseup",mouseUp,false);stageDom.addEventListener("touchend",mouseUp,false);stageDom.addEventListener("touchstart",mouseDown,false);if(_this.options.scrollWheel==true){stageDom.addEventListener("mousewheel",onMouseWheel,false);stageDom.addEventListener("DOMMouseScroll",onMouseWheel,false)}}this.dispose=function(){stageDom.removeEventListener("mousemove",mouseMove,false);stageDom.removeEventListener("touchmove",mouseMove,false);stageDom.removeEventListener("mousedown",mouseDown,false);stageDom.removeEventListener("click",mouseClick,false);stageDom.removeEventListener("mouseup",mouseUp,false);stageDom.removeEventListener("touchend",mouseUp,false);stageDom.removeEventListener("touchstart",mouseDown,false);if(_this.options.scrollWheel==true){stageDom.removeEventListener("mousewheel",onMouseWheel,false);stageDom.removeEventListener("DOMMouseScroll",onMouseWheel,false)}_this.updatePageCallback=null;_this.flipCallback=null;_this.animateF=null;_this.stage.remove()}}BookCSS.prototype={add:function(object){if(object instanceof PageCSS)this.container.append($(object.element));else this.container.append($(object))},pan:function(point){var origin=this.startPoint;var scale=this.contentProvider.zoomScale;var left=this.left+(point.raw.x-origin.raw.x),top=this.top+(point.raw.y-origin.raw.y);this.left=Math.round(limitAt(left,-this.shiftWidth,this.shiftWidth));this.top=Math.round(limitAt(top,-this.shiftHeight,this.shiftHeight));if(scale==1){this.left=0;this.top=0}this.startPoint=point;this.stage.css({transform:"translate3d("+this.left+"px,"+this.top+"px,0)"})},getPageByNumber:function(pageNumber){var relativePageNumber=isBookletMode(this)?isRTLMode(this)?pageNumber+1:pageNumber:Math.floor((pageNumber-1)/2);var page;for(var count=0;count<this.pages.length;count++){if(relativePageNumber==parseInt(this.pages[count].name,10))page=this.pages[count]}return page},getPageSide:function(pageNumber){var isRTL=this.direction==DFLIP.DIRECTION.RTL;var page=this.getPageByNumber(pageNumber);if(page==null)return;if(isBookletMode(this))return isRTL?page.front:page.back;if(pageNumber%2==0)return isRTL?page.back:page.front;else return isRTL?page.front:page.back},getContentLayer:function(pageNumber){var pageSide=this.getPageSide(pageNumber);return pageSide==null?null:pageSide.contentLayer}};BookCSS.prototype.init=function(parameters){var _this=this;_this.stage=$(html.div,{class:"df-book-stage"});_this.wrapper=$(html.div,{class:"df-book-wrapper"});_this.shadow=$(html.div,{class:"df-book-shadow"});_this.container.append(_this.stage);_this.stage.append(_this.wrapper);_this.wrapper.append(_this.shadow);_this.createStack(parameters)};BookCSS.prototype.createStack=function(parameters){var colors="red,green,blue,yellow,orange,black".split(",");for(var _stackCount=0;_stackCount<this.stackCount;_stackCount++){parameters.angles=[,this.stackCount-_stackCount];parameters.stiffness=(this.stackCount-_stackCount)/100;var clone=new PageCSS(parameters);clone.angles[1]=180;clone.index=_stackCount;clone.parent=this;clone.textureReady=false;clone.textureRequested=false;this.wrapper.append(clone.element);clone.isFlipping=false;this.pages.push(clone);clone.color=colors[_stackCount]}this.children=this.pages};BookCSS.prototype.isPageHard=function(pageNumber){return utils.isHardPage(this.hardConfig,pageNumber,this.pageCount,isBookletMode(this))};BookCSS.prototype.setDuration=function(_duration){this.duration=_duration};BookCSS.prototype.moveBy=function(step){var nextPage=this._activePage+step;nextPage=limitAt(nextPage,this.startPage,this.endPage);if(this.firstFlipped!=true){this.previewObject.analytics({eventAction:"First Page Flip",options:this.previewObject.options});this.firstFlipped=true}this.gotoPage(nextPage)};BookCSS.prototype.next=function(step){if(step==null)step=this.direction==DFLIP.DIRECTION.RTL?-this.pageMode:this.pageMode;this.moveBy(step)};BookCSS.prototype.prev=function(step){if(step==null)step=this.direction==DFLIP.DIRECTION.RTL?this.pageMode:-this.pageMode;this.moveBy(step)};BookCSS.prototype.eventToPoint=function(event){event=fixMouseEvent(event);var wrapper=this.wrapper,pages=this.pages,pageWidth=this.pageWidth,fullWidth=this.fullWidth,height=this.height,win=$(window),point={x:event.clientX,y:event.clientY};var left=point.x-wrapper[0].getBoundingClientRect().left;var top=point.y-wrapper[0].getBoundingClientRect().top;point.x=point.x-this.container[0].getBoundingClientRect().left;point.y=point.y-this.container[0].getBoundingClientRect().top;var distance=this.drag==drag.none?left<pageWidth?left:fullWidth-left:this.drag==drag.left?left:fullWidth-left;var page=left<pageWidth?pages[this.stackCount/2-1]:pages[this.stackCount/2];var pageDrag=left<this.foldSense?drag.left:left>fullWidth-this.foldSense?drag.right:drag.none;var x=left,y=top,h=height,w=fullWidth,delta=this.foldSense,corners=DFLIP.CORNERS,corner;if(x>=0&&x<delta){if(y>=0&&y<=delta)corner=corners.TL;else if(y>=h-delta&&y<=h)corner=corners.BL;else if(y>delta&&y<h-delta)corner=corners.L;else corner=corners.NONE}else if(x>=w-delta&&x<=w){if(y>=0&&y<=delta)corner=corners.TR;else if(y>=h-delta&&y<=h)corner=corners.BR;else if(y>delta&&y<h-delta)corner=corners.R;else corner=corners.NONE}else corner=corners.NONE;return{isInsidePage:x>=0&&x<=w&&y>=0&&y<=h,isInside:corner!==corners.NONE&&corner!==corners.L&&corner!==corners.R,x:left,y:top,fullWidth:fullWidth,rawDistance:fullWidth-left,distance:distance,page:page,drag:pageDrag,foldSense:this.foldSense,event:event,raw:point,corner:corner}};BookCSS.prototype.gotoPage=function(pageNumber){pageNumber=parseInt(pageNumber,10);this._activePage=pageNumber;if(this.autoPlay==true){this.previewObject.setAutoPlay(this.autoPlay)}this.updatePage(pageNumber);if(this&&this.thumblist&&this.thumblist.review)this.thumblist.review()};BookCSS.prototype.refresh=function(){this.updatePage(this._activePage);if(this.flipCallback!=null)this.flipCallback()};BookCSS.prototype.updatePage=function(pageNumber){var isRTL=this.direction==DFLIP.DIRECTION.RTL,isBooklet=isBookletMode(this),newBaseNumber=getBasePage(pageNumber);var pageDivisor=isBooklet?1:2;pageNumber=Math.floor(pageNumber/pageDivisor);if(isRTL)pageNumber=Math.ceil(this.pageCount/pageDivisor)-pageNumber;var oldBaseNumber=this.oldBaseNumber||0;var pageCount=this.pageCount/pageDivisor;var stackCount=this.stackCount;var midPoint=Math.floor(stackCount/2);if(oldBaseNumber>pageNumber){this.children[stackCount-1].skipFlip=true;this.children.unshift(this.children.pop())}else if(oldBaseNumber<pageNumber){this.children[0].skipFlip=true;this.children.push(this.children.shift())}for(var _pageCount=0;_pageCount<stackCount;_pageCount++){var page=this.children[_pageCount];if(oldBaseNumber!==pageNumber){if(page.currentTween!=null){page.clearTween(true)}}var oldSide=page.side;var newSide;var relativePageNumber=pageNumber-midPoint+_pageCount;if(isRTL)relativePageNumber=isBooklet?this.pageCount-relativePageNumber:Math.ceil(this.pageCount/2)-relativePageNumber-1;var oldName=page.name;page.isHard=this.isPageHard(relativePageNumber);if(page.isHard){page.element.addClass("df-hard-page")}else{page.element.removeClass("df-hard-page");page.front.css({display:"block"});page.back.css({display:"block"})}if(relativePageNumber==0||relativePageNumber==pageCount){page.element.addClass("df-cover-page")}else{page.element.removeClass("df-cover-page")}var oldPageNumber=$(page.element).attr("pageNumber");if(oldPageNumber!=relativePageNumber){page.front.contentLayer.empty();page.back.contentLayer.empty()}$(page.element).attr("pageNumber",relativePageNumber);page.isEdge=false;if(_pageCount==0){}else if(_pageCount==stackCount-1){}else{page.isEdge=false}if(_pageCount<midPoint){newSide=drag.left}else{newSide=drag.right}if(page.isFlipping==false){if(newSide!==oldSide&&page.skipFlip==false){this.animatePage(page);if(this.preFlipCallback!=null)this.preFlipCallback()}else{page.skipFlip=false;page.element.removeClass("df-flipping df-quick-turn df-folding df-left-side df-right-side");page.element.addClass(_pageCount<midPoint?"df-left-side":"df-right-side");page.side=newSide}}page.visible=isBooklet?isRTL?_pageCount<midPoint||page.isFlipping:_pageCount>=midPoint||page.isFlipping:relativePageNumber>=0&&relativePageNumber<pageCount||isBooklet&&relativePageNumber==pageCount;if(this.requestPage!=null&&page.visible==true){page.name=relativePageNumber.toString();if(page.name!=oldName){page.backTextureLoaded=false;page.frontTextureLoaded=false;page.backPageStamp="-1";page.frontPageStamp="-1";page.thumbLoaded=false;page.front.contentLayer.html("");page.back.contentLayer.html("");page.frontImage(defaults.textureLoadFallback);page.backImage(defaults.textureLoadFallback);this.requestPage()}}page.oldDepth=page.depth;page.updateCSS({display:page.visible==true?"block":"none",zIndex:6+(_pageCount<midPoint?_pageCount-midPoint:midPoint-_pageCount),transform:""});if(page.pendingPoint==null&&page.isFlipping==false){page.resetCSS()}}if(TWEEN.getAll().length==0){clearInterval(this.animate)}$(".quick-hint").html(pageNumber);this.oldBaseNumber=pageNumber;if(this.updatePageCallback)this.updatePageCallback()};BookCSS.prototype.animatePage=function(page){page.element.addClass("df-flipping");page.isFlipping=true;if(this.animate!=null){clearInterval(this.animate)}this.animate=setInterval(this.animateF,30);page.tween(page.pendingPoint)};return BookCSS}({});var FlipBook=function(_super){__extends(FlipBook,_super);function FlipBook(container,source,parameters){_super.call(this,parameters);var _this=this;_this.type="FlipBook";_this.container=container;_this.options=parameters;_this.options.source=source;_this.contentSource=source;if(parameters.height!=null&&parameters.height.toString().indexOf("%")<0){_this.container.height(Math.min(parameters.height,$(window).height()))}else{_this.container.height(parameters.height)}if(_this.options.isLightBox){window.dfLightBox.closeButton.addClass(_this.options.icons["close"])}if(_this.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL){if(Array===_this.contentSource.constructor||Array.isArray(_this.contentSource)||_this.contentSource instanceof Array){_this.options.singlePageMode=DFLIP.SINGLE_PAGE_MODE.ZOOM}_this.container.addClass("df-double-internal")}if(!_this.options.isLightBox&&_this.container.attr("id")!=null){_this.options.id=_this.container.attr("id")}if(_this.options.parsed!==true&&_this.options.links!=null){DFLIP.parseLinks(_this.options.links)}var webgl=_this.webgl=parameters.webgl==true&&hasWebgl==true&&utils.canSupport3D();container.addClass("df-container df-loading df-init df-floating"+" df-controls-"+_this.options.controlsPosition);if(_this.options.transparent==true){container.addClass("df-transparent")}if(_this.options.direction==DFLIP.DIRECTION.RTL){container.addClass("df-rtl")}_this.container.info=$(html.div,{class:"loading-info"}).appendTo(_this.container).html(_this.options.text.loading+"...");if(!!userAgent.match(/msie\s[5-9]/i)){_this.container.info.html("Your browser (Internet Explorer) is out of date to run DFlip Flipbook Plugin. <br><a href='https://browsehappy.com/'>Upgrade to a new one</a>").addClass("df-old-browser");container.removeClass("df-loading");return _this}var backgroundImage=parameters.backgroundImage==null||parameters.backgroundImage==""?"":"url('"+parameters.backgroundImage+"')";_this.container.css({position:"relative",overflow:"hidden",backgroundColor:parameters.backgroundColor,backgroundImage:backgroundImage});if(_this.options.isLightBox==true){_this.analytics({eventAction:"Open Book",options:_this.options})}_this.init(webgl,source);if(_this.options.onCreate!=null)_this.options.onCreate(_this);return _this}FlipBook.prototype.init=function(webgl){var _this=this;var book=_this.target;var options=_this.options;if(webgl==true){var updateMockupJs=function(callback){var process3d=function(){MOCKUP.defaults.anisotropy=0;MOCKUP.defaults.groundTexture="blank";THREE.skipPowerOfTwo=true;RegisterMockupObjects();if(callback!=null)callback()};if(window.MOCKUP==null){_this.updateInfo(options.text.loading+" WEBGL 3D ...");if(typeof define==="function"&&define.amd&&window.requirejs){requirejs.config({paths:{three:defaults.threejsSrc.replace(".js","")},shim:{three:{exports:"THREE"}}});require(["three"],function(THREE){window.THREE=THREE;getScript(defaults.mockupjsSrc+"?ver="+DFLIP.version,function(){process3d()});return THREE})}else if(typeof define==="function"&&define.amd){require(["three",defaults.threejsSrc.replace(".js","")],function(ready,fx){ready(function(){})})}else{getScript(defaults.threejsSrc+"?ver="+DFLIP.version,function(){getScript(defaults.mockupjsSrc+"?ver="+DFLIP.version,function(){process3d()})})}}else{process3d()}};updateMockupJs(function(){_this.container.css({minHeight:300,minWidth:300});_this.stage=new PreviewStage(extendOptions(_this.options,{container:_this.container}));_this.stage.previewObject=_this;_this.contentProvider=new ContentProvider(_this.contentSource,function(contentProvider){var options={pageCount:contentProvider.pageCount,stackCount:6,segments:20,width:contentProvider.bookSize.width,height:contentProvider.bookSize.height};_this.target=book=_this.stage.target=new MOCKUP.Book(extendOptions(_this.options,options),_this.stage);_this.extendtarget();createUI(_this.container,_this);book.ui=_this.ui;book.container=_this.container;contentProvider.webgl=webgl;contentProvider.setTarget(_this.target);book.getContentLayer=function(pageNumber){var isRTL=book.direction==DFLIP.DIRECTION.RTL,left=_this.stage.cssScene.divLeft.element,right=_this.stage.cssScene.divRight.element;var baseActive=getBasePage(book._activePage);if(isBookletMode(book))return isRTL?left:right;if(pageNumber%2==0)return isRTL?right:left;else return isRTL?left:right};book.stage=_this.stage;book.flipCallback=function(){if(_this.contentProvider){_this.contentProvider.review("flipCallback");var baseActive=getBasePage(book._activePage);var width,height;var pageLeft=book.getPageByNumber(baseActive),pageRight=book.getPageByNumber(baseActive+1);var divLeft=book.parent.cssScene.divLeft,divRight=book.parent.cssScene.divRight;var isSingle=book.pageMode==DFLIP.PAGE_MODE.SINGLE;var isRTL=book.direction==DFLIP.DIRECTION.RTL;if(pageLeft!=null&&divLeft!=null){width=Math.abs(pageLeft.geometry.boundingBox.max.x-pageLeft.geometry.boundingBox.min.x);height=Math.abs(pageLeft.geometry.boundingBox.max.z-pageLeft.geometry.boundingBox.min.z);divLeft.rotation.y=-Math.atan2(height,width)*.9;divLeft.position.z=height*.8;divLeft.position.x=height/2.5;$(divLeft.element).css({width:width,left:-width/2})}if(pageRight!=null&&divRight!=null){width=Math.abs(pageRight.geometry.boundingBox.max.x-pageRight.geometry.boundingBox.min.x);height=Math.abs(pageRight.geometry.boundingBox.max.z-pageRight.geometry.boundingBox.min.z);divRight.rotation.y=Math.atan2(height,width)*.9;divRight.position.z=height*.8;divRight.position.x=-height/2.5;$(divRight.element).css({width:width,left:width/2})}if(_this.options.onFlip!=null)_this.options.onFlip(_this)}};book.resize=function(){_this.resize()}();book.updatePageCallback=function(){_this.ui.update();_this.checkCenter();_this.stage.renderRequestPending=true};var divLeft=$(_this.stage.cssScene.divLeft.element);var divRight=$(_this.stage.cssScene.divRight.element);book.preFlipCallback=function(){divLeft.empty();divRight.empty();if(_this.options.beforeFlip!=null)_this.options.beforeFlip(_this);_this.playSound()};$(window).trigger("resize");divLeft.css({width:contentProvider.bookSize.width,height:contentProvider.bookSize.height,left:-contentProvider.bookSize.width/2});divRight.css({width:contentProvider.bookSize.width,height:contentProvider.bookSize.height,left:contentProvider.bookSize.width/2});book.ease=TWEEN.Easing.Cubic.InOut;book.contentProvider=contentProvider;book.duration=_this.options.duration;book.gotoPage(book._activePage);book.flipCallback();if(_this.options.isLightBox==true){_this.analytics({eventAction:"Book Ready",options:_this.options})}if(_this.options.onReady!=null)_this.options.onReady(_this)},options,_this)})}else{_this.contentProvider=new ContentProvider(_this.contentSource,function(contentProvider){var options={pageCount:contentProvider.pageCount,contentSourceType:contentProvider.contentSourceType};_this.target=book=new BookCSS(extendOptions(_this.options,options),_this.container);_this.target.previewObject=_this;_this.extendtarget();createUI(_this.container,_this);contentProvider.webgl=webgl;contentProvider.setTarget(_this.target);contentProvider.waitPeriod=2;book.ease=TWEEN.Easing.Quadratic.InOut;book.duration=_this.options.duration;book.container=_this.container;book.updatePageCallback=function(){_this.ui.update();_this.checkCenter()};book.resize=function(){_this.resize()}();$(window).trigger("resize");book.flipCallback=function(){if(_this.contentProvider){_this.contentProvider.review("flipCallback");if(_this.options.onFlip!=null)_this.options.onFlip(_this)}};book.preFlipCallback=function(){if(_this.options.beforeFlip!=null)_this.options.beforeFlip(_this);_this.playSound()};book.gotoPage(book._activePage);book.flipCallback();if(_this.options.onReady!=null)_this.options.onReady(_this);_this.analytics({eventAction:"Book Ready",options:_this.options})},options,_this)}};FlipBook.prototype.extendtarget=function(){var _this=this;_this.target.previewObject=_this;_this.target.reset=function(){for(var pageCount=0;pageCount<_this.target.children.length;pageCount++){var page=_this.target.children[pageCount];page.skipFlip=true;page.name="-2"}_this.contentProvider.annotedPage="-2";_this.target.refresh()}};FlipBook.prototype.getURLHash=function(){if(this.options.id!=null){var hash=utils.getSharePrefix()+(this.options.slug!=null?this.options.slug:this.options.id)+"/";if(this.target!=null&&this.target._activePage!=null){hash+=this.target._activePage+"/"}window.location.hash=hash}return window.location.href};FlipBook.prototype.end=function(){this.target.gotoPage(this.target.endPage)};FlipBook.prototype.gotoPage=function(pageNumber){this.target.gotoPage(pageNumber);if(this.ui!=null)this.ui.update()};FlipBook.prototype.prev=function(){this.target.prev()};FlipBook.prototype.next=function(){this.target.next()};FlipBook.prototype.updateInfo=function(info){if(this.container&&this.container.info&&this.container.info.html)this.container.info.html(info)};FlipBook.prototype.analytics=function(eventData){if(this.options.enableAnalytics==true){try{var options=eventData.options,eventLabel=undefined;if(options){eventLabel=options.bookTitle||options.slug||options.id}var analyticsTag=window.gtag;if(analyticsTag){analyticsTag("event",eventData.eventAction,{event_category:"Flipbook",event_label:eventLabel})}else{var analytics=window.ga||window.__gaTracker;analytics("send",{hitType:"event",eventCategory:"Flipbook",eventAction:eventData.eventAction,eventLabel:eventLabel})}}catch(e){}}};return FlipBook}(PreviewObject);$.fn.extend({shelf:function(){},flipBook:function(source,options){return new FlipBook($(this),source,extendDFlipOptions(options))}})})(DFLIP,jQuery);(function(view){"use strict";view.URL=view.URL||view.webkitURL;if(view.Blob&&view.URL){try{new Blob;return}catch(e){}}var BlobBuilder=view.BlobBuilder||view.WebKitBlobBuilder||view.MozBlobBuilder||function(view){var get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]},FakeBlobBuilder=function BlobBuilder(){this.data=[]},FakeBlob=function Blob(data,type,encoding){this.data=data;this.size=data.length;this.type=type;this.encoding=encoding},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type]},file_ex_codes=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR "+"NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;FakeBlob.fake=FB_proto.fake=true;while(file_ex_code--){FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1}if(!real_URL.createObjectURL){URL=view.URL=function(uri){var uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a"),uri_origin;uri_info.href=uri;if(!("origin"in uri_info)){if(uri_info.protocol.toLowerCase()==="data:"){uri_info.origin=null}else{uri_origin=uri.match(origin);uri_info.origin=uri_origin&&uri_origin[1]}}return uri_info}}URL.createObjectURL=function(blob){var type=blob.type,data_URI_header;if(type===null){type="application/octet-stream"}if(blob instanceof FakeBlob){data_URI_header="data:"+type;if(blob.encoding==="base64"){return data_URI_header+";base64,"+blob.data}else if(blob.encoding==="URI"){return data_URI_header+","+decodeURIComponent(blob.data)}if(btoa){return data_URI_header+";base64,"+btoa(blob.data)}else{return data_URI_header+","+encodeURIComponent(blob.data)}}else if(real_create_object_URL){return real_create_object_URL.call(real_URL,blob)}};URL.revokeObjectURL=function(object_URL){if(object_URL.substring(0,5)!=="data:"&&real_revoke_object_URL){real_revoke_object_URL.call(real_URL,object_URL)}};FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){var str="",buf=new Uint8Array(data),i=0,buf_len=buf.length;for(;i<buf_len;i++){str+=String.fromCharCode(buf[i])}bb.push(str)}else if(get_class(data)==="Blob"||get_class(data)==="File"){if(FileReaderSync){var fr=new FileReaderSync;bb.push(fr.readAsBinaryString(data))}else{throw new FileException("NOT_READABLE_ERR")}}else if(data instanceof FakeBlob){if(data.encoding==="base64"&&atob){bb.push(atob(data.data))}else if(data.encoding==="URI"){bb.push(decodeURIComponent(data.data))}else if(data.encoding==="raw"){bb.push(data.data)}}else{if(typeof data!=="string"){data+=""}bb.push(unescape(encodeURIComponent(data)))}};FBB_proto.getBlob=function(type){if(!arguments.length){type=null}return new FakeBlob(this.data.join(""),type,"raw")};FBB_proto.toString=function(){return"[object BlobBuilder]"};FB_proto.slice=function(start,end,type){var args=arguments.length;if(args<3){type=null}return new FakeBlob(this.data.slice(start,args>1?end:this.data.length),type,this.encoding)};FB_proto.toString=function(){return"[object Blob]"};FB_proto.close=function(){this.size=0;delete this.data};return FakeBlobBuilder}(view);view.Blob=function(blobParts,options){var type=options?options.type||"":"";var builder=new BlobBuilder;if(blobParts){for(var i=0,len=blobParts.length;i<len;i++){if(Uint8Array&&blobParts[i]instanceof Uint8Array){builder.append(blobParts[i].buffer)}else{builder.append(blobParts[i])}}}var blob=builder.getBlob(type);if(!blob.slice&&blob.webkitSlice){blob.slice=blob.webkitSlice}return blob};var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__};view.Blob.prototype=getPrototypeOf(new view.Blob)})(window);(function(view){"use strict";var Uint8Array=view.Uint8Array,HTMLCanvasElement=view.HTMLCanvasElement,canvas_proto=HTMLCanvasElement&&HTMLCanvasElement.prototype,is_base64_regex=/\s*;\s*base64\s*(?:;|$)/i,to_data_url="toDataURL",base64_ranks,decode_base64=function(base64){var len=base64.length,buffer=new Uint8Array(len/4*3|0),i=0,outptr=0,last=[0,0],state=0,save=0,rank,code;while(len--){code=base64.charCodeAt(i++);rank=base64_ranks[code-43];if(rank!==255&&rank!=null){last[1]=last[0];last[0]=code;save=save<<6|rank;state++;if(state===4){buffer[outptr++]=save>>>16;if(last[1]!==61){buffer[outptr++]=save>>>8}if(last[0]!==61){buffer[outptr++]=save}state=0}}}return buffer};if(Uint8Array){base64_ranks=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])}if(HTMLCanvasElement&&!canvas_proto.toBlob){canvas_proto.toBlob=function(callback,type){if(!type){type="image/png"}if(this.mozGetAsFile){callback(this.mozGetAsFile("canvas",type));return}if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(type)){callback(this.msToBlob());return}var args=Array.prototype.slice.call(arguments,1),dataURI=this[to_data_url].apply(this,args),header_end=dataURI.indexOf(","),data=dataURI.substring(header_end+1),is_base64=is_base64_regex.test(dataURI.substring(0,header_end)),blob;if(Blob.fake){blob=new Blob;if(is_base64){blob.encoding="base64"}else{blob.encoding="URI"}blob.data=data;blob.size=data.length}else if(Uint8Array){if(is_base64){blob=new Blob([decode_base64(data)],{type:type})}else{blob=new Blob([decodeURIComponent(data)],{type:type})}}callback(blob)};if(canvas_proto.toDataURLHD){canvas_proto.toBlobHD=function(){to_data_url="toDataURLHD";var blob=this.toBlob();to_data_url="toDataURL";return blob}}else{canvas_proto.toBlobHD=canvas_proto.toBlob}}})(window);(function PerformanceNowPolyfill(){if("performance"in window===false){window.performance={}}Date.now=Date.now||function(){return(new Date).getTime()};if("now"in window.performance===false){var offset=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-offset}}})();(function TweenJs(){var TWEEN=TWEEN||function(){var _tweens=[];return{getAll:function(){return _tweens},removeAll:function(){_tweens=[]},add:function(tween){_tweens.push(tween)},remove:function(tween){var i=_tweens.indexOf(tween);if(i!==-1){_tweens.splice(i,1)}},update:function(time){if(_tweens.length===0){return false}var i=0;time=time!=null?time:window.performance.now();while(i<_tweens.length){if(_tweens[i].update(time)){i++}else{_tweens.splice(i,1)}}return true}}}();TWEEN.Tween=function(object){var _object=object;var _valuesStart={};var _valuesEnd={};var _valuesStartRepeat={};var _duration=1e3;var _repeat=0;var _yoyo=false;var _isPlaying=false;var _reversed=false;var _delayTime=0;var _startTime=null;var _easingFunction=TWEEN.Easing.Linear.None;var _interpolationFunction=TWEEN.Interpolation.Linear;var _chainedTweens=[];var _onStartCallback=null;var _onStartCallbackFired=false;var _onUpdateCallback=null;var _onCompleteCallback=null;var _onStopCallback=null;for(var field in object){_valuesStart[field]=parseFloat(object[field],10)}this.to=function(properties,duration){if(duration!=null){_duration=duration}_valuesEnd=properties;return this};this.start=function(time){TWEEN.add(this);_isPlaying=true;_onStartCallbackFired=false;_startTime=time!=null?time:window.performance.now();_startTime+=_delayTime;for(var property in _valuesEnd){if(_valuesEnd[property]instanceof Array){if(_valuesEnd[property].length===0){continue}_valuesEnd[property]=[_object[property]].concat(_valuesEnd[property])}if(_valuesStart[property]===null){continue}_valuesStart[property]=_object[property];if(_valuesStart[property]instanceof Array===false){_valuesStart[property]*=1}_valuesStartRepeat[property]=_valuesStart[property]||0}return this};this.stop=function(){if(!_isPlaying){return this}TWEEN.remove(this);_isPlaying=false;if(_onStopCallback!==null){_onStopCallback.call(_object)}this.stopChainedTweens();return this};this.stopChainedTweens=function(){for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].stop()}};this.complete=function(){if(!_isPlaying){return this}TWEEN.remove(this);_isPlaying=false;if(_onCompleteCallback!==null){_onCompleteCallback.call(_object)}this.completeChainedTweens();return this};this.completeChainedTweens=function(){for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].complete()}};this.delay=function(amount){_delayTime=amount;return this};this.repeat=function(times){_repeat=times;return this};this.yoyo=function(yoyo){_yoyo=yoyo;return this};this.easing=function(easing){_easingFunction=easing==null?_easingFunction:easing;return this};this.interpolation=function(interpolation){_interpolationFunction=interpolation;return this};this.chain=function(){_chainedTweens=arguments;return this};this.onStart=function(callback){_onStartCallback=callback;return this};this.onUpdate=function(callback){_onUpdateCallback=callback;return this};this.onComplete=function(callback){_onCompleteCallback=callback;return this};this.onStop=function(callback){_onStopCallback=callback;return this};this.update=function(time){var property;var elapsed;var value;if(time<_startTime){return true}if(_onStartCallbackFired===false){if(_onStartCallback!==null){_onStartCallback.call(_object)}_onStartCallbackFired=true}elapsed=(time-_startTime)/_duration;elapsed=elapsed>1?1:elapsed;value=_easingFunction(elapsed);for(property in _valuesEnd){if(_valuesStart[property]===null){continue}var start=_valuesStart[property]||0;var end=_valuesEnd[property];if(end instanceof Array){_object[property]=_interpolationFunction(end,value)}else{if(typeof end==="string"){if(end.startsWith("+")||end.startsWith("-")){end=start+parseFloat(end,10)}else{end=parseFloat(end,10)}}if(typeof end==="number"){_object[property]=start+(end-start)*value}}}if(_onUpdateCallback!==null){_onUpdateCallback.call(_object,value)}if(elapsed===1){if(_repeat>0){if(isFinite(_repeat)){_repeat--}for(property in _valuesStartRepeat){if(typeof _valuesEnd[property]==="string"){_valuesStartRepeat[property]=_valuesStartRepeat[property]+parseFloat(_valuesEnd[property],10)}if(_yoyo){var tmp=_valuesStartRepeat[property];_valuesStartRepeat[property]=_valuesEnd[property];_valuesEnd[property]=tmp}_valuesStart[property]=_valuesStartRepeat[property]}if(_yoyo){_reversed=!_reversed}_startTime=time+_delayTime;return true}else{if(_onCompleteCallback!==null){_onCompleteCallback.call(_object)}for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].start(_startTime+_duration)}return false}}return true}};TWEEN.Easing={Linear:{None:function(k){return k}},Quadratic:{In:function(k){return k*k},Out:function(k){return k*(2-k)},InOut:function(k){if((k*=2)<1){return.5*k*k}return-.5*(--k*(k-2)-1)}},Quartic:{In:function(k){return k*k*k*k},Out:function(k){return 1- --k*k*k*k},InOut:function(k){if((k*=2)<1){return.5*k*k*k*k}return-.5*((k-=2)*k*k*k-2)}},Sinusoidal:{In:function(k){return 1-Math.cos(k*Math.PI/2)},Out:function(k){return Math.sin(k*Math.PI/2)},InOut:function(k){return.5*(1-Math.cos(Math.PI*k))}},Cubic:{In:function(k){return k*k*k},Out:function(k){return--k*k*k+1},InOut:function(k){if((k*=2)<1){return.5*k*k*k}return.5*((k-=2)*k*k+2)}}};TWEEN.Interpolation={Linear:function(v,k){var m=v.length-1;var f=m*k;var i=Math.floor(f);var fn=TWEEN.Interpolation.Utils.Linear;if(k<0){return fn(v[0],v[1],f)}if(k>1){return fn(v[m],v[m-1],m-f)}return fn(v[i],v[i+1>m?m:i+1],f-i)},Bezier:function(v,k){var b=0;var n=v.length-1;var pw=Math.pow;var bn=TWEEN.Interpolation.Utils.Bernstein;for(var i=0;i<=n;i++){b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i)}return b},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=TWEEN.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:function(){var a=[1];return function(n){var s=1;if(a[n]){return a[n]}for(var i=n;i>1;i--){s*=i}a[n]=s;return s}}(),CatmullRom:function(p0,p1,p2,p3,t){var v0=(p2-p0)*.5;var v1=(p3-p1)*.5;var t2=t*t;var t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}}};window.TWEEN=TWEEN})();DFLIP.createBlob=function createBlob(data,contentType){if(typeof Blob!=="undefined"){return new Blob([data],{type:contentType})}var bb=new MozBlobBuilder;bb.append(data);return bb.getBlob(contentType)};DFLIP.createObjectURL=function createObjectURLClosure(){var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(data,contentType){if(typeof URL!=="undefined"&&URL.createObjectURL){var blob=DFLIP.createBlob(data,contentType);return URL.createObjectURL(blob)}var buffer="data:"+contentType+";base64,";for(var i=0,ii=data.length;i<ii;i+=3){var b1=data[i]&255;var b2=data[i+1]&255;var b3=data[i+2]&255;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<ii?(b2&15)<<2|b3>>6:64;var d4=i+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer}}();var ThumbList=function ThumbListClosure(){function ThumbList(config){var width=config&&config.w+"px"||"100%";var height=config&&config.h+"px"||"100%";var itemHeight=this.itemHeight=config.itemHeight;this.items=config.items;this.generatorFn=config.generatorFn;this.totalRows=config.totalRows||config.items&&config.items.length;this.addFn=config.addFn;this.scrollFn=config.scrollFn;var scroller=ThumbList.createScroller(itemHeight*this.totalRows);this.container=ThumbList.createContainer(width,height);this.container.appendChild(scroller);this.screenItemsLen=Math.ceil(config.h/itemHeight);this.offsetItems=this.screenItemsLen;this.cachedItemsLen=this.screenItemsLen+this.offsetItems*2;this._renderChunk(this.container,0);var self=this;self.lastRepaintY=0;var maxBuffer=this.screenItemsLen*itemHeight;var lastScrolled=0;var requestInterval;function onScroll(e){var scrollTop=e.target.scrollTop;if(!self.lastRepaintY||Math.abs(scrollTop-self.lastRepaintY)>=self.offsetItems*self.itemHeight){var first=parseInt(scrollTop/itemHeight,10)-self.offsetItems;self._renderChunk(self.container,first<0?0:first);self.lastRepaintY=scrollTop}self.lastScrolled=lastScrolled=Date.now();if(self.scrollFn!=null){self.scrollFn()}e.preventDefault&&e.preventDefault()}self.dispose=function(){if(self.container){if(self.container.parentNode){self.container.parentNode.removeChild(self.container)}}self.container.removeEventListener("scroll",onScroll)};self.container.addEventListener("scroll",onScroll)}ThumbList.prototype.reset=function(height){this.screenItemsLen=Math.ceil(height/this.itemHeight);this.cachedItemsLen=this.screenItemsLen+this.offsetItems*2;var first=parseInt(this.lastRepaintY/this.itemHeight,10)-this.offsetItems;this.needReset=true;this._renderChunk(this.container,Math.max(first,0))};ThumbList.prototype.createRow=function(i){var item;if(this.generatorFn){item=this.generatorFn(i);item.classList.add("df-vrow");item.style.position="absolute";item.style.top=i*this.itemHeight+"px";item.setAttribute("index",i)}return item};ThumbList.prototype._renderChunk=function(node,from){var isEmpty=this.range==null;this.range=this.range||{min:0,max:this.cachedItemsLen};var range=this.range;var min=range.min,max=range.max;var isAdd=isEmpty?true:from>=min;if(!isEmpty&&from==min&&this.needReset==false)return;var countVar;var start=isEmpty?min:isAdd?max:from;start=start>this.totalRows?this.totalRows:start<0?0:start;var end=from+this.cachedItemsLen;end=end>this.totalRows?this.totalRows:end;for(countVar=start;countVar<end;countVar++){if(isAdd)node.appendChild(this.createRow(countVar));else node.insertBefore(this.createRow(countVar),node.childNodes[1+countVar-start]);if(this.addFn!=null){this.addFn(countVar)}}var difference=Math.abs(from-min);this.needReset=false;if(!isEmpty&&node.childNodes.length>this.cachedItemsLen+1){var delStart=isAdd?1:1+this.cachedItemsLen,delEnd=delStart+(end-start);for(var j=delEnd;j>delStart;j--){if(node.childNodes[delStart])this.container.removeChild(node.childNodes[delStart])}}this.range.min=from;this.range.max=end};ThumbList.createContainer=function(w,h){var c=document.createElement("div");c.style.width=w;c.style.height=h;c.style.overflow="auto";c.style.position="relative";c.style.padding=0;return c};ThumbList.createScroller=function(h){var scroller=document.createElement("div");scroller.style.opacity=0;scroller.style.position="absolute";scroller.style.top=0;scroller.style.left=0;scroller.style.width="1px";scroller.style.height=h+"px";return scroller};return ThumbList}();var BookMarkViewer=function BookMarkViewerClosure(){function BookMarkViewer(options){this.outline=null;this.lastToggleIsShow=true;this.container=options.container;this.linkService=options.linkService;this.outlineItemClass=options.outlineItemClass||"outlineItem";this.outlineToggleClass=options.outlineToggleClass||"outlineItemToggler";this.outlineToggleHiddenClass=options.outlineToggleHiddenClass||"outlineItemsHidden"}BookMarkViewer.prototype={dispose:function(){if(this.container){if(this.container.parentNode){this.container.parentNode.removeChild(this.container)}}this.linkService=null},reset:function BookMarkViewer_reset(){this.outline=null;this.lastToggleIsShow=true;var container=this.container;while(container.firstChild){container.removeChild(container.firstChild)}},_dispatchEvent:function BookMarkViewer_dispatchEvent(outlineCount){var event=document.createEvent("CustomEvent");event.initCustomEvent("outlineloaded",true,true,{outlineCount:outlineCount});this.container.dispatchEvent(event)},_bindLink:function BookMarkViewer_bindLink(element,item){var linkService=this.linkService;if(item.custom==true){element.href=linkService.getCustomDestinationHash(item.dest);element.onclick=function goToDestination(e){linkService.customNavigateTo(item.dest);return false}}else{if(item.url){pdfjsLib.addLinkAttributes(element,{url:item.url});return}element.href=linkService.getDestinationHash(item.dest);element.onclick=function goToDestination(e){linkService.navigateTo(item.dest);return false}}},_addToggleButton:function BookMarkViewer_addToggleButton(div){var toggler=document.createElement("div");toggler.className=this.outlineToggleClass+" "+this.outlineToggleHiddenClass;toggler.onclick=function(event){event.stopPropagation();toggler.classList.toggle(this.outlineToggleHiddenClass);if(event.shiftKey){var shouldShowAll=!toggler.classList.contains(this.outlineToggleHiddenClass);this._toggleOutlineItem(div,shouldShowAll)}}.bind(this);div.insertBefore(toggler,div.firstChild)},_toggleOutlineItem:function BookMarkViewer_toggleOutlineItem(root,show){this.lastToggleIsShow=show;var togglers=root.querySelectorAll("."+this.outlineToggleClass);for(var i=0,ii=togglers.length;i<ii;++i){togglers[i].classList[show?"remove":"add"](this.outlineToggleHiddenClass)}},toggleOutlineTree:function BookMarkViewer_toggleOutlineTree(){if(!this.outline){return}this._toggleOutlineItem(this.container,!this.lastToggleIsShow)},render:function BookMarkViewer_render(params){var outline=params&&params.outline||null;var outlineCount=0;if(this.outline){this.reset()}this.outline=outline;if(!outline){return}var fragment=document.createDocumentFragment();var queue=[{parent:fragment,items:this.outline}];var hasAnyNesting=false;while(queue.length>0){var levelData=queue.shift();var isCustom=levelData.custom;for(var i=0,len=levelData.items.length;i<len;i++){var item=levelData.items[i];var div=document.createElement("div");div.className=this.outlineItemClass;var element=document.createElement("a");if(item.custom==null&&isCustom!=null)item.custom=isCustom;this._bindLink(element,item);element.textContent=item.title.replace(/\x00/g,"");div.appendChild(element);if(item.items&&item.items.length>0){hasAnyNesting=true;this._addToggleButton(div);var itemsDiv=document.createElement("div");itemsDiv.className=this.outlineItemClass+"s";div.appendChild(itemsDiv);queue.push({parent:itemsDiv,custom:item.custom,items:item.items})}levelData.parent.appendChild(div);outlineCount++}}if(hasAnyNesting){if(this.container.classList!=null){this.container.classList.add(this.outlineItemClass+"s")}else if(this.container.className!=null){this.container.className+=" picWindow"}}this.container.appendChild(fragment);this._dispatchEvent(outlineCount)}};return BookMarkViewer}();var DFLightBox=function DFLightBoxClosure($){function DFLightBox(closeCallback,options){this.duration=300;var _this=this;_this.lightboxWrapper=$("<div>").addClass("df-lightbox-wrapper");_this.container=$("<div>").addClass("df-container").appendTo(_this.lightboxWrapper);_this.controls=$("<div>").addClass("df-lightbox-controls").appendTo(_this.lightboxWrapper);_this.closeButton=$("<div>").addClass("df-lightbox-close df-ui-btn").on("click",function(){_this.close(closeCallback)}).appendTo(_this.controls);_this.lightboxWrapper.append(_this.container);return _this}DFLightBox.prototype.show=function(callback){if(this.lightboxWrapper.parent().length==0)$("body").append(this.lightboxWrapper);$("html,body").addClass("df-lightbox-open");this.lightboxWrapper.fadeIn(this.duration,callback);return this};DFLightBox.prototype.close=function(callback){this.lightboxWrapper.fadeOut(this.duration);setTimeout(callback,this.duration);$("html,body").removeClass("df-lightbox-open");return this};return DFLightBox}(jQuery);DFLIP.Share=function ShareClosure($){function Share(container,options){var _this=this;var htmlDiv="<div>";var shareButtonClass="df-share-button";var windowParameters="width=500,height=400";_this.isOpen=false;_this.shareUrl="";_this.wrapper=$('<div class="df-share-wrapper" style="display: none;">').on("click",function(e){_this.close()});_this.box=$('<div class="df-share-box">').on("click",function(e){e.preventDefault();e.stopPropagation()}).appendTo(_this.wrapper).html('<span class="df-share-title">'+options.text.share+"</span>");_this.urlInput=$('<textarea class="df-share-url">').on("click",function(){$(this).select()});_this.facebook=$(htmlDiv,{class:shareButtonClass+" df-share-facebook "+options.icons["facebook"]}).on("click",function(e){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(_this.shareUrl),"Sharer",windowParameters)});_this.google=$(htmlDiv,{class:shareButtonClass+" df-share-google "+options.icons["google"]}).on("click",function(e){window.open("https://plus.google.com/share?url="+encodeURIComponent(_this.shareUrl),"Sharer",windowParameters)});_this.twitter=$(htmlDiv,{class:shareButtonClass+" df-share-twitter "+options.icons["twitter"]}).on("click",function(e){window.open("https://twitter.com/share?url="+encodeURIComponent(_this.shareUrl),"Sharer",windowParameters)});_this.mail=$("<a>",{class:shareButtonClass+" df-share-mail "+options.icons["mail"],href:"mailto:?subject="+options.text["mailSubject"]+"&body="+options.text["mailBody"].replace("{{url}}",encodeURIComponent(_this.shareUrl)),target:"_blank"}).on("click",function(e){$(this).attr("href","mailto:?subject="+options.text["mailSubject"]+"&body="+options.text["mailBody"].replace("{{url}}",encodeURIComponent(_this.shareUrl)));e.stopPropagation()});_this.box.append(_this.urlInput).append(_this.facebook).append(_this.twitter).append(_this.mail);$(container).append(_this.wrapper)}Share.prototype.show=function(){this.wrapper.fadeIn(300);this.urlInput.val(this.shareUrl);this.urlInput.trigger("click");this.isOpen=true};Share.prototype.dispose=function(){var _this=this;_this.box.off();_this.google.off();_this.twitter.off();_this.facebook.off();_this.mail.off();_this.urlInput.off();_this.wrapper.off().remove()};Share.prototype.close=function(){this.wrapper.fadeOut(300);this.isOpen=false};Share.prototype.update=function(url){this.shareUrl=url};return Share}(jQuery);DFLIP.Popup=function PopupClosure($){function Popup(container,options){var _this=this;var htmlDiv="<div>";var windowParameters="width=500,height=400";_this.isOpen=false;_this.wrapper=$('<div class="df-popup-wrapper" style="display: none;">').on("click",function(e){_this.close()});_this.box=$('<div class="df-popup-box">').on("click",function(e){e.preventDefault();e.stopPropagation()}).appendTo(_this.wrapper);$(container).append(_this.wrapper)}Popup.prototype.show=function(){this.wrapper.fadeIn(300);this.isOpen=true};Popup.prototype.dispose=function(){var _this=this;_this.box.off();_this.wrapper.off().remove()};Popup.prototype.close=function(){this.wrapper.fadeOut(300);this.isOpen=false};return Popup}(jQuery);var PDFLinkService=function(){function PDFLinkService(){this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null}PDFLinkService.prototype={dispose:function(){this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null},setDocument:function PDFLinkService_setDocument(pdfDocument,baseUrl){this.baseUrl=baseUrl;this.pdfDocument=pdfDocument;this._pagesRefCache=Object.create(null)},setViewer:function PDFLinkService_setViewer(pdfViewer){this.pdfViewer=pdfViewer;this.externalLinkTarget=pdfViewer.previewObject.options.linkTarget},setHistory:function PDFLinkService_setHistory(pdfHistory){this.pdfHistory=pdfHistory},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(value){this.pdfViewer.currentPageNumber=value},navigateTo:function PDFLinkService_navigateTo(dest){var destString="";var self=this;var goToDestination=function(destRef){var pageNumber=destRef instanceof Object?self._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){if(self.pdfViewer.contentProvider.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&pageNumber>2){pageNumber=pageNumber*2-1}if(pageNumber>self.pdfViewer.pageCount){pageNumber=self.pdfViewer.pageCount}self.pdfViewer.gotoPage(pageNumber);if(self.pdfHistory){self.pdfHistory.push({dest:dest,hash:destString,page:pageNumber})}}else{self.pdfDocument.getPageIndex(destRef).then(function(pageIndex){var pageNum=pageIndex+1;var cacheKey=destRef.num+" "+destRef.gen+" R";self._pagesRefCache[cacheKey]=pageNum;goToDestination(destRef)})}};var destinationPromise;if(typeof dest==="string"){destString=dest;destinationPromise=this.pdfDocument.getDestination(dest)}else{destinationPromise=Promise.resolve(dest)}destinationPromise.then(function(destination){dest=destination;if(!(destination instanceof Array)){return}goToDestination(destination[0])})},customNavigateTo:function PDFLinkService_navigateTo(dest){if(dest==""||dest==null||dest=="null")return;var pageNumber=null;if(!isNaN(Math.round(dest))){pageNumber=dest}else if(typeof dest==="string"){pageNumber=parseInt(dest.replace("#",""),10);if(isNaN(pageNumber)){window.open(dest,DFLIP.defaults.linkTarget==DFLIP.LINK_TARGET.SELF?"_self":"_blank");return}}if(pageNumber!=null)this.pdfViewer.gotoPage(pageNumber)},getDestinationHash:function PDFLinkService_getDestinationHash(dest){if(typeof dest==="string"){return this.getAnchorUrl("#"+escape(dest))}if(dest instanceof Array){var destRef=dest[0];var pageNumber=destRef instanceof Object?this._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){var pdfOpenParams=this.getAnchorUrl("#page="+pageNumber);var destKind=dest[1];if(typeof destKind==="object"&&"name"in destKind&&destKind.name==="XYZ"){var scale=dest[4]||this.pdfViewer.currentScaleValue;var scaleNumber=parseFloat(scale);if(scaleNumber){scale=scaleNumber*100}pdfOpenParams+="&zoom="+scale;if(dest[2]||dest[3]){pdfOpenParams+=","+(dest[2]||0)+","+(dest[3]||0)}}return pdfOpenParams}}return this.getAnchorUrl("")},getCustomDestinationHash:function PDFLinkService_getCustomDestinationHash(dest){return"#"+escape(dest)},getAnchorUrl:function PDFLinkService_getAnchorUrl(anchor){return(this.baseUrl||"")+anchor},setHash:function PDFLinkService_setHash(hash){if(hash.indexOf("=")>=0){var params=parseQueryString(hash);if("nameddest"in params){if(this.pdfHistory){this.pdfHistory.updateNextHashParam(params.nameddest)}this.navigateTo(params.nameddest);return}var pageNumber,dest;if("page"in params){pageNumber=params.page|0||1}if("zoom"in params){var zoomArgs=params.zoom.split(",");var zoomArg=zoomArgs[0];var zoomArgNumber=parseFloat(zoomArg);if(zoomArg.indexOf("Fit")===-1){dest=[null,{name:"XYZ"},zoomArgs.length>1?zoomArgs[1]|0:null,zoomArgs.length>2?zoomArgs[2]|0:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}else{if(zoomArg==="Fit"||zoomArg==="FitB"){dest=[null,{name:zoomArg}]}else if(zoomArg==="FitH"||zoomArg==="FitBH"||(zoomArg==="FitV"||zoomArg==="FitBV")){dest=[null,{name:zoomArg},zoomArgs.length>1?zoomArgs[1]|0:null]}else if(zoomArg==="FitR"){if(zoomArgs.length!==5){console.error("PDFLinkService_setHash: "+"Not enough parameters for 'FitR'.")}else{dest=[null,{name:zoomArg},zoomArgs[1]|0,zoomArgs[2]|0,zoomArgs[3]|0,zoomArgs[4]|0]}}else{console.error("PDFLinkService_setHash: '"+zoomArg+"' is not a valid zoom value.")}}}if(dest){this.pdfViewer.scrollPageIntoView(pageNumber||this.page,dest)}else if(pageNumber){this.page=pageNumber}if("pagemode"in params){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagemode",true,true,{mode:params.pagemode});this.pdfViewer.container.dispatchEvent(event)}}else if(/^\d+$/.test(hash)){this.page=hash}else{if(this.pdfHistory){this.pdfHistory.updateNextHashParam(unescape(hash))}this.navigateTo(unescape(hash))}},executeNamedAction:function PDFLinkService_executeNamedAction(action){switch(action){case"GoBack":if(this.pdfHistory){this.pdfHistory.back()}break;case"GoForward":if(this.pdfHistory){this.pdfHistory.forward()}break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}var event=document.createEvent("CustomEvent");event.initCustomEvent("namedaction",true,true,{action:action});this.pdfViewer.container.dispatchEvent(event)},cachePageRef:function PDFLinkService_cachePageRef(pageNum,pageRef){var refStr=pageRef.num+" "+pageRef.gen+" R";this._pagesRefCache[refStr]=pageNum}};return PDFLinkService}();var FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3};var FIND_SCROLL_OFFSET_TOP=-50;var FIND_SCROLL_OFFSET_LEFT=-400;var CHARACTERS_TO_NORMALIZE={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};DFLIP.PDFFindController=function PDFFindControllerClosure(){function PDFFindController(options){this.pdfViewer=options.pdfViewer||null;this.onUpdateResultsCount=null;this.onUpdateState=null;this.reset();var replace=Object.keys(CHARACTERS_TO_NORMALIZE).join("");this.normalizationRegex=new RegExp("["+replace+"]","g")}PDFFindController.prototype={reset:function PDFFindController_reset(){this.startedTextExtraction=false;this.extractTextPromises=[];this.pendingFindMatches=Object.create(null);this.active=false;this.pageContents=[];this.pageMatches=[];this.pageMatchesLength=null;this.matchCount=0;this.selected={pageIdx:-1,matchIdx:-1};this.offset={pageIdx:null,matchIdx:null};this.pagesToSearch=null;this.resumePageIdx=null;this.state=null;this.dirtyMatch=false;this.findTimeout=null;this.firstPagePromise=new Promise(function(resolve){this.resolveFirstPage=resolve}.bind(this))},normalize:function PDFFindController_normalize(text){return text.replace(this.normalizationRegex,function(ch){return CHARACTERS_TO_NORMALIZE[ch]})},_prepareMatches:function PDFFindController_prepareMatches(matchesWithLength,matches,matchesLength){function isSubTerm(matchesWithLength,currentIndex){var currentElem,prevElem,nextElem;currentElem=matchesWithLength[currentIndex];nextElem=matchesWithLength[currentIndex+1];if(currentIndex<matchesWithLength.length-1&&currentElem.match===nextElem.match){currentElem.skipped=true;return true}for(var i=currentIndex-1;i>=0;i--){prevElem=matchesWithLength[i];if(prevElem.skipped){continue}if(prevElem.match+prevElem.matchLength<currentElem.match){break}if(prevElem.match+prevElem.matchLength>=currentElem.match+currentElem.matchLength){currentElem.skipped=true;return true}}return false}var i,len;matchesWithLength.sort(function(a,b){return a.match===b.match?a.matchLength-b.matchLength:a.match-b.match});for(i=0,len=matchesWithLength.length;i<len;i++){if(isSubTerm(matchesWithLength,i)){continue}matches.push(matchesWithLength[i].match);matchesLength.push(matchesWithLength[i].matchLength)}},calcFindPhraseMatch:function PDFFindController_calcFindPhraseMatch(query,pageIndex,pageContent){var matches=[];var queryLen=query.length;var matchIdx=-queryLen;while(true){matchIdx=pageContent.indexOf(query,matchIdx+queryLen);if(matchIdx===-1){break}matches.push(matchIdx)}this.pageMatches[pageIndex]=matches},calcFindWordMatch:function PDFFindController_calcFindWordMatch(query,pageIndex,pageContent){var matchesWithLength=[];var queryArray=query.match(/\S+/g);var subquery,subqueryLen,matchIdx;for(var i=0,len=queryArray.length;i<len;i++){subquery=queryArray[i];subqueryLen=subquery.length;matchIdx=-subqueryLen;while(true){matchIdx=pageContent.indexOf(subquery,matchIdx+subqueryLen);if(matchIdx===-1){break}matchesWithLength.push({match:matchIdx,matchLength:subqueryLen,skipped:false})}}if(!this.pageMatchesLength){this.pageMatchesLength=[]}this.pageMatchesLength[pageIndex]=[];this.pageMatches[pageIndex]=[];this._prepareMatches(matchesWithLength,this.pageMatches[pageIndex],this.pageMatchesLength[pageIndex])},calcFindMatch:function PDFFindController_calcFindMatch(pageIndex){var pageContent=this.normalize(this.pageContents[pageIndex]);var query=this.normalize(this.state.query);var caseSensitive=this.state.caseSensitive;var phraseSearch=this.state.phraseSearch;var queryLen=query.length;if(queryLen===0){return}if(!caseSensitive){pageContent=pageContent.toLowerCase();query=query.toLowerCase()}if(phraseSearch){this.calcFindPhraseMatch(query,pageIndex,pageContent)}else{this.calcFindWordMatch(query,pageIndex,pageContent)}this.updatePage(pageIndex);if(this.resumePageIdx===pageIndex){this.resumePageIdx=null;this.nextPageMatch()}if(this.pageMatches[pageIndex].length>0){this.matchCount+=this.pageMatches[pageIndex].length;this.updateUIResultsCount()}},extractText:function PDFFindController_extractText(){if(this.startedTextExtraction){return}this.startedTextExtraction=true;this.pageContents=[];var extractTextPromisesResolves=[];var numPages=this.pdfViewer.contentProvider.pdfDocument.numPages;for(var i=0;i<numPages;i++){this.extractTextPromises.push(new Promise(function(resolve){extractTextPromisesResolves.push(resolve)}))}var self=this;function extractPageText(pageIndex){self.pdfViewer.getPageTextContent(pageIndex).then(function textContentResolved(textContent){var textItems=textContent.items;var str=[];for(var i=0,len=textItems.length;i<len;i++){str.push(textItems[i].str)}self.pageContents.push(str.join(""));extractTextPromisesResolves[pageIndex](pageIndex);console.log("extracting Page"+pageIndex);if(pageIndex+1<self.pdfViewer.contentProvider.pdfDocument.numPages){extractPageText(pageIndex+1)}})}extractPageText(0)},executeCommand:function PDFFindController_executeCommand(cmd,state){if(this.state===null||cmd!=="findagain"){this.dirtyMatch=true}this.state=state;this.updateUIState(FindStates.FIND_PENDING);this.firstPagePromise.then(function(){this.extractText();clearTimeout(this.findTimeout);if(cmd==="find"){this.findTimeout=setTimeout(this.nextMatch.bind(this),250)}else{this.nextMatch()}}.bind(this))},updatePage:function PDFFindController_updatePage(index){if(this.selected.pageIdx===index){this.pdfViewer.currentPageNumber=index+1}var page=this.pdfViewer.getPageView(index);if(page.textLayer){page.textLayer.updateMatches()}},nextMatch:function PDFFindController_nextMatch(){var previous=this.state.findPrevious;var currentPageIndex=this.pdfViewer.currentPageNumber-1;var numPages=this.pdfViewer.contentProvider.pageCount;this.active=true;if(this.dirtyMatch){this.dirtyMatch=false;this.selected.pageIdx=this.selected.matchIdx=-1;this.offset.pageIdx=currentPageIndex;this.offset.matchIdx=null;this.hadMatch=false;this.resumePageIdx=null;this.pageMatches=[];this.matchCount=0;this.pageMatchesLength=null;var self=this;for(var i=0;i<numPages;i++){this.updatePage(i);if(!(i in this.pendingFindMatches)){this.pendingFindMatches[i]=true;this.extractTextPromises[i].then(function(pageIdx){delete self.pendingFindMatches[pageIdx];self.calcFindMatch(pageIdx)})}}}if(this.state.query===""){this.updateUIState(FindStates.FIND_FOUND);return}if(this.resumePageIdx){return}var offset=this.offset;this.pagesToSearch=numPages;if(offset.matchIdx!==null){var numPageMatches=this.pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0){this.hadMatch=true;offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1;this.updateMatch(true);return}this.advanceOffsetPage(previous)}this.nextPageMatch()},matchesReady:function PDFFindController_matchesReady(matches){var offset=this.offset;var numMatches=matches.length;var previous=this.state.findPrevious;if(numMatches){this.hadMatch=true;offset.matchIdx=previous?numMatches-1:0;this.updateMatch(true);return true}this.advanceOffsetPage(previous);if(offset.wrapped){offset.matchIdx=null;if(this.pagesToSearch<0){this.updateMatch(false);return true}}return false},updateMatchPosition:function PDFFindController_updateMatchPosition(pageIndex,index,elements,beginIdx){if(this.selected.matchIdx===index&&this.selected.pageIdx===pageIndex){var spot={top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT};scrollIntoView(elements[beginIdx],spot,true)}},nextPageMatch:function PDFFindController_nextPageMatch(){if(this.resumePageIdx!==null){console.error("There can only be one pending page.")}do{var pageIdx=this.offset.pageIdx;var matches=this.pageMatches[pageIdx];if(!matches){this.resumePageIdx=pageIdx;break}}while(!this.matchesReady(matches))},advanceOffsetPage:function PDFFindController_advanceOffsetPage(previous){var offset=this.offset;var numPages=this.extractTextPromises.length;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1;offset.matchIdx=null;this.pagesToSearch--;if(offset.pageIdx>=numPages||offset.pageIdx<0){offset.pageIdx=previous?numPages-1:0;offset.wrapped=true}},updateMatch:function PDFFindController_updateMatch(found){var state=FindStates.FIND_NOTFOUND;var wrapped=this.offset.wrapped;this.offset.wrapped=false;if(found){var previousPage=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx;this.selected.matchIdx=this.offset.matchIdx;state=wrapped?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND;if(previousPage!==-1&&previousPage!==this.selected.pageIdx){this.updatePage(previousPage)}}this.updateUIState(state,this.state.findPrevious);if(this.selected.pageIdx!==-1){this.updatePage(this.selected.pageIdx)}},updateUIResultsCount:function PDFFindController_updateUIResultsCount(){if(this.onUpdateResultsCount){this.onUpdateResultsCount(this.matchCount)}},updateUIState:function PDFFindController_updateUIState(state,previous){if(this.onUpdateState){this.onUpdateState(state,previous,this.matchCount)}}};return PDFFindController}();DFLIP.TextLayerBuilder=function TextLayerBuilderClosure(){function TextLayerBuilder(options){this.textLayerDiv=options.textLayerDiv;this.renderingDone=false;this.divContentDone=false;this.pageIdx=options.pageIndex;this.pageNumber=this.pageIdx+1;this.matches=[];this.viewport=options.viewport;this.textDivs=[];this.findController=options.findController||null;this.textLayerRenderTask=null;this.enhanceTextSelection=options.enhanceTextSelection;this._bindMouse()}TextLayerBuilder.prototype={_finishRendering:function TextLayerBuilder_finishRendering(){this.renderingDone=true;if(!this.enhanceTextSelection){var endOfContent=document.createElement("div");endOfContent.className="endOfContent";this.textLayerDiv.appendChild(endOfContent)}},render:function TextLayerBuilder_render(timeout){if(!this.divContentDone||this.renderingDone){return}if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.textDivs=[];var textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=pdfjsLib.renderTextLayer({textContent:this.textContent,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,timeout:timeout,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(textLayerFrag);this._finishRendering();this.updateMatches()}.bind(this),function(reason){})},setTextContent:function TextLayerBuilder_setTextContent(textContent){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.textContent=textContent;this.divContentDone=true},convertMatches:function TextLayerBuilder_convertMatches(matches,matchesLength){var i=0;var iIndex=0;var bidiTexts=this.textContent.items;var end=bidiTexts.length-1;var queryLen=this.findController===null?0:this.findController.state.query.length;var ret=[];if(!matches){return ret}for(var m=0,len=matches.length;m<len;m++){var matchIdx=matches[m];while(i!==end&&matchIdx>=iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++}if(i===bidiTexts.length){console.error("Could not find a matching mapping")}var match={begin:{divIdx:i,offset:matchIdx-iIndex}};if(matchesLength){matchIdx+=matchesLength[m]}else{matchIdx+=queryLen}while(i!==end&&matchIdx>iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++}match.end={divIdx:i,offset:matchIdx-iIndex};ret.push(match)}return ret},renderMatches:function TextLayerBuilder_renderMatches(matches){if(matches.length===0){return}var bidiTexts=this.textContent.items;var textDivs=this.textDivs;var prevEnd=null;var pageIdx=this.pageIdx;var isSelectedPage=this.findController===null?false:pageIdx===this.findController.selected.pageIdx;var selectedMatchIdx=this.findController===null?-1:this.findController.selected.matchIdx;var highlightAll=this.findController===null?false:this.findController.state.highlightAll;var infinity={divIdx:-1,offset:undefined};function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent="";appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx];var content=bidiTexts[divIdx].str.substring(fromOffset,toOffset);var node=document.createTextNode(content);if(className){var span=document.createElement("span");span.className=className;span.appendChild(node);div.appendChild(span);return}div.appendChild(node)}var i0=selectedMatchIdx,i1=i0+1;if(highlightAll){i0=0;i1=matches.length}else if(!isSelectedPage){return}for(var i=i0;i<i1;i++){var match=matches[i];var begin=match.begin;var end=match.end;var isSelected=isSelectedPage&&i===selectedMatchIdx;var highlightSuffix=isSelected?" selected":"";if(this.findController){this.findController.updateMatchPosition(pageIdx,i,textDivs,begin.divIdx)}if(!prevEnd||begin.divIdx!==prevEnd.divIdx){if(prevEnd!==null){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}beginText(begin)}else{appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset)}if(begin.divIdx===end.divIdx){appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix)}else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++){textDivs[n0].className="highlight middle"+highlightSuffix}beginText(end,"highlight end"+highlightSuffix)}prevEnd=end}if(prevEnd){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}},updateMatches:function TextLayerBuilder_updateMatches(){if(!this.renderingDone){return}var matches=this.matches;var textDivs=this.textDivs;var bidiTexts=this.textContent.items;var clearedUntilDivIdx=-1;for(var i=0,len=matches.length;i<len;i++){var match=matches[i];var begin=Math.max(clearedUntilDivIdx,match.begin.divIdx);for(var n=begin,end=match.end.divIdx;n<=end;n++){var div=textDivs[n];div.textContent=bidiTexts[n].str;div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(this.findController===null||!this.findController.active){return}var pageMatches,pageMatchesLength;if(this.findController!==null){pageMatches=this.findController.pageMatches[this.pageIdx]||null;pageMatchesLength=this.findController.pageMatchesLength?this.findController.pageMatchesLength[this.pageIdx]||null:null}this.matches=this.convertMatches(pageMatches,pageMatchesLength);this.renderMatches(this.matches)},_bindMouse:function TextLayerBuilder_bindMouse(){var div=this.textLayerDiv;var self=this;div.addEventListener("mousedown",function(e){if(self.enhanceTextSelection&&self.textLayerRenderTask){self.textLayerRenderTask.expandTextDivs(true);return}var end=div.querySelector(".endOfContent");if(!end){return}var adjustTop=e.target!==div;adjustTop=adjustTop&&window.getComputedStyle(end).getPropertyValue("-moz-user-select")!=="none";if(adjustTop){var divBounds=div.getBoundingClientRect();var r=Math.max(0,(e.pageY-divBounds.top)/divBounds.height);end.style.top=(r*100).toFixed(2)+"%"}end.classList.add("active")});div.addEventListener("mouseup",function(e){if(self.enhanceTextSelection&&self.textLayerRenderTask){self.textLayerRenderTask.expandTextDivs(false);return}var end=div.querySelector(".endOfContent");if(!end){return}end.style.top="";end.classList.remove("active")})}};return TextLayerBuilder}();DFLIP.ConvertPageLinks=function(){var w=arguments[0]/100,h=arguments[1]/100;var toPercent=function(_x,_y,_w,_h,_dest){return{x:_x/w,y:_y/h,w:_w/w,h:_h/h,dest:_dest}};var percents=[];var input;for(var index=2;index<arguments.length;index++){input=arguments[index];percents[index-2]=toPercent.apply(this,input)}return percents};DFLIP.parseLinks=function(links){var _links;if(links!=null&&links.length>0){for(var index=0;index<links.length;index++){_links=links[index];if(_links!=null&&_links[0]!=null&&_links[0].dest==null){_links=DFLIP.ConvertPageLinks.apply(this,_links);links[index]=_links}}}return links};(function($){function isTrue(val){return val=="true"||val==true}function checkValues(options){if(options.webgl!=null)options.webgl=isTrue(options.webgl);if(options.enableDownload!=null)options.enableDownload=isTrue(options.enableDownload);if(options.search!=null)options.search=isTrue(options.search);if(options.enableAnalytics!=null)options.enableAnalytics=isTrue(options.enableAnalytics);if(options.scrollWheel!=null)options.scrollWheel=isTrue(options.scrollWheel);if(options.autoEnableOutline!=null)options.autoEnableOutline=isTrue(options.autoEnableOutline);if(options.autoEnableThumbnail!=null)options.autoEnableThumbnail=isTrue(options.autoEnableThumbnail);if(options.transparent!=null)options.transparent=isTrue(options.transparent);if(options.overwritePDFOutline!=null)options.overwritePDFOutline=isTrue(options.overwritePDFOutline);if(options.soundEnable!=null)options.soundEnable=isTrue(options.soundEnable);if(options.forceFit!=null)options.forceFit=isTrue(options.forceFit);if(options.enableAnnotation!=null)options.enableAnnotation=isTrue(options.enableAnnotation);if(options.webglShadow!=null)options.webglShadow=isTrue(options.webglShadow);if(options.autoPlay!=null)options.autoPlay=isTrue(options.autoPlay);if(options.autoPlayStart!=null)options.autoPlayStart=isTrue(options.autoPlayStart);if(options.paddingTop!=null)options.paddingTop=parseInt(options.paddingTop,10);if(options.paddingRight!=null)options.paddingRight=parseInt(options.paddingRight,10);if(options.paddingBottom!=null)options.paddingBottom=parseInt(options.paddingBottom,10);if(options.paddingLeft!=null)options.paddingLeft=parseInt(options.paddingLeft,10);if(options.zoomRatio!=null)options.zoomRatio=parseFloat(options.zoomRatio,10);if(options.stiffness!=null)options.stiffness=parseFloat(options.stiffness,10);if(options.autoPlayDuration!=null)options.autoPlayDuration=parseInt(options.autoPlayDuration,10);if(options.linkTarget!=null)options.linkTarget=parseInt(options.linkTarget,10);if(options.pageMode==0||options.pageMode=="0")options.pageMode=null;if(options.singlePageMode==0||options.singlePageMode=="0")options.singlePageMode=null}function parseOptions(options){if(options.parsed==true)return;options.parsed=true;var links=[];checkValues(options);if(typeof dFlipWPGlobal!=="undefined"&&options.wpOptions=="true"){try{for(var key in options.links){var _pagelinks=options.links[key];var pagelink=[100,100];for(var l=0;l<_pagelinks.length;l++){var _link=_pagelinks[l];var _values=_link.substr(1).slice(0,-1).split(",");var _linkarr=[];for(var v=0;v<5;v++){_linkarr[v]=_values[v]}pagelink.push(_linkarr)}links[parseInt(key,10)+1]=pagelink}}catch(error){console.error(error.stack)}options.links=DFLIP.parseLinks(links)}else{options.links=DFLIP.parseLinks(options.links)}}DFLIP.getOptions=function(book){book=$(book);var book_id=book.attr("id");var options="option_"+book_id,source=book.attr("source")||book.attr("df-source");options=options==null||options==""||window[options]==null?{}:window[options];options.source=source==null||source==""?options.source:source;var attrOptions={webgl:book.attr("webgl"),height:book.attr("height"),soundEnable:book.attr("sound"),bookTitle:book.data("title"),transparent:book.attr("transparent"),enableDownload:book.attr("download"),search:book.attr("search"),duration:book.attr("duration"),hard:book.attr("hard"),openPage:book.data("page"),pageMode:book.attr("pagemode"),direction:book.attr("direction"),backgroundColor:book.attr("backgroundcolor"),scrollWheel:book.attr("scrollwheel"),backgroundImage:book.attr("backgroundimage"),paddingTop:book.attr("paddingtop"),paddingRight:book.attr("paddingright"),paddingBottom:book.attr("paddingbottom"),paddingLeft:book.attr("paddingleft"),wpOptions:book.attr("wpoptions")};options=$.extend(true,{},options,attrOptions);parseOptions(options);return options};DFLIP.parseBooks=function(){$("._df_button, ._df_thumb, ._df_custom, ._df_book").each(function(){var book=$(this);var parsed=book.attr("parsed")||book.attr("df-parsed");if(parsed!=="true"){book.attr("df-parsed","true");if(book.hasClass("_df_book")){var book_id=book.attr("id"),slug=book.attr("slug");var options=DFLIP.getOptions(book);options.id=book_id;if(slug!=null)options.slug=slug;if(book_id){window[book_id.toString()]=$(book).flipBook(options.source,options)}else{$(book).flipBook(options.source,options)}}else{if(book.hasClass("_df_thumb")){var wrapper=$("<div class='_df_book-cover'>");var text=book.html().trim();book.html("");var title=$("<span class='_df_book-title'>").html(text).appendTo(wrapper);var thumb=book.attr("thumb")||book.attr("df-thumb"),thumbType=book.attr("thumbtype")||DFLIP.defaults.thumbElement||"div",tags=book.attr("tags")||book.attr("df-tags");if(tags){tags=tags.split(",");if(tags.length>0){for(var tagcount=0;tagcount<tags.length;tagcount++){book.append("<span class='_df_book-tag'>"+tags[tagcount]+"</span>")}}}if(thumb!=null&&thumb.toString().trim()!=""){if(thumbType=="img"){wrapper.append('<img src="'+thumb+'" alt="'+text+'"/>');book.attr("thumb-type","img")}else{wrapper.css({backgroundImage:"url('"+thumb+"')"})}}else{wrapper.addClass("_df_thumb-not-found")}book.append(wrapper)}}}})};$(document).ready(function(){if(typeof dFlipLocation=="undefined"&&DFLIP.autoDetectLocation!=false){$("script").each(function(){var src=$(this)[0].src;if((src.indexOf("/dflip.js")>-1||src.indexOf("/dflip.min.js")>-1)&&(src.indexOf("https://")>-1||src.indexOf("https://")>-1)&&src.indexOf("js/dflip.")>-1){var splits=src.split("/");window.dFlipLocation=splits.slice(0,-2).join("/")}})}if(typeof dFlipLocation!=="undefined"){if(dFlipLocation.length>2&&dFlipLocation.slice(-1)!=="/"){window.dFlipLocation+="/"}DFLIP.defaults.mockupjsSrc=dFlipLocation+"js/libs/mockup.min.js";DFLIP.defaults.pdfjsSrc=dFlipLocation+"js/libs/pdf.min.js";DFLIP.defaults.pdfjsCompatibilitySrc=dFlipLocation+"js/libs/compatibility.js";DFLIP.defaults.threejsSrc=dFlipLocation+"js/libs/three.min.js";DFLIP.defaults.pdfjsWorkerSrc=dFlipLocation+"js/libs/pdf.worker.min.js";DFLIP.defaults.soundFile=dFlipLocation+"sound/turn2.mp3";DFLIP.defaults.imagesLocation=dFlipLocation+"images";DFLIP.defaults.imageResourcesPath=dFlipLocation+"images/pdfjs/";DFLIP.defaults.cMapUrl=dFlipLocation+"js/libs/cmaps/";if(typeof dFlipWPGlobal!=="undefined"){checkValues(dFlipWPGlobal);$.extend(true,DFLIP.defaults,dFlipWPGlobal)}}DFLIP.preParseHash=window.location.hash;$("body").on("click","._df_button, ._df_thumb, ._df_custom",function(event){event.preventDefault();var book=$(this);if(!window.dfLightBox){window.dfLightBox=new DFLightBox(function(){Array.prototype.forEach.call(DFLIP.utils.getSharePrefixes(),function(prefix){if(window.location.hash.indexOf("#"+prefix)==0)window.location.hash="#_"});window.dfActiveLightBoxBook.analytics({eventAction:"Book Closed",options:window.dfActiveLightBoxBook.options});window.dfActiveLightBoxBook.dispose();window.dfActiveLightBoxBook=null})}window.dfLightBox.duration=500;if(window.dfActiveLightBoxBook&&window.dfActiveLightBoxBook.dispose){window.dfActiveLightBoxBook.dispose()}else{window.dfLightBox.show(function(){var options=DFLIP.getOptions(book);options.transparent=false;options.height="100%";options.id=book.attr("id");var slug=book.attr("slug");if(slug!=null)options.slug=slug;options.isLightBox=true;window.dfActiveLightBoxBook=$(window.dfLightBox.container).flipBook(options.source,options)})}});if(DFLIP.utils.isSafari||DFLIP.utils.isIOS){$("body").addClass("df-webkit")}var hash_triggered=false;Array.prototype.forEach.call(DFLIP.utils.getSharePrefixes(),function(prefix){if(DFLIP.preParseHash&&DFLIP.preParseHash.indexOf(prefix)>=0&&hash_triggered===false){var id=DFLIP.preParseHash.split(prefix)[1].split("/")[0];var page=DFLIP.preParseHash.split(prefix)[1].split("/")[1];if(page!=null){page=page.split("/")[0]}var book;book=$("[slug="+id+"]");if(book.length==0)book=$("#"+id);if(book.length==0)book=$("[_slug="+id+"]");if(book.length>0){if(page!=null){book.data("page",page)}if(book.is("._df_button, ._df_thumb, ._df_custom")){book.trigger("click");hash_triggered=true}}}});DFLIP.parseBooks();if($("body").hasClass("attachment-pdf")){var attachments=$("[attachment_pdf_flipbook_lightbox]");if(attachments.length>0){$(attachments[0]).trigger("click")}}$("body").on("click",".df-ui-sidemenu-close",function(){var $this=$(this);$this.closest(".df-container").find(".df-ui-outline.df-active , .df-ui-thumbnail.df-active").trigger("click")})})})(jQuery);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/plugins/a3-lazy-load/assets/js/jquery.lazyloadxt.extra.min.js */
try{
/* Lazy Load XT 1.1.0 | MIT License */
!function(m,y,e,o){var p="lazyLoadXT",w="lazied",z="load error",t="lazy-hidden",C=e.documentElement||e.body,b={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:y.onscroll===o||!!y.operamini||!C.getBoundingClientRect,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"lazyloadall",oninit:{removeClass:"lazy"},onshow:{addClass:t},onload:{removeClass:t,addClass:"lazy-loaded"},onerror:{removeClass:t},checkDuplicates:!0},n={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},a=m(y),d=m.extend,E=m.data||function(e,t){return m(e).data(t)},T=[],L=0,r=0;function c(e,t){return e[t]===o?b[t]:e[t]}function I(){var e=y.pageYOffset;return e===o?C.scrollTop:e}function X(e,t){var o=b["on"+e];o&&("function"==typeof o?o.call(t[0]):(o.addClass&&t.addClass(o.addClass),o.removeClass&&t.removeClass(o.removeClass))),t.trigger("lazy"+e,[t]),u()}function B(e){X(e.type,m(this).off(z,B))}function i(e){if(T.length){e=e||b.forceLoad,L=1/0;for(var t=I(),o=y.innerHeight||C.clientHeight,n=y.innerWidth||C.clientWidth,a=0,r=T.length;a<r;a++){var i,l,s,d,c,u,f=T[a],h=f[0],v=f[p],A=!1,g=e||E(h,w)<0;m.contains(C,h)?(e||!v.visibleOnly||h.offsetWidth||h.offsetHeight)&&(g||(i=h.getBoundingClientRect(),l=v.edgeX,s=v.edgeY,g=(d=i.top+t-s-o)<=t&&i.bottom>-s&&i.left<=n+l&&i.right>-l),g?(f.on(z,B),X("show",f),(u="function"==typeof(c=v.srcAttr)?c(f):h.getAttribute(c))&&(h.src=u),A=!0):d<L&&(L=d)):A=!0,A&&(T.splice(a--,1),r--)}r||X("complete",m(C))}}function l(){1<r?(r=1,i(),setTimeout(l,b.throttle)):r=0}function u(e){T.length&&(e&&"scroll"===e.type&&e.currentTarget===y&&L>=I()||(r||setTimeout(l,0),r=2))}function s(){a.lazyLoadXT()}function f(){i(!0)}m[p]=d(b,n,m[p]),m.fn[p]=function(a){var e,r=c(a=a||{},"blankImage"),i=c(a,"checkDuplicates"),t=c(a,"scrollContainer"),l=c(a,"show"),s={};for(e in m(t).on("scroll",u),n)s[e]=c(a,e);return this.each(function(e,t){if(t===y)m(b.selector).lazyLoadXT(a);else{var o=i&&E(t,w),n=m(t).data(w,l?-1:1);if(o)return void u();r&&"IMG"===t.tagName&&!t.src&&(t.src=r),n[p]=d({},s),X("init",n),T.push(n),u()}})},m(e).ready(function(){X("start",a),a.on(b.updateEvent,u).on(b.forceEvent,f),m(e).on(b.updateEvent,u),b.autoInit&&(a.on(b.loadEvent,s),s())})}(window.jQuery||window.Zepto||window.$,window,document),function(l){var o=l.lazyLoadXT;o.selector+=",video,iframe[data-src],embed[data-src]",o.videoPoster="data-poster",l(document).on("lazyshow","video",function(e,t){var a=t.lazyLoadXT.srcAttr,r="function"==typeof a,i=!1;t.attr("poster",t.attr(o.videoPoster)),t.children("source,track").each(function(e,t){var o=l(t),n=r?a(o):o.attr(a);n&&(o.attr("src",n),i=!0)}),i&&void 0!==l(this).attr("preload")&&"none"!=l(this).attr("preload")&&this.load(),l(this).removeClass("lazy-hidden")}),l(document).on("lazyshow","embed",function(e,t){l(this).removeClass("lazy-hidden")})}(window.jQuery||window.Zepto||window.$);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/plugins/a3-lazy-load/assets/js/jquery.lazyloadxt.srcset.min.js */
try{
/* Lazy Load XT 1.1.0 | MIT License */
!function(t,r,e,s){var n,a,c=t.lazyLoadXT,i="srcset"in new Image,o=/^\s*(\S*)/,d=/\S\s+(\d+)w/,u=/\S\s+(\d+)h/,l=/\S\s+([\d\.]+)x/,x=[0,1/0],w=[0,1],h={srcsetAttr:"data-srcset",srcsetExtended:!0,srcsetBaseAttr:"data-srcset-base",srcsetExtAttr:"data-srcset-ext"},f={w:0,h:0,x:0};for(n in h)void 0===c[n]&&(c[n]=h[n]);function p(r,e){return Math[e].apply(null,t.map(r,function(t){return t[n]}))}function A(t){return t[n]>=f[n]||t[n]===a}function m(t){return t[n]===a}function g(s){var i=s.attr(c.srcsetAttr);if(!i)return!1;var h=t.map(i.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ "),function(t){return{url:o.exec(t)[1],w:parseFloat((d.exec(t)||x)[1]),h:parseFloat((u.exec(t)||x)[1]),x:parseFloat((l.exec(t)||w)[1])}});if(!h.length)return!1;var g,v,y=e.documentElement;for(g in f={w:r.innerWidth||y.clientWidth,h:r.innerHeight||y.clientHeight,x:r.devicePixelRatio||1})n=g,a=p(h,"max"),h=t.grep(h,A);for(g in f)n=g,a=p(h,"min"),h=t.grep(h,m);return v=h[0].url,c.srcsetExtended&&(v=(s.attr(c.srcsetBaseAttr)||"")+v+(s.attr(c.srcsetExtAttr)||"")),v}c.selector+=",img["+c.srcsetAttr+"],source["+c.srcsetAttr+"]",t(e).on("lazyshow","img",function(t,r){var e=r.attr(c.srcsetAttr);e&&(!c.srcsetExtended&&i?(r.attr("srcset",e),r.attr("data-srcset","")):r.lazyLoadXT.srcAttr=g)}),t(e).on("lazyshow","source",function(r,e){t(this).removeClass("lazy-hidden");var s=e.attr(c.srcsetAttr);s&&(!c.srcsetExtended&&i?(e.attr("srcset",s),e.attr("data-srcset","")):e.lazyLoadXT.srcAttr=g)})}(window.jQuery||window.Zepto||window.$,window,document);

}
catch(e){console.error("An error has occurred: "+e.stack);}
/* https://www.kofiannanfoundation.org/app/plugins/a3-lazy-load/assets/js/jquery.lazyloadxt.extend.js */
try{
jQuery.lazyLoadXT.updateEvent='load orientationchange resize scroll touchmove focus click customlazyloadxtevent';jQuery.lazyLoadXT.edgeY=a3_lazyload_extend_params.edgeY;jQuery.lazyLoadXT.srcsetExtended=!1;if(typeof a3_lazyload_extend_params.horizontal_container_classnames!=='undefined'&&''!==a3_lazyload_extend_params.horizontal_container_classnames){jQuery.lazyLoadXT.scrollContainer=a3_lazyload_extend_params.horizontal_container_classnames}
jQuery(document).ready(function($){jQuery(document).on('mouseenter','.site-header-cart',function(){jQuery(document).trigger('customlazyloadxtevent')});jQuery(document).on('mouseenter','.widget_shopping_cart',function(){jQuery(document).trigger('customlazyloadxtevent')});jQuery(document).on('mouseover','#wp-admin-bar-top-secondary',function(){jQuery(document).trigger('customlazyloadxtevent')})});jQuery(document).ajaxComplete(function(){setTimeout(function(){jQuery(window).lazyLoadXT()},1000)});

}
catch(e){console.error("An error has occurred: "+e.stack);}
